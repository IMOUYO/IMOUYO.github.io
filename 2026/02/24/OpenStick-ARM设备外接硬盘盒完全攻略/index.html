<!DOCTYPE html>
<html lang=en>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="renderer" content="webkit">
  <meta http-equiv="Cache-Control" content="no-transform" />
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="format-detection" content="telephone=no,email=no,adress=no">
  <!-- Color theme for statusbar -->
  <meta name="theme-color" content="#000000" />
  <!-- å¼ºåˆ¶é¡µé¢åœ¨å½“å‰çª—å£ä»¥ç‹¬ç«‹é¡µé¢æ˜¾ç¤º,é˜²æ­¢åˆ«äººåœ¨æ¡†æ¶é‡Œè°ƒç”¨é¡µé¢ -->
  <meta http-equiv="window-target" content="_top" />
  
  
  <title>OpenStick/ARMè®¾å¤‡å¤–æ¥ç¡¬ç›˜ç›’å®Œå…¨æ”»ç•¥ | Hexo</title>
  <meta name="description" content="æœ¬æ–‡æ¡£è®°å½•äº†åœ¨OpenStickï¼ˆARM64è®¾å¤‡ï¼‰ä¸Šä»é›¶å¼€å§‹è¿æ¥ã€è¯†åˆ«å¹¶æŒ‚è½½å¤–ç½®ç¡¬ç›˜ç›’çš„å…¨è¿‡ç¨‹ï¼Œç‰¹åˆ«é€‚ç”¨äºåªæœ‰ä¸€ä¸ªMicro USBå£çš„ç”µè§†æ£’&#x2F;å¼€å‘æ¿ã€‚ æ”»ç•¥ä½œè€…ï¼šImakabaka æŠ€æœ¯æŒ‡å¯¼ï¼šDeepSeek AIåŠ©æ‰‹ è”ç³»æˆ‘ğŸ‘‰ï¼šwangyimail20230608@163.com   ğŸ“– ç›®å½•  èƒŒæ™¯æ•…äº‹ é—®é¢˜åˆ†æ å®Œæ•´è§£å†³æ­¥éª¤ å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ æ—¥å¸¸ä½¿ç”¨æŒ‡å— å‚è€ƒèµ„æ–™   ğŸ¯ èƒŒæ™¯">
<meta property="og:type" content="article">
<meta property="og:title" content="OpenStick&#x2F;ARMè®¾å¤‡å¤–æ¥ç¡¬ç›˜ç›’å®Œå…¨æ”»ç•¥">
<meta property="og:url" content="https://imouyo.github.io/2026/02/24/OpenStick-ARM%E8%AE%BE%E5%A4%87%E5%A4%96%E6%8E%A5%E7%A1%AC%E7%9B%98%E7%9B%92%E5%AE%8C%E5%85%A8%E6%94%BB%E7%95%A5/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="æœ¬æ–‡æ¡£è®°å½•äº†åœ¨OpenStickï¼ˆARM64è®¾å¤‡ï¼‰ä¸Šä»é›¶å¼€å§‹è¿æ¥ã€è¯†åˆ«å¹¶æŒ‚è½½å¤–ç½®ç¡¬ç›˜ç›’çš„å…¨è¿‡ç¨‹ï¼Œç‰¹åˆ«é€‚ç”¨äºåªæœ‰ä¸€ä¸ªMicro USBå£çš„ç”µè§†æ£’&#x2F;å¼€å‘æ¿ã€‚ æ”»ç•¥ä½œè€…ï¼šImakabaka æŠ€æœ¯æŒ‡å¯¼ï¼šDeepSeek AIåŠ©æ‰‹ è”ç³»æˆ‘ğŸ‘‰ï¼šwangyimail20230608@163.com   ğŸ“– ç›®å½•  èƒŒæ™¯æ•…äº‹ é—®é¢˜åˆ†æ å®Œæ•´è§£å†³æ­¥éª¤ å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ æ—¥å¸¸ä½¿ç”¨æŒ‡å— å‚è€ƒèµ„æ–™   ğŸ¯ èƒŒæ™¯">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2026-02-24T15:19:28.000Z">
<meta property="article:modified_time" content="2026-02-24T18:22:42.899Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="DIY">
<meta name="twitter:card" content="summary">
  <!-- Canonical links -->
  <link rel="canonical" href="https://imouyo.github.io/2026/02/24/OpenStick-ARM%E8%AE%BE%E5%A4%87%E5%A4%96%E6%8E%A5%E7%A1%AC%E7%9B%98%E7%9B%92%E5%AE%8C%E5%85%A8%E6%94%BB%E7%95%A5/index.html">
  
  
    <link rel="icon" href="/favicon.png" type="image/x-icon">
  
  
<link rel="stylesheet" href="/css/style.css">

  
  
  
  
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1.4.0/dist/gitalk.min.css">
  
<meta name="generator" content="Hexo 8.1.1"><link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
</head>


<body class="main-center theme-black" itemscope itemtype="http://schema.org/WebPage">
  <header class="header" itemscope itemtype="http://schema.org/WPHeader">
  <div class="slimContent">
    <div class="navbar-header">
      
      
      <div class="profile-block text-center">
        <a id="avatar" href="https://github.com/IMOUYO" target="_blank">
          <img class="img-circle img-rotate" src="/images/avatar.gif" width="200" height="200">
        </a>
        <h2 id="name" class="hidden-xs hidden-sm">makabaka</h2>
        <h3 id="title" class="hidden-xs hidden-sm hidden-md"></h3>
        <small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i> Earth</small>
      </div>
      
      <div class="search" id="search-form-wrap">

    <form class="search-form sidebar-form">
        <div class="input-group">
            <input type="text" class="search-form-input form-control" placeholder="Search" />
            <span class="input-group-btn">
                <button type="submit" class="search-form-submit btn btn-flat" onclick="return false;"><i class="icon icon-search"></i></button>
            </span>
        </div>
    </form>
    <div class="ins-search">
  <div class="ins-search-mask"></div>
  <div class="ins-search-container">
    <div class="ins-input-wrapper">
      <input type="text" class="ins-search-input" placeholder="Type something..." x-webkit-speech />
      <button type="button" class="close ins-close ins-selectable" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">Ã—</span></button>
    </div>
    <div class="ins-section-wrapper">
      <div class="ins-section-container"></div>
    </div>
  </div>
</div>


</div>
      <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>
    <nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation">
      <ul class="nav navbar-nav main-nav menu-highlight">
        
        
        <li class="menu-item menu-item-home">
          <a href="/.">
            
            <i class="icon icon-home-fill"></i>
            
            <span class="menu-title">Home</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-archives">
          <a href="/archives">
            
            <i class="icon icon-archives-fill"></i>
            
            <span class="menu-title">Archives</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-categories">
          <a href="/categories">
            
            <i class="icon icon-folder"></i>
            
            <span class="menu-title">Categories</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-tags">
          <a href="/tags">
            
            <i class="icon icon-tags"></i>
            
            <span class="menu-title">Tags</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-about">
          <a href="/about">
            
            <i class="icon icon-cup-fill"></i>
            
            <span class="menu-title">About</span>
          </a>
        </li>
        
      </ul>
      
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/cofess" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
    </ul>

    </nav>
  </div>
</header>

  
    <aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    
      
<div>
  <h3 id="catalog"></h3>
  <div id="toc"></div>
</div>

<script>
(function() {
  // ===== ç”Ÿæˆç›®å½• =====
  function buildToc() {
    // var article = document.querySelector('.post-content, .article-content, main');
    var article = document.querySelector('article.thisIsAAnchor');
    if (!article) return;
    
    document.getElementById('catalog').innerHTML = 'ç›®å½•';
    var headings = article.querySelectorAll('h1, h2, h3, h4');
    if (headings.length === 0) {
      document.getElementById('toc').innerHTML = '<p>æ— æ ‡é¢˜</p>';
      return;
    }
    
    var toc = document.getElementById('toc');
    var ul = document.createElement('ul');
    
    headings.forEach(function(heading, index) {
      // ç”Ÿæˆå”¯ä¸€ID
      if (!heading.id) {
        heading.id = 'heading-' + index;
      }
      
      var li = document.createElement('li');
      var a = document.createElement('a');
      a.href = '#' + heading.id;
      a.textContent = heading.textContent;
      a.style.marginLeft = (parseInt(heading.tagName[1]) - 1) * 12 + 'px';
      a.style.display = 'inline-block';
      
      li.appendChild(a);
      ul.appendChild(li);
    });
    
    toc.innerHTML = '';
    toc.appendChild(ul);
    return headings;
  }
  
  // ===== ç»‘å®šç‚¹å‡»äº‹ä»¶ =====
  function bindClick() {
    document.getElementById('toc').addEventListener('click', function(e) {
      var link = e.target.closest('a');
      if (link) {
        e.preventDefault();
        var target = document.querySelector(link.getAttribute('href'));
        if (target) {
          target.scrollIntoView({
            behavior: 'smooth',
            block: 'start'
          });
          history.pushState(null, null, link.getAttribute('href'));
        }
      }
    });
  }
  
  // ===== æ»šåŠ¨é«˜äº® =====
  function highlightActive() {
  var tocLinks = document.querySelectorAll('#toc a');
  if (tocLinks.length === 0) return;
  
  // é»˜è®¤é«˜äº®ç¬¬ä¸€ä¸ª
  tocLinks[0].style.fontWeight = 'bold';
  tocLinks[0].style.color = '#0066cc';
  tocLinks[0].style.borderLeft = '3px solid #0066cc';
  tocLinks[0].style.paddingLeft = '8px';
  
  // ä¸ºæ¯ä¸ªç›®å½•é“¾æ¥æ·»åŠ ç‚¹å‡»äº‹ä»¶
  tocLinks.forEach(function(link) {
    link.addEventListener('click', function(e) {
      // ç§»é™¤æ‰€æœ‰é“¾æ¥çš„é«˜äº®æ ·å¼
      tocLinks.forEach(function(l) {
        l.style.fontWeight = 'normal';
        l.style.color = '';
        l.style.borderLeft = '';
        l.style.paddingLeft = '';
      });
      
      // ä¸ºå½“å‰ç‚¹å‡»çš„é“¾æ¥æ·»åŠ é«˜äº®æ ·å¼
      this.style.fontWeight = 'bold';
      this.style.color = '#0066cc';
      this.style.borderLeft = '3px solid #0066cc';
      this.style.paddingLeft = '8px';
    });
  });
}
  
  // ===== åˆå§‹åŒ– =====
  function init() {
    buildToc();
    bindClick();
    highlightActive();
  }
  
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', init);
  } else {
    init();
  }
})();
</script>

<style>
/* æç®€æ ·å¼ï¼Œå¯åˆ é™¤ */
#toc ul { list-style: none; padding-left: 0; }
#toc li { margin: 5px 0; }
#toc a { text-decoration: none; color: #333; }
#toc a:hover { color: #0066cc; }
</style>

    
      <div class="widget">
    <h3 class="widget-title">Board</h3>
    <div class="widget-body">
        <div id="board">
            <div class="content">
                <p>æ¬¢è¿äº¤æµä¸åˆ†äº«ç»éªŒ!è”ç³»æˆ‘wangyimail20230608@163.com</p>
            </div>
        </div>
    </div>
</div>

    
      
  <div class="widget">
    <h3 class="widget-title">Categories</h3>
    <div class="widget-body">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%80%E6%9C%AF/">æŠ€æœ¯</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%80%E6%9C%AF/%E5%89%8D%E7%AB%AF/">å‰ç«¯</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">æ•°æ®åº“</a><span class="category-list-count">2</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">Tags</h3>
    <div class="widget-body">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/DIY/" rel="tag">DIY</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MySQL/" rel="tag">MySQL</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Question/" rel="tag">Question</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/issue/" rel="tag">issue</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/" rel="tag">java</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AD%A6%E4%B9%A0/" rel="tag">å­¦ä¹ </a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93%E6%9F%A5%E8%AF%A2/" rel="tag">æ•°æ®åº“æŸ¥è¯¢</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget-body tagcloud">
      <a href="/tags/DIY/" style="font-size: 14px;">DIY</a> <a href="/tags/MySQL/" style="font-size: 13px;">MySQL</a> <a href="/tags/Question/" style="font-size: 13px;">Question</a> <a href="/tags/issue/" style="font-size: 13px;">issue</a> <a href="/tags/java/" style="font-size: 13px;">java</a> <a href="/tags/%E5%AD%A6%E4%B9%A0/" style="font-size: 13px;">å­¦ä¹ </a> <a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93%E6%9F%A5%E8%AF%A2/" style="font-size: 13px;">æ•°æ®åº“æŸ¥è¯¢</a>
    </div>
  </div>

    
      
  <div class="widget">
    <h3 class="widget-title">Archive</h3>
    <div class="widget-body">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2026/02/">February 2026</a><span class="archive-list-count">14</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget-body">
      <ul class="recent-post-list list-unstyled no-thumbnail">
        
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                
              </p>
              <p class="item-title">
                <a href="/2026/02/25/OpenStick%E5%AE%89%E8%A3%85Jellyfin/" class="title">OpenStickå®‰è£…Jellyfin</a>
              </p>
              <p class="item-date">
                <time datetime="2026-02-24T16:06:20.000Z" itemprop="datePublished">2026-02-25</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                
              </p>
              <p class="item-title">
                <a href="/2026/02/24/OpenStick-ARM%E8%AE%BE%E5%A4%87%E5%A4%96%E6%8E%A5%E7%A1%AC%E7%9B%98%E7%9B%92%E5%AE%8C%E5%85%A8%E6%94%BB%E7%95%A5/" class="title">OpenStick/ARMè®¾å¤‡å¤–æ¥ç¡¬ç›˜ç›’å®Œå…¨æ”»ç•¥</a>
              </p>
              <p class="item-date">
                <time datetime="2026-02-24T15:19:28.000Z" itemprop="datePublished">2026-02-24</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                
              </p>
              <p class="item-title">
                <a href="/2026/02/22/%E9%9A%8F%E8%BA%ABwifi%E5%88%B7linux/" class="title">éšèº«wifiåˆ·linux</a>
              </p>
              <p class="item-date">
                <time datetime="2026-02-22T14:45:13.000Z" itemprop="datePublished">2026-02-22</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                
              </p>
              <p class="item-title">
                <a href="/2026/02/22/Questions/" class="title">Questions</a>
              </p>
              <p class="item-date">
                <time datetime="2026-02-22T09:16:57.000Z" itemprop="datePublished">2026-02-22</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                
              </p>
              <p class="item-title">
                <a href="/2026/02/21/electron%E5%AD%A6%E4%B9%A0/" class="title">electronå­¦ä¹ </a>
              </p>
              <p class="item-date">
                <time datetime="2026-02-21T13:40:37.000Z" itemprop="datePublished">2026-02-21</time>
              </p>
            </div>
          </li>
          
      </ul>
    </div>
  </div>
  

    
  </div>
</aside>

  
  
<main class="main" role="main">
  <div class="content">
  <article id="post-OpenStick-ARMè®¾å¤‡å¤–æ¥ç¡¬ç›˜ç›’å®Œå…¨æ”»ç•¥" class="article article-type-post thisIsAAnchor" itemscope itemtype="http://schema.org/BlogPosting">
    
    <div class="article-header">
      
        
  
    <h1 class="article-title" itemprop="name">
      OpenStick/ARMè®¾å¤‡å¤–æ¥ç¡¬ç›˜ç›’å®Œå…¨æ”»ç•¥
    </h1>
  

      
      <div class="article-meta">
        <span class="article-date">
    <i class="icon icon-calendar-check"></i>
	<a href="/2026/02/24/OpenStick-ARM%E8%AE%BE%E5%A4%87%E5%A4%96%E6%8E%A5%E7%A1%AC%E7%9B%98%E7%9B%92%E5%AE%8C%E5%85%A8%E6%94%BB%E7%95%A5/" class="article-date">
	  <time datetime="2026-02-24T15:19:28.000Z" itemprop="datePublished">2026-02-24</time>
	</a>
</span>
        
        
  <span class="article-tag">
    <i class="icon icon-tags"></i>
	<a class="article-tag-link-link" href="/tags/DIY/" rel="tag">DIY</a>
  </span>


        

        <span class="post-comment"><i class="icon icon-comment"></i> <a href="/2026/02/24/OpenStick-ARM%E8%AE%BE%E5%A4%87%E5%A4%96%E6%8E%A5%E7%A1%AC%E7%9B%98%E7%9B%92%E5%AE%8C%E5%85%A8%E6%94%BB%E7%95%A5/#comments" class="article-comment-link">Comments</a></span>
        
      </div>
    </div>
    <div class="article-entry marked-body" itemprop="articleBody">
      
        <blockquote>
<p>æœ¬æ–‡æ¡£è®°å½•äº†åœ¨OpenStickï¼ˆARM64è®¾å¤‡ï¼‰ä¸Šä»é›¶å¼€å§‹è¿æ¥ã€è¯†åˆ«å¹¶æŒ‚è½½å¤–ç½®ç¡¬ç›˜ç›’çš„å…¨è¿‡ç¨‹ï¼Œç‰¹åˆ«é€‚ç”¨äº<strong>åªæœ‰ä¸€ä¸ªMicro USBå£</strong>çš„ç”µè§†æ£’/å¼€å‘æ¿ã€‚</p>
<p><em>æ”»ç•¥ä½œè€…ï¼š<a target="_blank" rel="noopener" href="https://github.com/IMOUYO">Imakabaka</a></em><br />
<em>æŠ€æœ¯æŒ‡å¯¼ï¼šDeepSeek AIåŠ©æ‰‹</em><br />
<em>è”ç³»æˆ‘ğŸ‘‰ï¼šwangyimail20230608@163.com</em></p>
</blockquote>
<h2 id="ç›®å½•"><a class="markdownIt-Anchor" href="#ç›®å½•"></a> ğŸ“– ç›®å½•</h2>
<ul>
<li>èƒŒæ™¯æ•…äº‹</li>
<li>é—®é¢˜åˆ†æ</li>
<li>å®Œæ•´è§£å†³æ­¥éª¤</li>
<li>å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</li>
<li>æ—¥å¸¸ä½¿ç”¨æŒ‡å—</li>
<li>å‚è€ƒèµ„æ–™</li>
</ul>
<h2 id="èƒŒæ™¯æ•…äº‹"><a class="markdownIt-Anchor" href="#èƒŒæ™¯æ•…äº‹"></a> ğŸ¯ èƒŒæ™¯æ•…äº‹</h2>
<p>æˆ‘æœ‰ä¸€ä¸ªOpenStickï¼ˆç”µè§†æ£’åˆ·çš„Debianç³»ç»Ÿï¼‰ï¼Œåªæœ‰ä¸€ä¸ªMicro USBå£ï¼Œæƒ³ç”¨å®ƒè¿æ¥å¤–éƒ¨ç¡¬ç›˜ç›’åšNASã€‚ç¡¬ç›˜ç›’æ˜¯<strong>ç‹¬ç«‹12Vä¾›ç”µ</strong>çš„3.5è‹±å¯¸ç¡¬ç›˜ç›’ï¼Œé€šè¿‡USBè½¬Micro USBçº¿è¿æ¥è®¾å¤‡ã€‚</p>
<p><strong>è®¾å¤‡é…ç½®ï¼š</strong></p>
<ul>
<li>ç³»ç»Ÿï¼šDebian ARM64 (aarch64)</li>
<li>å­˜å‚¨ï¼š3.6GB SDå¡ï¼ˆæ ¹åˆ†åŒºä»…3.3GBï¼‰</li>
<li>å†…å­˜ï¼š512MB RAM + 191MB SWAP</li>
<li>æ¥å£ï¼šå”¯ä¸€Micro USBå£</li>
</ul>
<h2 id="é—®é¢˜åˆ†æ"><a class="markdownIt-Anchor" href="#é—®é¢˜åˆ†æ"></a> ğŸ” é—®é¢˜åˆ†æ</h2>
<h3 id="è¡¨é¢ç°è±¡"><a class="markdownIt-Anchor" href="#è¡¨é¢ç°è±¡"></a> è¡¨é¢ç°è±¡</h3>
<ol>
<li>æ’å…¥ç¡¬ç›˜ç›’åï¼Œ<code>lsusb</code> å‘½ä»¤ä¸å­˜åœ¨</li>
<li><code>lsblk</code> çœ‹ä¸åˆ°ä»»ä½• <code>/dev/sd*</code> è®¾å¤‡</li>
<li><code>dmesg</code> æ—¥å¿—æ˜¾ç¤º AppArmor é˜»æ­¢ USB è®¿é—®</li>
</ol>
<h3 id="æ ¹æœ¬åŸå› "><a class="markdownIt-Anchor" href="#æ ¹æœ¬åŸå› "></a> æ ¹æœ¬åŸå› </h3>
<ol>
<li><strong>ç³»ç»Ÿæåº¦ç²¾ç®€</strong>ï¼šè¿åŸºç¡€USBå·¥å…·éƒ½æ²¡è£…</li>
<li><strong>USBé»˜è®¤æ˜¯deviceæ¨¡å¼</strong>ï¼šMicro USBå£è®¾è®¡ä¸ºè¿æ¥ç”µè„‘åˆ·æœºï¼Œä¸æ˜¯æ¥å¤–è®¾</li>
<li><strong>AppArmorå®‰å…¨æ¨¡å—é™åˆ¶</strong>ï¼šé˜»æ­¢CUPSç­‰æœåŠ¡è®¿é—®USBè®¾å¤‡</li>
<li><strong>USBæ§åˆ¶å™¨é©±åŠ¨æœªæ­£ç¡®åŠ è½½</strong>ï¼šéœ€è¦æ‰‹åŠ¨åˆ‡æ¢æ¨¡å¼</li>
</ol>
<h2 id="ï¸-å®Œæ•´è§£å†³æ­¥éª¤"><a class="markdownIt-Anchor" href="#ï¸-å®Œæ•´è§£å†³æ­¥éª¤"></a> ğŸ› ï¸ å®Œæ•´è§£å†³æ­¥éª¤</h2>
<h3 id="ç¬¬ä¸€é˜¶æ®µåŸºç¡€ç¯å¢ƒå‡†å¤‡"><a class="markdownIt-Anchor" href="#ç¬¬ä¸€é˜¶æ®µåŸºç¡€ç¯å¢ƒå‡†å¤‡"></a> ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€ç¯å¢ƒå‡†å¤‡</h3>
<h4 id="11-å®‰è£…å¿…è¦å·¥å…·"><a class="markdownIt-Anchor" href="#11-å®‰è£…å¿…è¦å·¥å…·"></a> 1.1 å®‰è£…å¿…è¦å·¥å…·</h4>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ›´æ–°è½¯ä»¶æº</span></span><br><span class="line"><span class="built_in">sudo</span> apt update</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®‰è£…USBåŸºç¡€å·¥å…·</span></span><br><span class="line"><span class="built_in">sudo</span> apt install usbutils usb-modeswitch</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®‰è£…æ–‡ä»¶ç³»ç»Ÿæ”¯æŒï¼ˆç”¨äºè¯†åˆ«ç¡¬ç›˜æ ¼å¼ï¼‰</span></span><br><span class="line"><span class="built_in">sudo</span> apt install ntfs-3g exfat-fuse exfat-utils</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®‰è£…å…¶ä»–æœ‰ç”¨å·¥å…·</span></span><br><span class="line"><span class="built_in">sudo</span> apt install hdparm smartmontools</span><br></pre></td></tr></table></figure>
<h3 id="ç¬¬äºŒé˜¶æ®µè¯†åˆ«usbæ§åˆ¶å™¨"><a class="markdownIt-Anchor" href="#ç¬¬äºŒé˜¶æ®µè¯†åˆ«usbæ§åˆ¶å™¨"></a> ç¬¬äºŒé˜¶æ®µï¼šè¯†åˆ«USBæ§åˆ¶å™¨</h3>
<h4 id="21-æŸ¥çœ‹usbæ§åˆ¶å™¨çŠ¶æ€"><a class="markdownIt-Anchor" href="#21-æŸ¥çœ‹usbæ§åˆ¶å™¨çŠ¶æ€"></a> 2.1 æŸ¥çœ‹USBæ§åˆ¶å™¨çŠ¶æ€</h4>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹USBè®¾å¤‡æ§åˆ¶å™¨</span></span><br><span class="line"><span class="built_in">ls</span> /sys/class/udc/</span><br><span class="line"><span class="comment"># çœ‹åˆ° ci_hdrc.0 è¯´æ˜USBæ§åˆ¶å™¨å­˜åœ¨</span></span><br></pre></td></tr></table></figure>
<h4 id="22-ç¡®è®¤usbè®¾è®¡æ¨¡å¼"><a class="markdownIt-Anchor" href="#22-ç¡®è®¤usbè®¾è®¡æ¨¡å¼"></a> 2.2 ç¡®è®¤USBè®¾è®¡æ¨¡å¼</h4>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹è®¾å¤‡æ ‘ä¸­USBçš„é…ç½®</span></span><br><span class="line"><span class="built_in">cat</span> /sys/firmware/devicetree/base/soc/usb@78d9000/dr_mode</span><br><span class="line"><span class="comment"># æ˜¾ç¤º &quot;otg&quot; è¯´æ˜ç¡¬ä»¶æ”¯æŒOTGæ¨¡å¼åˆ‡æ¢</span></span><br></pre></td></tr></table></figure>
<h3 id="ç¬¬ä¸‰é˜¶æ®µæ‰‹åŠ¨åˆ‡æ¢usbæ¨¡å¼"><a class="markdownIt-Anchor" href="#ç¬¬ä¸‰é˜¶æ®µæ‰‹åŠ¨åˆ‡æ¢usbæ¨¡å¼"></a> ç¬¬ä¸‰é˜¶æ®µï¼šæ‰‹åŠ¨åˆ‡æ¢USBæ¨¡å¼</h3>
<h4 id="31-æ‰¾åˆ°è§’è‰²åˆ‡æ¢æ¥å£"><a class="markdownIt-Anchor" href="#31-æ‰¾åˆ°è§’è‰²åˆ‡æ¢æ¥å£"></a> 3.1 æ‰¾åˆ°è§’è‰²åˆ‡æ¢æ¥å£</h4>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹debugfsä¸­çš„USBä¿¡æ¯</span></span><br><span class="line"><span class="built_in">ls</span> -la /sys/kernel/debug/usb/</span><br><span class="line"><span class="comment"># åº”è¯¥çœ‹åˆ° ci_hdrc.0 ç›®å½•</span></span><br></pre></td></tr></table></figure>
<h4 id="32-åˆ‡æ¢åˆ°hostæ¨¡å¼"><a class="markdownIt-Anchor" href="#32-åˆ‡æ¢åˆ°hostæ¨¡å¼"></a> 3.2 åˆ‡æ¢åˆ°hostæ¨¡å¼</h4>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹å½“å‰è§’è‰²</span></span><br><span class="line"><span class="built_in">cat</span> /sys/kernel/debug/usb/ci_hdrc.0/role</span><br><span class="line"><span class="comment"># é€šå¸¸æ˜¯ &quot;gadget&quot;ï¼ˆè®¾å¤‡æ¨¡å¼ï¼‰</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ‡æ¢åˆ°hostæ¨¡å¼</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;host&quot;</span> | <span class="built_in">sudo</span> <span class="built_in">tee</span> /sys/kernel/debug/usb/ci_hdrc.0/role</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¡®è®¤åˆ‡æ¢æˆåŠŸ</span></span><br><span class="line"><span class="built_in">cat</span> /sys/kernel/debug/usb/ci_hdrc.0/role</span><br><span class="line"><span class="comment"># åº”è¯¥æ˜¾ç¤º &quot;host&quot;</span></span><br></pre></td></tr></table></figure>
<h4 id="33-åŠ è½½å­˜å‚¨é©±åŠ¨"><a class="markdownIt-Anchor" href="#33-åŠ è½½å­˜å‚¨é©±åŠ¨"></a> 3.3 åŠ è½½å­˜å‚¨é©±åŠ¨</h4>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åŠ è½½USBå­˜å‚¨é©±åŠ¨</span></span><br><span class="line"><span class="built_in">sudo</span> modprobe usb-storage</span><br><span class="line"><span class="built_in">sudo</span> modprobe uas  <span class="comment"># å¦‚æœæ”¯æŒ</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡æ–°æ‰«æSCSIæ€»çº¿</span></span><br><span class="line"><span class="keyword">for</span> host <span class="keyword">in</span> /sys/class/scsi_host/host*; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;- - -&quot;</span> | <span class="built_in">sudo</span> <span class="built_in">tee</span> <span class="string">&quot;<span class="variable">$host</span>/scan&quot;</span> 2&gt;/dev/null</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>
<h3 id="ç¬¬å››é˜¶æ®µæŒ‚è½½ç¡¬ç›˜"><a class="markdownIt-Anchor" href="#ç¬¬å››é˜¶æ®µæŒ‚è½½ç¡¬ç›˜"></a> ç¬¬å››é˜¶æ®µï¼šæŒ‚è½½ç¡¬ç›˜</h3>
<h4 id="41-ç¡®è®¤ç¡¬ç›˜è¯†åˆ«"><a class="markdownIt-Anchor" href="#41-ç¡®è®¤ç¡¬ç›˜è¯†åˆ«"></a> 4.1 ç¡®è®¤ç¡¬ç›˜è¯†åˆ«</h4>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹å—è®¾å¤‡</span></span><br><span class="line">lsblk</span><br><span class="line"><span class="comment"># åº”è¯¥çœ‹åˆ° sda / sda1 ç­‰è®¾å¤‡</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹ç¡¬ç›˜è¯¦ç»†ä¿¡æ¯</span></span><br><span class="line"><span class="built_in">sudo</span> fdisk -l /dev/sda</span><br></pre></td></tr></table></figure>
<h4 id="42-åˆ›å»ºæŒ‚è½½ç‚¹"><a class="markdownIt-Anchor" href="#42-åˆ›å»ºæŒ‚è½½ç‚¹"></a> 4.2 åˆ›å»ºæŒ‚è½½ç‚¹</h4>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºæŒ‚è½½ç›®å½•</span></span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">mkdir</span> -p /mnt/nas</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹æ–‡ä»¶ç³»ç»Ÿç±»å‹</span></span><br><span class="line"><span class="built_in">sudo</span> blkid /dev/sda1</span><br></pre></td></tr></table></figure>
<h4 id="43-æŒ‚è½½ç¡¬ç›˜"><a class="markdownIt-Anchor" href="#43-æŒ‚è½½ç¡¬ç›˜"></a> 4.3 æŒ‚è½½ç¡¬ç›˜</h4>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ ¹æ®æ–‡ä»¶ç³»ç»Ÿç±»å‹é€‰æ‹©æŒ‚è½½å‘½ä»¤</span></span><br><span class="line"><span class="comment"># NTFSæ ¼å¼</span></span><br><span class="line"><span class="built_in">sudo</span> mount -t ntfs-3g /dev/sda1 /mnt/nas</span><br><span class="line"></span><br><span class="line"><span class="comment"># exFATæ ¼å¼</span></span><br><span class="line"><span class="built_in">sudo</span> mount -t exfat /dev/sda1 /mnt/nas</span><br><span class="line"></span><br><span class="line"><span class="comment"># ext4æ ¼å¼</span></span><br><span class="line"><span class="built_in">sudo</span> mount /dev/sda1 /mnt/nas</span><br></pre></td></tr></table></figure>
<h4 id="44-éªŒè¯æŒ‚è½½"><a class="markdownIt-Anchor" href="#44-éªŒè¯æŒ‚è½½"></a> 4.4 éªŒè¯æŒ‚è½½</h4>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹æŒ‚è½½æƒ…å†µ</span></span><br><span class="line"><span class="built_in">df</span> -h /mnt/nas</span><br><span class="line"></span><br><span class="line"><span class="comment"># æµ‹è¯•å†™å…¥æƒé™</span></span><br><span class="line"><span class="built_in">touch</span> /mnt/nas/test.txt</span><br><span class="line"><span class="built_in">ls</span> -la /mnt/nas/</span><br></pre></td></tr></table></figure>
<h3 id="ç¬¬äº”é˜¶æ®µè‡ªåŠ¨åŒ–è„šæœ¬"><a class="markdownIt-Anchor" href="#ç¬¬äº”é˜¶æ®µè‡ªåŠ¨åŒ–è„šæœ¬"></a> ç¬¬äº”é˜¶æ®µï¼šè‡ªåŠ¨åŒ–è„šæœ¬</h3>
<h4 id="51-åˆ›å»ºusbæ¨¡å¼åˆ‡æ¢è„šæœ¬"><a class="markdownIt-Anchor" href="#51-åˆ›å»ºusbæ¨¡å¼åˆ‡æ¢è„šæœ¬"></a> 5.1 åˆ›å»ºUSBæ¨¡å¼åˆ‡æ¢è„šæœ¬</h4>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> nano /usr/local/bin/usb-switch</span><br></pre></td></tr></table></figure>
<p>è„šæœ¬å†…å®¹ï¼ˆå®Œæ•´ç‰ˆè§é™„å½•ï¼‰ï¼š</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é…ç½®</span></span><br><span class="line">MOUNT_POINT=<span class="string">&quot;/mnt/nas&quot;</span></span><br><span class="line">USB_ROLE_FILE=<span class="string">&quot;/sys/kernel/debug/usb/ci_hdrc.0/role&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ‡æ¢åˆ°hostæ¨¡å¼</span></span><br><span class="line"><span class="function"><span class="title">switch_to_host</span></span>() &#123;</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;host&quot;</span> &gt; <span class="string">&quot;<span class="variable">$USB_ROLE_FILE</span>&quot;</span></span><br><span class="line">    <span class="built_in">sleep</span> 3</span><br><span class="line">    modprobe usb-storage</span><br><span class="line">    <span class="comment"># æ‰«æå¹¶æŒ‚è½½ç¡¬ç›˜...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ‡æ¢åˆ°gadgetæ¨¡å¼</span></span><br><span class="line"><span class="function"><span class="title">switch_to_gadget</span></span>() &#123;</span><br><span class="line">    umount <span class="string">&quot;<span class="variable">$MOUNT_POINT</span>&quot;</span> 2&gt;/dev/null</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;gadget&quot;</span> &gt; <span class="string">&quot;<span class="variable">$USB_ROLE_FILE</span>&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ ¹æ®å‚æ•°æ‰§è¡Œ</span></span><br><span class="line"><span class="keyword">case</span> <span class="string">&quot;<span class="variable">$1</span>&quot;</span> <span class="keyword">in</span></span><br><span class="line">    host) switch_to_host ;;</span><br><span class="line">    gadget) switch_to_gadget ;;</span><br><span class="line">    status) show_status ;;</span><br><span class="line">    mount) mount_hdd ;;</span><br><span class="line">    umount) umount_hdd ;;</span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure>
<h4 id="52-è®¾ç½®æ‰§è¡Œæƒé™"><a class="markdownIt-Anchor" href="#52-è®¾ç½®æ‰§è¡Œæƒé™"></a> 5.2 è®¾ç½®æ‰§è¡Œæƒé™</h4>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> <span class="built_in">chmod</span> +x /usr/local/bin/usb-switch</span><br></pre></td></tr></table></figure>
<h3 id="ç¬¬å…­é˜¶æ®µè®¾ç½®å¼€æœºè‡ªåŠ¨æŒ‚è½½"><a class="markdownIt-Anchor" href="#ç¬¬å…­é˜¶æ®µè®¾ç½®å¼€æœºè‡ªåŠ¨æŒ‚è½½"></a> ç¬¬å…­é˜¶æ®µï¼šè®¾ç½®å¼€æœºè‡ªåŠ¨æŒ‚è½½</h3>
<h4 id="61-è·å–ç¡¬ç›˜uuid"><a class="markdownIt-Anchor" href="#61-è·å–ç¡¬ç›˜uuid"></a> 6.1 è·å–ç¡¬ç›˜UUID</h4>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">UUID=$(<span class="built_in">sudo</span> blkid -s UUID -o value /dev/sda1)</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$UUID</span></span><br></pre></td></tr></table></figure>
<h4 id="62-æ·»åŠ åˆ°fstab"><a class="markdownIt-Anchor" href="#62-æ·»åŠ åˆ°fstab"></a> 6.2 æ·»åŠ åˆ°fstab</h4>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¤‡ä»½åŸé…ç½®</span></span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">cp</span> /etc/fstab /etc/fstab.bak</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ è‡ªåŠ¨æŒ‚è½½</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;UUID=<span class="variable">$UUID</span> /mnt/nas ntfs-3g defaults,nofail,uid=1000,gid=1000,umask=0002 0 2&quot;</span> | <span class="built_in">sudo</span> <span class="built_in">tee</span> -a /etc/fstab</span><br><span class="line"></span><br><span class="line"><span class="comment"># æµ‹è¯•é…ç½®</span></span><br><span class="line"><span class="built_in">sudo</span> mount -a</span><br></pre></td></tr></table></figure>
<h2 id="å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ"><a class="markdownIt-Anchor" href="#å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ"></a> â“ å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h2>
<h3 id="q1-åˆ‡æ¢æ¨¡å¼åç¡¬ç›˜ä¸å‡ºç°"><a class="markdownIt-Anchor" href="#q1-åˆ‡æ¢æ¨¡å¼åç¡¬ç›˜ä¸å‡ºç°"></a> Q1: åˆ‡æ¢æ¨¡å¼åç¡¬ç›˜ä¸å‡ºç°</h3>
<p><strong>å¯èƒ½åŸå› </strong>ï¼šå­˜å‚¨é©±åŠ¨æœªåŠ è½½</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ‰‹åŠ¨åŠ è½½é©±åŠ¨</span></span><br><span class="line"><span class="built_in">sudo</span> modprobe usb-storage</span><br><span class="line"><span class="built_in">sudo</span> modprobe uas</span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡æ–°æ‰«æ</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;- - -&quot;</span> | <span class="built_in">sudo</span> <span class="built_in">tee</span> /sys/class/scsi_host/host*/scan</span><br></pre></td></tr></table></figure>
<h3 id="q2-åˆ‡æ¢å›gadgetæ¨¡å¼åç¡¬ç›˜è¿˜åœ¨è½¬"><a class="markdownIt-Anchor" href="#q2-åˆ‡æ¢å›gadgetæ¨¡å¼åç¡¬ç›˜è¿˜åœ¨è½¬"></a> Q2: åˆ‡æ¢å›gadgetæ¨¡å¼åï¼Œç¡¬ç›˜è¿˜åœ¨è½¬</h3>
<p><strong>è§£é‡Š</strong>ï¼šç¡¬ç›˜ç›’ç‹¬ç«‹ä¾›ç”µï¼ŒUSBåªä¼ è¾“æ•°æ®ï¼Œä¸å½±å“ç”µæºã€‚è¿™æ˜¯<strong>æ­£å¸¸ç°è±¡</strong>ï¼Œä¸å½±å“ä½¿ç”¨ã€‚</p>
<h3 id="q3-æŒ‚è½½æ—¶æç¤º-wrong-fs-type"><a class="markdownIt-Anchor" href="#q3-æŒ‚è½½æ—¶æç¤º-wrong-fs-type"></a> Q3: æŒ‚è½½æ—¶æç¤º â€œwrong fs typeâ€</h3>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šå®‰è£…å¯¹åº”æ–‡ä»¶ç³»ç»Ÿæ”¯æŒ</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># NTFS</span></span><br><span class="line"><span class="built_in">sudo</span> apt install ntfs-3g</span><br><span class="line"></span><br><span class="line"><span class="comment"># exFAT</span></span><br><span class="line"><span class="built_in">sudo</span> apt install exfat-fuse exfat-utils</span><br></pre></td></tr></table></figure>
<h3 id="q4-æƒé™ä¸è¶³æ— æ³•å†™å…¥"><a class="markdownIt-Anchor" href="#q4-æƒé™ä¸è¶³æ— æ³•å†™å…¥"></a> Q4: æƒé™ä¸è¶³æ— æ³•å†™å…¥</h3>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è®¾ç½®æŒ‚è½½ç‚¹æƒé™</span></span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">chmod</span> 777 /mnt/nas</span><br><span class="line"></span><br><span class="line"><span class="comment"># æˆ–è€…æ”¹å˜æ‰€æœ‰è€…</span></span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">chown</span> -R ä½ çš„ç”¨æˆ·å:ä½ çš„ç»„å /mnt/nas</span><br></pre></td></tr></table></figure>
<h3 id="q5-å¦‚ä½•åˆ¤æ–­ç³»ç»Ÿæ¶æ„"><a class="markdownIt-Anchor" href="#q5-å¦‚ä½•åˆ¤æ–­ç³»ç»Ÿæ¶æ„"></a> Q5: å¦‚ä½•åˆ¤æ–­ç³»ç»Ÿæ¶æ„ï¼Ÿ</h3>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">uname</span> -m</span><br><span class="line"><span class="comment"># x86_64 = 64ä½PC</span></span><br><span class="line"><span class="comment"># armv7l = 32ä½ARM</span></span><br><span class="line"><span class="comment"># aarch64 = 64ä½ARM</span></span><br></pre></td></tr></table></figure>
<h2 id="å¸¸ç”¨å‘½ä»¤ä½¿ç”¨æŒ‡å—"><a class="markdownIt-Anchor" href="#å¸¸ç”¨å‘½ä»¤ä½¿ç”¨æŒ‡å—"></a> ğŸ“± å¸¸ç”¨å‘½ä»¤ä½¿ç”¨æŒ‡å—</h2>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹å½“å‰çŠ¶æ€</span></span><br><span class="line"><span class="built_in">sudo</span> usb-switch status</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ‡æ¢åˆ°hostæ¨¡å¼ï¼ˆæ¥ç¡¬ç›˜ï¼‰ï¼ˆè‡ªåŠ¨æŒ‚è½½ç¡¬ç›˜ï¼‰</span></span><br><span class="line"><span class="built_in">sudo</span> usb-switch host</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ‡æ¢åˆ°gadgetæ¨¡å¼ï¼ˆæ¥ç”µè„‘ï¼‰ï¼ˆè‡ªåŠ¨å¸è½½ç¡¬ç›˜ï¼‰</span></span><br><span class="line"><span class="built_in">sudo</span> usb-switch gadget</span><br><span class="line"></span><br><span class="line"><span class="comment"># åªæŒ‚è½½ç¡¬ç›˜ï¼ˆä¸åˆ‡æ¢æ¨¡å¼ï¼‰</span></span><br><span class="line"><span class="built_in">sudo</span> usb-switch mount</span><br><span class="line"></span><br><span class="line"><span class="comment"># åªå¸è½½ç¡¬ç›˜ï¼ˆä¸åˆ‡æ¢æ¨¡å¼ï¼‰</span></span><br><span class="line"><span class="built_in">sudo</span> usb-switch umount</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰‹åŠ¨æŸ¥çœ‹ç¡¬ç›˜</span></span><br><span class="line">lsblk</span><br><span class="line"><span class="built_in">df</span> -h /mnt/nas</span><br></pre></td></tr></table></figure>
<h3 id="ä½¿ç”¨åœºæ™¯ç¤ºä¾‹"><a class="markdownIt-Anchor" href="#ä½¿ç”¨åœºæ™¯ç¤ºä¾‹"></a> ä½¿ç”¨åœºæ™¯ç¤ºä¾‹</h3>
<p><strong>åœºæ™¯1ï¼šåšNAS/æ‰“å°æœåŠ¡å™¨</strong></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> usb-switch host</span><br><span class="line"><span class="comment"># ç¡¬ç›˜è‡ªåŠ¨æŒ‚è½½åˆ° /mnt/nas</span></span><br></pre></td></tr></table></figure>
<p><strong>åœºæ™¯2ï¼šè¿æ¥ç”µè„‘åˆ·æœº/è°ƒè¯•</strong></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> usb-switch gadget</span><br><span class="line"><span class="comment"># ç”¨äºè¿æ¥ç”µè„‘adbè°ƒè¯•</span></span><br></pre></td></tr></table></figure>
<p><strong>åœºæ™¯3ï¼šæŸ¥çœ‹ç¡¬ç›˜ä½¿ç”¨æƒ…å†µ</strong></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> usb-switch status</span><br><span class="line"><span class="comment"># æ˜¾ç¤ºæ¨¡å¼ã€ç¡¬ç›˜ä¿¡æ¯ã€æŒ‚è½½çŠ¶æ€</span></span><br></pre></td></tr></table></figure>
<h2 id="æœ€ç»ˆæˆæœ"><a class="markdownIt-Anchor" href="#æœ€ç»ˆæˆæœ"></a> ğŸ‰ æœ€ç»ˆæˆæœ</h2>
<p>æˆåŠŸåœ¨OpenStickä¸Šå®ç°ï¼š</p>
<ul>
<li>âœ… USBæ¨¡å¼è‡ªç”±åˆ‡æ¢ï¼ˆhost/gadgetï¼‰</li>
<li>âœ… è‡ªåŠ¨è¯†åˆ«465GBå¤–ç½®ç¡¬ç›˜</li>
<li>âœ… å¼€æœºè‡ªåŠ¨æŒ‚è½½åˆ° <code>/mnt/nas</code></li>
<li>âœ… å®Œå–„çš„å‘½ä»¤è¡Œç®¡ç†å·¥å…·</li>
</ul>
<p><strong>ç¡¬ç›˜ä¿¡æ¯ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">è®¾å¤‡ï¼š/dev/sda1</span><br><span class="line">å®¹é‡ï¼š465.8 GB</span><br><span class="line">æ ¼å¼ï¼šNTFS</span><br><span class="line">æŒ‚è½½ç‚¹ï¼š/mnt/nas</span><br><span class="line">å¯ç”¨ç©ºé—´ï¼š65 GB</span><br></pre></td></tr></table></figure>
<h2 id="å‚è€ƒèµ„æ–™"><a class="markdownIt-Anchor" href="#å‚è€ƒèµ„æ–™"></a> ğŸ“š å‚è€ƒèµ„æ–™</h2>
<ul>
<li><a target="_blank" rel="noopener" href="https://chat.deepseek.com/">DeepSeek AIåŠ©æ‰‹</a> - å…¨ç¨‹æŠ€æœ¯æŒ‡å¯¼</li>
<li><a target="_blank" rel="noopener" href="https://www.kernel.org/doc/html/latest/usb/gadget_configfs.html">Linux USB Gadget APIæ–‡æ¡£</a></li>
<li><a target="_blank" rel="noopener" href="https://wiki.archlinux.org/title/USB_storage">Arch Linux Wiki: USB storage</a></li>
</ul>
<hr />
<h2 id="é™„å½•å®Œæ•´è„šæœ¬"><a class="markdownIt-Anchor" href="#é™„å½•å®Œæ•´è„šæœ¬"></a> ğŸ“‹ é™„å½•ï¼šå®Œæ•´è„šæœ¬</h2>
<h3 id="usb-switch-å®Œæ•´è„šæœ¬"><a class="markdownIt-Anchor" href="#usb-switch-å®Œæ•´è„šæœ¬"></a> usb-switch å®Œæ•´è„šæœ¬</h3>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># USBæ¨¡å¼åˆ‡æ¢è„šæœ¬ - æ”¯æŒhost/gadgetåˆ‡æ¢å¹¶è‡ªåŠ¨æŒ‚è½½/å¸è½½ç¡¬ç›˜</span></span><br><span class="line"><span class="comment"># ä½œè€…: DeepSeek AI</span></span><br><span class="line"><span class="comment"># æ—¥æœŸ: 2026-02-24</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é¢œè‰²å®šä¹‰</span></span><br><span class="line">RED=<span class="string">&#x27;\033[0;31m&#x27;</span></span><br><span class="line">GREEN=<span class="string">&#x27;\033[0;32m&#x27;</span></span><br><span class="line">YELLOW=<span class="string">&#x27;\033[1;33m&#x27;</span></span><br><span class="line">BLUE=<span class="string">&#x27;\033[0;34m&#x27;</span></span><br><span class="line">NC=<span class="string">&#x27;\033[0m&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é…ç½®</span></span><br><span class="line">MOUNT_POINT=<span class="string">&quot;/mnt/nas&quot;</span></span><br><span class="line">USB_ROLE_FILE=<span class="string">&quot;/sys/kernel/debug/usb/ci_hdrc.0/role&quot;</span></span><br><span class="line">LOG_FILE=<span class="string">&quot;/var/log/usb_switch.log&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¾ç¤ºä½¿ç”¨æ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="title">show_usage</span></span>() &#123;</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;ç”¨æ³•: <span class="variable">$0</span> [host|gadget|status|mount|umount]&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;  host    - åˆ‡æ¢åˆ°ä¸»æœºæ¨¡å¼ï¼ˆè¿æ¥ç¡¬ç›˜ï¼‰å¹¶è‡ªåŠ¨æŒ‚è½½&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;  gadget  - åˆ‡æ¢åˆ°è®¾å¤‡æ¨¡å¼ï¼ˆè¿æ¥ç”µè„‘ï¼‰å¹¶è‡ªåŠ¨å¸è½½&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;  status  - æ˜¾ç¤ºå½“å‰çŠ¶æ€&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;  mount   - åªæŒ‚è½½ç¡¬ç›˜ï¼ˆä¸åˆ‡æ¢æ¨¡å¼ï¼‰&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;  umount  - åªå¸è½½ç¡¬ç›˜ï¼ˆä¸åˆ‡æ¢æ¨¡å¼ï¼‰&quot;</span></span><br><span class="line">    <span class="built_in">exit</span> 1</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ—¥å¿—å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="title">log</span></span>() &#123;</span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;<span class="subst">$(date &#x27;+%Y-%m-%d %H:%M:%S&#x27;)</span> - <span class="variable">$1</span>&quot;</span> | <span class="built_in">tee</span> -a <span class="string">&quot;<span class="variable">$LOG_FILE</span>&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ£€æŸ¥æ˜¯å¦root</span></span><br><span class="line"><span class="function"><span class="title">check_root</span></span>() &#123;</span><br><span class="line">    <span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$EUID</span>&quot;</span> -ne 0 ]; <span class="keyword">then</span> </span><br><span class="line">        <span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;RED&#125;</span>è¯·ç”¨ sudo è¿è¡Œæ­¤è„šæœ¬<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">        <span class="built_in">exit</span> 1</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–å½“å‰æ¨¡å¼</span></span><br><span class="line"><span class="function"><span class="title">get_current_mode</span></span>() &#123;</span><br><span class="line">    <span class="keyword">if</span> [ -f <span class="string">&quot;<span class="variable">$USB_ROLE_FILE</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">cat</span> <span class="string">&quot;<span class="variable">$USB_ROLE_FILE</span>&quot;</span> 2&gt;/dev/null</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;unknown&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ£€æŸ¥ç¡¬ç›˜æ˜¯å¦å·²æŒ‚è½½</span></span><br><span class="line"><span class="function"><span class="title">is_mounted</span></span>() &#123;</span><br><span class="line">    mount | grep -q <span class="string">&quot; <span class="variable">$MOUNT_POINT</span> &quot;</span></span><br><span class="line">    <span class="built_in">return</span> $?</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥æ‰¾ç¡¬ç›˜è®¾å¤‡</span></span><br><span class="line"><span class="function"><span class="title">find_hdd</span></span>() &#123;</span><br><span class="line">    <span class="comment"># å…ˆæ‰«æ</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;- - -&quot;</span> &gt; /sys/class/scsi_host/host0/scan 2&gt;/dev/null</span><br><span class="line">    <span class="built_in">sleep</span> 1</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># æŸ¥æ‰¾åˆ†åŒº</span></span><br><span class="line">    <span class="keyword">for</span> dev <span class="keyword">in</span> /dev/sd[a-z][0-9]; <span class="keyword">do</span></span><br><span class="line">        <span class="keyword">if</span> [ -e <span class="string">&quot;<span class="variable">$dev</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">            <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$dev</span>&quot;</span></span><br><span class="line">            <span class="built_in">return</span> 0</span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># æŸ¥æ‰¾ç£ç›˜</span></span><br><span class="line">    <span class="keyword">for</span> dev <span class="keyword">in</span> /dev/sd[a-z]; <span class="keyword">do</span></span><br><span class="line">        <span class="keyword">if</span> [ -e <span class="string">&quot;<span class="variable">$dev</span>&quot;</span> ] &amp;&amp; [ <span class="string">&quot;<span class="variable">$dev</span>&quot;</span> != <span class="string">&quot;/dev/sda&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">            <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$dev</span>&quot;</span></span><br><span class="line">            <span class="built_in">return</span> 0</span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŒ‚è½½ç¡¬ç›˜</span></span><br><span class="line"><span class="function"><span class="title">mount_hdd</span></span>() &#123;</span><br><span class="line">    <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;YELLOW&#125;</span>å°è¯•æŒ‚è½½ç¡¬ç›˜...<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">mkdir</span> -p <span class="string">&quot;<span class="variable">$MOUNT_POINT</span>&quot;</span></span><br><span class="line">    </span><br><span class="line">    HDD_DEV=$(find_hdd)</span><br><span class="line">    <span class="keyword">if</span> [ -z <span class="string">&quot;<span class="variable">$HDD_DEV</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;RED&#125;</span>æœªæ‰¾åˆ°ç¡¬ç›˜è®¾å¤‡<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">        <span class="built_in">return</span> 1</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">log</span> <span class="string">&quot;æ‰¾åˆ°ç¡¬ç›˜è®¾å¤‡: <span class="variable">$HDD_DEV</span>&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> [ ! -e <span class="string">&quot;<span class="variable">$HDD_DEV</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;RED&#125;</span>è®¾å¤‡ <span class="variable">$HDD_DEV</span> ä¸å­˜åœ¨<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">        <span class="built_in">return</span> 1</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    </span><br><span class="line">    FSTYPE=$(blkid -s TYPE -o value <span class="string">&quot;<span class="variable">$HDD_DEV</span>&quot;</span> 2&gt;/dev/null)</span><br><span class="line">    <span class="built_in">log</span> <span class="string">&quot;æ–‡ä»¶ç³»ç»Ÿç±»å‹: <span class="variable">$&#123;FSTYPE:-æœªçŸ¥&#125;</span>&quot;</span></span><br><span class="line">    </span><br><span class="line">    mount_success=0</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> [ -n <span class="string">&quot;<span class="variable">$FSTYPE</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;<span class="variable">$FSTYPE</span>&quot;</span> <span class="keyword">in</span></span><br><span class="line">            ntfs|NTFS)</span><br><span class="line">                mount -t ntfs-3g <span class="string">&quot;<span class="variable">$HDD_DEV</span>&quot;</span> <span class="string">&quot;<span class="variable">$MOUNT_POINT</span>&quot;</span> 2&gt;/tmp/mount_error &amp;&amp; mount_success=1</span><br><span class="line">                ;;</span><br><span class="line">            exfat|EXFAT)</span><br><span class="line">                mount -t exfat <span class="string">&quot;<span class="variable">$HDD_DEV</span>&quot;</span> <span class="string">&quot;<span class="variable">$MOUNT_POINT</span>&quot;</span> 2&gt;/tmp/mount_error &amp;&amp; mount_success=1</span><br><span class="line">                ;;</span><br><span class="line">            ext4|ext3|ext2)</span><br><span class="line">                mount <span class="string">&quot;<span class="variable">$HDD_DEV</span>&quot;</span> <span class="string">&quot;<span class="variable">$MOUNT_POINT</span>&quot;</span> 2&gt;/tmp/mount_error &amp;&amp; mount_success=1</span><br><span class="line">                ;;</span><br><span class="line">            *)</span><br><span class="line">                mount <span class="string">&quot;<span class="variable">$HDD_DEV</span>&quot;</span> <span class="string">&quot;<span class="variable">$MOUNT_POINT</span>&quot;</span> 2&gt;/tmp/mount_error &amp;&amp; mount_success=1</span><br><span class="line">                ;;</span><br><span class="line">        <span class="keyword">esac</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$mount_success</span> -eq 0 ]; <span class="keyword">then</span></span><br><span class="line">        mount -t ntfs-3g <span class="string">&quot;<span class="variable">$HDD_DEV</span>&quot;</span> <span class="string">&quot;<span class="variable">$MOUNT_POINT</span>&quot;</span> 2&gt;/tmp/mount_error &amp;&amp; mount_success=1</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$mount_success</span> -eq 1 ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;GREEN&#125;</span>ç¡¬ç›˜æŒ‚è½½æˆåŠŸåˆ° $MOUNT_POINT<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">        <span class="built_in">chmod</span> 777 <span class="string">&quot;<span class="variable">$MOUNT_POINT</span>&quot;</span></span><br><span class="line">        <span class="built_in">df</span> -h <span class="string">&quot;<span class="variable">$MOUNT_POINT</span>&quot;</span> | <span class="built_in">tail</span> -1</span><br><span class="line">        <span class="built_in">return</span> 0</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;RED&#125;</span>ç¡¬ç›˜æŒ‚è½½å¤±è´¥<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">        [ -f /tmp/mount_error ] &amp;&amp; <span class="built_in">log</span> <span class="string">&quot;é”™è¯¯: <span class="subst">$(cat /tmp/mount_error)</span>&quot;</span></span><br><span class="line">        <span class="built_in">return</span> 1</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¸è½½ç¡¬ç›˜</span></span><br><span class="line"><span class="function"><span class="title">umount_hdd</span></span>() &#123;</span><br><span class="line">    <span class="keyword">if</span> is_mounted; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;YELLOW&#125;</span>å¸è½½ç¡¬ç›˜ <span class="variable">$MOUNT_POINT</span>...<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">        umount <span class="string">&quot;<span class="variable">$MOUNT_POINT</span>&quot;</span> 2&gt;/tmp/umount_error</span><br><span class="line">        <span class="keyword">if</span> [ $? -eq 0 ]; <span class="keyword">then</span></span><br><span class="line">            <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;GREEN&#125;</span>ç¡¬ç›˜å¸è½½æˆåŠŸ<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;RED&#125;</span>ç¡¬ç›˜å¸è½½å¤±è´¥ï¼Œå°è¯•å¼ºåˆ¶å¸è½½...<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">            umount -l <span class="string">&quot;<span class="variable">$MOUNT_POINT</span>&quot;</span> &amp;&amp; <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;GREEN&#125;</span>å¼ºåˆ¶å¸è½½æˆåŠŸ<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;BLUE&#125;</span>ç¡¬ç›˜æœªæŒ‚è½½<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ‡æ¢åˆ°hostæ¨¡å¼</span></span><br><span class="line"><span class="function"><span class="title">switch_to_host</span></span>() &#123;</span><br><span class="line">    <span class="built_in">local</span> current=$(get_current_mode)</span><br><span class="line">    <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;BLUE&#125;</span>å½“å‰æ¨¡å¼: <span class="variable">$current</span> -&gt; ç›®æ ‡æ¨¡å¼: host<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$current</span>&quot;</span> = <span class="string">&quot;host&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;YELLOW&#125;</span>å·²ç»æ˜¯hostæ¨¡å¼<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        modprobe -r g_serial g_ether g_mass_storage 2&gt;/dev/null</span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;host&quot;</span> &gt; <span class="string">&quot;<span class="variable">$USB_ROLE_FILE</span>&quot;</span></span><br><span class="line">        <span class="built_in">sleep</span> 3</span><br><span class="line">        modprobe usb-storage 2&gt;/dev/null</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> host <span class="keyword">in</span> /sys/class/scsi_host/host*; <span class="keyword">do</span></span><br><span class="line">            [ -f <span class="string">&quot;<span class="variable">$host</span>/scan&quot;</span> ] &amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;- - -&quot;</span> &gt; <span class="string">&quot;<span class="variable">$host</span>/scan&quot;</span> 2&gt;/dev/null</span><br><span class="line">        <span class="keyword">done</span></span><br><span class="line">        </span><br><span class="line">        <span class="built_in">sleep</span> 2</span><br><span class="line">        <span class="built_in">local</span> new=$(get_current_mode)</span><br><span class="line">        [ <span class="string">&quot;<span class="variable">$new</span>&quot;</span> = <span class="string">&quot;host&quot;</span> ] &amp;&amp; <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;GREEN&#125;</span>åˆ‡æ¢åˆ°hostæ¨¡å¼æˆåŠŸ<span class="variable">$&#123;NC&#125;</span>&quot;</span> || <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;RED&#125;</span>åˆ‡æ¢å¤±è´¥<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    </span><br><span class="line">    mount_hdd</span><br><span class="line">    show_status</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ‡æ¢åˆ°gadgetæ¨¡å¼</span></span><br><span class="line"><span class="function"><span class="title">switch_to_gadget</span></span>() &#123;</span><br><span class="line">    <span class="built_in">local</span> current=$(get_current_mode)</span><br><span class="line">    <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;BLUE&#125;</span>å½“å‰æ¨¡å¼: <span class="variable">$current</span> -&gt; ç›®æ ‡æ¨¡å¼: gadget<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">    </span><br><span class="line">    umount_hdd</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$current</span>&quot;</span> = <span class="string">&quot;gadget&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;YELLOW&#125;</span>å·²ç»æ˜¯gadgetæ¨¡å¼<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        modprobe -r usb-storage 2&gt;/dev/null</span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;gadget&quot;</span> &gt; <span class="string">&quot;<span class="variable">$USB_ROLE_FILE</span>&quot;</span></span><br><span class="line">        <span class="built_in">sleep</span> 2</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">local</span> new=$(get_current_mode)</span><br><span class="line">        [ <span class="string">&quot;<span class="variable">$new</span>&quot;</span> = <span class="string">&quot;gadget&quot;</span> ] &amp;&amp; <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;GREEN&#125;</span>åˆ‡æ¢åˆ°gadgetæ¨¡å¼æˆåŠŸ<span class="variable">$&#123;NC&#125;</span>&quot;</span> || <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;RED&#125;</span>åˆ‡æ¢å¤±è´¥<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    </span><br><span class="line">    show_status</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># åªæŒ‚è½½ç¡¬ç›˜</span></span><br><span class="line"><span class="function"><span class="title">do_mount</span></span>() &#123;</span><br><span class="line">    <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;BLUE&#125;</span>æ‰‹åŠ¨æŒ‚è½½ç¡¬ç›˜...<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">    mount_hdd</span><br><span class="line">    show_status</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># åªå¸è½½ç¡¬ç›˜</span></span><br><span class="line"><span class="function"><span class="title">do_umount</span></span>() &#123;</span><br><span class="line">    <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;BLUE&#125;</span>æ‰‹åŠ¨å¸è½½ç¡¬ç›˜...<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">    umount_hdd</span><br><span class="line">    show_status</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¾ç¤ºçŠ¶æ€</span></span><br><span class="line"><span class="function"><span class="title">show_status</span></span>() &#123;</span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;\n<span class="variable">$&#123;BLUE&#125;</span>=== USB çŠ¶æ€ ===<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">local</span> role=$(get_current_mode)</span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;USB æ¨¡å¼: <span class="variable">$&#123;GREEN&#125;</span>$role<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;\n<span class="variable">$&#123;BLUE&#125;</span>ç¡¬ç›˜è®¾å¤‡:<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">    lsblk -o NAME,SIZE,MODEL | grep -E <span class="string">&quot;sd[a-z]&quot;</span> | <span class="built_in">head</span> -5 || <span class="built_in">echo</span> <span class="string">&quot;æœªæ‰¾åˆ°ç¡¬ç›˜&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> is_mounted; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> -e <span class="string">&quot;\n<span class="variable">$&#123;GREEN&#125;</span>ç¡¬ç›˜å·²æŒ‚è½½åˆ° $MOUNT_POINT<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">        <span class="built_in">df</span> -h <span class="string">&quot;<span class="variable">$MOUNT_POINT</span>&quot;</span> | <span class="built_in">tail</span> -1</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> -e <span class="string">&quot;\n<span class="variable">$&#123;YELLOW&#125;</span>ç¡¬ç›˜æœªæŒ‚è½½<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸»å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="title">main</span></span>() &#123;</span><br><span class="line">    check_root</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;<span class="variable">$1</span>&quot;</span> <span class="keyword">in</span></span><br><span class="line">        host) switch_to_host ;;</span><br><span class="line">        gadget) switch_to_gadget ;;</span><br><span class="line">        status) show_status ;;</span><br><span class="line">        mount) do_mount ;;</span><br><span class="line">        umount) do_umount ;;</span><br><span class="line">        *) show_usage ;;</span><br><span class="line">    <span class="keyword">esac</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">main <span class="string">&quot;<span class="variable">$@</span>&quot;</span></span><br></pre></td></tr></table></figure>
<hr />
<blockquote>
<p>ğŸ’¡ <strong>ç‰¹åˆ«æ„Ÿè°¢</strong>ï¼šæœ¬æ–‡æ¡£çš„è§£å†³è¿‡ç¨‹å¾—åˆ°äº†DeepSeek AIçš„å…¨ç¨‹æŠ€æœ¯æ”¯æŒã€‚DeepSeekæ˜¯ä¸€æ¬¾å…è´¹çš„AIåŠ©æ‰‹ï¼Œèƒ½å¤Ÿå¸®åŠ©è§£å†³å„ç§æŠ€æœ¯éš¾é¢˜ã€‚</p>
<p><em>æœ€åæ›´æ–°ï¼š2026å¹´2æœˆ24æ—¥</em></p>
</blockquote>

      
    </div>
    <div class="article-footer">
      <blockquote class="mt-2x">
  <ul class="post-copyright list-unstyled">
    <!-- 
    <li class="post-copyright-link hidden-xs">
      <strong>æœ¬æ–‡é“¾æ¥ï¼š</strong>
      <a href="" title="" target="_blank" rel="external"></a>
    </li>
     -->
    <li class="post-copyright-license">
      <strong>ç‰ˆæƒå£°æ˜ï¼š </strong> æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external">CC BY 4.0 CNåè®®</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼
    </li>
  </ul>
</blockquote>


<div class="panel panel-default panel-badger">
  <div class="panel-body">
    <figure class="media">
      <div class="media-left">
        <a href="https://github.com/IMOUYO" target="_blank" class="img-burn thumb-sm visible-lg">
          <img src="/images/avatar.gif" class="img-rounded w-full" alt="">
        </a>
      </div>
      <div class="media-body">
        <h3 class="media-heading"><a href="https://github.com/IMOUYO" target="_blank"><span class="text-dark">makabaka</span><small class="ml-1x"></small></a></h3>
        <div></div>
      </div>
    </figure>
  </div>
</div>


    </div>
  </article>
  
    
  <section id="comments">
  	
           
    
  </section>


  
</div>

  <nav class="bar bar-footer clearfix" data-stick-bottom>
  <div class="bar-inner">
  
  <ul class="pager pull-left">
    
    <li class="prev">
      <a href="/2026/02/25/OpenStick%E5%AE%89%E8%A3%85Jellyfin/" title="OpenStickå®‰è£…Jellyfin"><i class="icon icon-angle-left" aria-hidden="true"></i><span>&nbsp;&nbsp;Newer</span></a>
    </li>
    
    
    <li class="next">
      <a href="/2026/02/22/%E9%9A%8F%E8%BA%ABwifi%E5%88%B7linux/" title="éšèº«wifiåˆ·linux"><span>Older&nbsp;&nbsp;</span><i class="icon icon-angle-right" aria-hidden="true"></i></a>
    </li>
    
    
  </ul>
  
  
  
  <div class="bar-right">
    
    <div class="share-component" data-sites="weibo,qq,wechat,facebook,twitter" data-mobile-sites="weibo,qq,qzone"></div>
    
  </div>
  </div>
</nav>
  


</main>
<!-- æµ‹è¯•æ ‡è®°ï¼šçœ‹è¿™ä¸ªä¼šä¸ä¼šå‡ºç°åœ¨ç”Ÿæˆçš„HTMLä¸­ -->
<!-- PARTIAL_IMAGE_FIXER_START -->
<script>
    (function() {
  // é…ç½®é€‰é¡¹
  const config = {
    // éœ€è¦æ›¿æ¢çš„è·¯å¾„è§„åˆ™
    rules: [
      {
        pattern: '^OpenStick/ARMè®¾å¤‡å¤–æ¥ç¡¬ç›˜ç›’å®Œå…¨æ”»ç•¥/',           // åŒ¹é…ä»¥ /images/ å¼€å¤´çš„è·¯å¾„
        replace: ''       // æ›¿æ¢ä¸º /assets/images/
      },
      {
        pattern: '^OpenStick%2FARM%E8%AE%BE%E5%A4%87%E5%A4%96%E6%8E%A5%E7%A1%AC%E7%9B%98%E7%9B%92%E5%AE%8C%E5%85%A8%E6%94%BB%E7%95%A5/',   //è§£å†³ä¸­æ–‡é—®é¢˜
        replace: ''
      }
    ],
    // æ’é™¤å¤–éƒ¨é“¾æ¥
    excludeExternal: true,
    // æ˜¯å¦æ˜¾ç¤ºè°ƒè¯•ä¿¡æ¯
    debug: true
  };
  
  // æ‰§è¡Œä¿®æ”¹
  function fixImagePaths() {
    const images = document.getElementsByTagName('img');
    
    for (let img of images) {
      let src = img.getAttribute('src');
      
      // è·³è¿‡ç©ºå€¼
      if (!src) continue;
      
      // è·³è¿‡å¤–éƒ¨é“¾æ¥ï¼ˆå¦‚æœé…ç½®æ’é™¤ï¼‰
      if (config.excludeExternal && src.match(/^(https?:)?\/\//)) continue;
      
      let originalSrc = src;
      
      // åº”ç”¨æ‰€æœ‰æ›¿æ¢è§„åˆ™
      for (let rule of config.rules) {
        const regex = new RegExp(rule.pattern);
        if (regex.test(src)) {
          src = src.replace(regex, rule.replace);
        }
      }
      
      // å¦‚æœè·¯å¾„æ”¹å˜äº†ï¼Œæ›´æ–°å›¾ç‰‡ src
      if (src !== originalSrc) {
        img.src = src;
        if (config.debug) {
          console.log('âœ… å›¾ç‰‡è·¯å¾„å·²ä¿®æ”¹:', originalSrc, 'â†’', src);
        }
      }
    }
  }
  
  // åœ¨å¤šä¸ªæ—¶æœºæ‰§è¡Œï¼Œç¡®ä¿ä¿®æ”¹ç”Ÿæ•ˆ
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', fixImagePaths);
  } else {
    fixImagePaths();
  }
  
  // å¦‚æœæ˜¯ SPA æˆ–æœ‰åŠ¨æ€åŠ è½½çš„å†…å®¹ï¼Œå¯ä»¥ç›‘å¬ DOM å˜åŒ–
  const observer = new MutationObserver(function(mutations) {
    mutations.forEach(function(mutation) {
      if (mutation.addedNodes.length) {
        fixImagePaths();
      }
    });
  });
  
  observer.observe(document.body, {
    childList: true,
    subtree: true
  });
  
})();
</script>
<!-- PARTIAL_IMAGE_FIXER_END -->
  <footer class="footer" itemscope itemtype="http://schema.org/WPFooter">
	
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/cofess" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
    </ul>

    <div class="copyright">
    	
        <div class="publishby">
        	Theme by <a href="https://github.com/cofess" target="_blank"> cofess </a>base on <a href="https://github.com/cofess/hexo-theme-pure" target="_blank">pure</a>.
        </div>
    </div>
</footer>
  <script src="//cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
<script>
window.jQuery || document.write('<script src="js/jquery.min.js"><\/script>')
</script>

<script src="/js/plugin.min.js"></script>


<script src="/js/application.js"></script>


    <script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>

<script src="/js/insight.js"></script>






   




   
    
  <!-- <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css"> -->
  <script src="//cdn.jsdelivr.net/npm/gitalk@1.6.2/dist/gitalk.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/blueimp-md5@2.10.0/js/md5.min.js"></script>
  <script type="text/javascript">
  var gitalk = new Gitalk({
    clientID: 'Ov23li41op8ra6ULwVKH',
    clientSecret: '8637d8e4da9dee4d4ab44fff1c11f554fe5251f7',
    repo: 'gitalk-comments',
    owner: 'IMOUYO',
    admin: ['IMOUYO'],
    id: md5(location.pathname),
    distractionFreeMode: true,
    language: 'zh-CN',
    enableHotKey: 'true'
  })
  gitalk.render('comments')
  </script>
      







  <script src="/js/toc.js"></script>
</body>
</html>