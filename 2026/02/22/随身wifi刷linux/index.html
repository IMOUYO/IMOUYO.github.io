<!DOCTYPE html>
<html lang=en>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="renderer" content="webkit">
  <meta http-equiv="Cache-Control" content="no-transform" />
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="format-detection" content="telephone=no,email=no,adress=no">
  <!-- Color theme for statusbar -->
  <meta name="theme-color" content="#000000" />
  <!-- å¼ºåˆ¶é¡µé¢åœ¨å½“å‰çª—å£ä»¥ç‹¬ç«‹é¡µé¢æ˜¾ç¤º,é˜²æ­¢åˆ«äººåœ¨æ¡†æ¶é‡Œè°ƒç”¨é¡µé¢ -->
  <meta http-equiv="window-target" content="_top" />
  
  
  <title>éšèº«wifiåˆ·linux | Hexo</title>
  <meta name="description" content="æ¨èé˜…è¯»ï¼š https:&#x2F;&#x2F;blog.iamsjy.com&#x2F;2023&#x2F;12&#x2F;11&#x2F;snapdragon-410-portable-wifi-hotspot-flash-debian-and-optimize&#x2F;#æ‰€éœ€æ–‡ä»¶ï¼ˆä¸»è¦è¿›è¡Œåˆ·æœºæµç¨‹ï¼‰ https:&#x2F;&#x2F;zhuanlan.zhihu.com&#x2F;p&#x2F;659249489ï¼ˆä¸»è¦è¿›è¡Œè§£é™¤BLé”ï¼‰ backupä¸­æ˜¯æ‰€æœ‰åˆ†åŒºçš„å¤‡ä»½ï¼Œä¸éœ€è¦ä¸‹è½½ï¼Œåœ¨è¿‡ç¨‹ä¸­éœ€è¦ä½ è‡ª">
<meta property="og:type" content="article">
<meta property="og:title" content="éšèº«wifiåˆ·linux">
<meta property="og:url" content="https://imouyo.github.io/2026/02/22/%E9%9A%8F%E8%BA%ABwifi%E5%88%B7linux/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="æ¨èé˜…è¯»ï¼š https:&#x2F;&#x2F;blog.iamsjy.com&#x2F;2023&#x2F;12&#x2F;11&#x2F;snapdragon-410-portable-wifi-hotspot-flash-debian-and-optimize&#x2F;#æ‰€éœ€æ–‡ä»¶ï¼ˆä¸»è¦è¿›è¡Œåˆ·æœºæµç¨‹ï¼‰ https:&#x2F;&#x2F;zhuanlan.zhihu.com&#x2F;p&#x2F;659249489ï¼ˆä¸»è¦è¿›è¡Œè§£é™¤BLé”ï¼‰ backupä¸­æ˜¯æ‰€æœ‰åˆ†åŒºçš„å¤‡ä»½ï¼Œä¸éœ€è¦ä¸‹è½½ï¼Œåœ¨è¿‡ç¨‹ä¸­éœ€è¦ä½ è‡ª">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://bucket.lxnchan.cn/posts/ufistick/miko.webp">
<meta property="og:image" content="https://bucket.lxnchan.cn/posts/ufistick/miko-restore.webp">
<meta property="og:image" content="https://bucket.lxnchan.cn/posts/ufistick/qpt.webp">
<meta property="og:image" content="https://imouyo.github.io/2026/02/22/%E9%9A%8F%E8%BA%ABwifi%E5%88%B7linux/%E9%9A%8F%E8%BA%ABwifi%E5%88%B7linux/image-20260223040900115.png">
<meta property="og:image" content="https://imouyo.github.io/2026/02/22/%E9%9A%8F%E8%BA%ABwifi%E5%88%B7linux/%E9%9A%8F%E8%BA%ABwifi%E5%88%B7linux/image-20260223041037126.png">
<meta property="og:image" content="https://imouyo.github.io/2026/02/22/%E9%9A%8F%E8%BA%ABwifi%E5%88%B7linux/%E9%9A%8F%E8%BA%ABwifi%E5%88%B7linux/6576ceae713b7.png">
<meta property="og:image" content="https://imouyo.github.io/2026/02/22/%E9%9A%8F%E8%BA%ABwifi%E5%88%B7linux/%E9%9A%8F%E8%BA%ABwifi%E5%88%B7linux/6576ced636acb.png">
<meta property="og:image" content="https://imouyo.github.io/2026/02/22/%E9%9A%8F%E8%BA%ABwifi%E5%88%B7linux/%E9%9A%8F%E8%BA%ABwifi%E5%88%B7linux/6576cee2bd3a7.png">
<meta property="og:image" content="https://imouyo.github.io/2026/02/22/%E9%9A%8F%E8%BA%ABwifi%E5%88%B7linux/%E9%9A%8F%E8%BA%ABwifi%E5%88%B7linux/6576cf3d95a0f.png">
<meta property="og:image" content="https://imouyo.github.io/2026/02/22/%E9%9A%8F%E8%BA%ABwifi%E5%88%B7linux/%E9%9A%8F%E8%BA%ABwifi%E5%88%B7linux/6576cf5cb34d0.png">
<meta property="og:image" content="https://imouyo.github.io/2026/02/22/%E9%9A%8F%E8%BA%ABwifi%E5%88%B7linux/%E9%9A%8F%E8%BA%ABwifi%E5%88%B7linux/6576cf6e3537f.png">
<meta property="og:image" content="https://imouyo.github.io/2026/02/22/%E9%9A%8F%E8%BA%ABwifi%E5%88%B7linux/%E9%9A%8F%E8%BA%ABwifi%E5%88%B7linux/6576cf8484bd9.png">
<meta property="og:image" content="https://imouyo.github.io/2026/02/22/%E9%9A%8F%E8%BA%ABwifi%E5%88%B7linux/%E9%9A%8F%E8%BA%ABwifi%E5%88%B7linux/6576cf944056e.png">
<meta property="og:image" content="https://imouyo.github.io/2026/02/22/%E9%9A%8F%E8%BA%ABwifi%E5%88%B7linux/%E9%9A%8F%E8%BA%ABwifi%E5%88%B7linux/6576cf9b13fd4.png">
<meta property="article:published_time" content="2026-02-22T14:45:13.000Z">
<meta property="article:modified_time" content="2026-02-24T15:17:06.073Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="DIY">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://bucket.lxnchan.cn/posts/ufistick/miko.webp">
  <!-- Canonical links -->
  <link rel="canonical" href="https://imouyo.github.io/2026/02/22/%E9%9A%8F%E8%BA%ABwifi%E5%88%B7linux/index.html">
  
  
    <link rel="icon" href="/favicon.png" type="image/x-icon">
  
  
<link rel="stylesheet" href="/css/style.css">

  
  
  
  
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1.4.0/dist/gitalk.min.css">
  
<meta name="generator" content="Hexo 8.1.1"><link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
</head>


<body class="main-center theme-black" itemscope itemtype="http://schema.org/WebPage">
  <header class="header" itemscope itemtype="http://schema.org/WPHeader">
  <div class="slimContent">
    <div class="navbar-header">
      
      
      <div class="profile-block text-center">
        <a id="avatar" href="https://github.com/IMOUYO" target="_blank">
          <img class="img-circle img-rotate" src="/images/avatar.gif" width="200" height="200">
        </a>
        <h2 id="name" class="hidden-xs hidden-sm">makabaka</h2>
        <h3 id="title" class="hidden-xs hidden-sm hidden-md"></h3>
        <small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i> Earth</small>
      </div>
      
      <div class="search" id="search-form-wrap">

    <form class="search-form sidebar-form">
        <div class="input-group">
            <input type="text" class="search-form-input form-control" placeholder="Search" />
            <span class="input-group-btn">
                <button type="submit" class="search-form-submit btn btn-flat" onclick="return false;"><i class="icon icon-search"></i></button>
            </span>
        </div>
    </form>
    <div class="ins-search">
  <div class="ins-search-mask"></div>
  <div class="ins-search-container">
    <div class="ins-input-wrapper">
      <input type="text" class="ins-search-input" placeholder="Type something..." x-webkit-speech />
      <button type="button" class="close ins-close ins-selectable" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">Ã—</span></button>
    </div>
    <div class="ins-section-wrapper">
      <div class="ins-section-container"></div>
    </div>
  </div>
</div>


</div>
      <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>
    <nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation">
      <ul class="nav navbar-nav main-nav menu-highlight">
        
        
        <li class="menu-item menu-item-home">
          <a href="/.">
            
            <i class="icon icon-home-fill"></i>
            
            <span class="menu-title">Home</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-archives">
          <a href="/archives">
            
            <i class="icon icon-archives-fill"></i>
            
            <span class="menu-title">Archives</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-categories">
          <a href="/categories">
            
            <i class="icon icon-folder"></i>
            
            <span class="menu-title">Categories</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-tags">
          <a href="/tags">
            
            <i class="icon icon-tags"></i>
            
            <span class="menu-title">Tags</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-about">
          <a href="/about">
            
            <i class="icon icon-cup-fill"></i>
            
            <span class="menu-title">About</span>
          </a>
        </li>
        
      </ul>
      
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/cofess" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
    </ul>

    </nav>
  </div>
</header>

  
    <aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    
      
<div>
  <h3 id="catalog"></h3>
  <div id="toc"></div>
</div>

<script>
(function() {
  // ===== ç”Ÿæˆç›®å½• =====
  function buildToc() {
    // var article = document.querySelector('.post-content, .article-content, main');
    var article = document.querySelector('article.thisIsAAnchor');
    if (!article) return;
    
    document.getElementById('catalog').innerHTML = 'ç›®å½•';
    var headings = article.querySelectorAll('h1, h2, h3, h4');
    if (headings.length === 0) {
      document.getElementById('toc').innerHTML = '<p>æ— æ ‡é¢˜</p>';
      return;
    }
    
    var toc = document.getElementById('toc');
    var ul = document.createElement('ul');
    
    headings.forEach(function(heading, index) {
      // ç”Ÿæˆå”¯ä¸€ID
      if (!heading.id) {
        heading.id = 'heading-' + index;
      }
      
      var li = document.createElement('li');
      var a = document.createElement('a');
      a.href = '#' + heading.id;
      a.textContent = heading.textContent;
      a.style.marginLeft = (parseInt(heading.tagName[1]) - 1) * 12 + 'px';
      a.style.display = 'inline-block';
      
      li.appendChild(a);
      ul.appendChild(li);
    });
    
    toc.innerHTML = '';
    toc.appendChild(ul);
    return headings;
  }
  
  // ===== ç»‘å®šç‚¹å‡»äº‹ä»¶ =====
  function bindClick() {
    document.getElementById('toc').addEventListener('click', function(e) {
      var link = e.target.closest('a');
      if (link) {
        e.preventDefault();
        var target = document.querySelector(link.getAttribute('href'));
        if (target) {
          target.scrollIntoView({
            behavior: 'smooth',
            block: 'start'
          });
          history.pushState(null, null, link.getAttribute('href'));
        }
      }
    });
  }
  
  // ===== æ»šåŠ¨é«˜äº® =====
  function highlightActive() {
  var tocLinks = document.querySelectorAll('#toc a');
  if (tocLinks.length === 0) return;
  
  // é»˜è®¤é«˜äº®ç¬¬ä¸€ä¸ª
  tocLinks[0].style.fontWeight = 'bold';
  tocLinks[0].style.color = '#0066cc';
  tocLinks[0].style.borderLeft = '3px solid #0066cc';
  tocLinks[0].style.paddingLeft = '8px';
  
  // ä¸ºæ¯ä¸ªç›®å½•é“¾æ¥æ·»åŠ ç‚¹å‡»äº‹ä»¶
  tocLinks.forEach(function(link) {
    link.addEventListener('click', function(e) {
      // ç§»é™¤æ‰€æœ‰é“¾æ¥çš„é«˜äº®æ ·å¼
      tocLinks.forEach(function(l) {
        l.style.fontWeight = 'normal';
        l.style.color = '';
        l.style.borderLeft = '';
        l.style.paddingLeft = '';
      });
      
      // ä¸ºå½“å‰ç‚¹å‡»çš„é“¾æ¥æ·»åŠ é«˜äº®æ ·å¼
      this.style.fontWeight = 'bold';
      this.style.color = '#0066cc';
      this.style.borderLeft = '3px solid #0066cc';
      this.style.paddingLeft = '8px';
    });
  });
}
  
  // ===== åˆå§‹åŒ– =====
  function init() {
    buildToc();
    bindClick();
    highlightActive();
  }
  
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', init);
  } else {
    init();
  }
})();
</script>

<style>
/* æç®€æ ·å¼ï¼Œå¯åˆ é™¤ */
#toc ul { list-style: none; padding-left: 0; }
#toc li { margin: 5px 0; }
#toc a { text-decoration: none; color: #333; }
#toc a:hover { color: #0066cc; }
</style>

    
      <div class="widget">
    <h3 class="widget-title">Board</h3>
    <div class="widget-body">
        <div id="board">
            <div class="content">
                <p>æ¬¢è¿äº¤æµä¸åˆ†äº«ç»éªŒ!è”ç³»æˆ‘wangyimail20230608@163.com</p>
            </div>
        </div>
    </div>
</div>

    
      
  <div class="widget">
    <h3 class="widget-title">Categories</h3>
    <div class="widget-body">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%80%E6%9C%AF/">æŠ€æœ¯</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%80%E6%9C%AF/%E5%89%8D%E7%AB%AF/">å‰ç«¯</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">æ•°æ®åº“</a><span class="category-list-count">2</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">Tags</h3>
    <div class="widget-body">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/DIY/" rel="tag">DIY</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MySQL/" rel="tag">MySQL</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Question/" rel="tag">Question</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/issue/" rel="tag">issue</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/" rel="tag">java</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AD%A6%E4%B9%A0/" rel="tag">å­¦ä¹ </a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93%E6%9F%A5%E8%AF%A2/" rel="tag">æ•°æ®åº“æŸ¥è¯¢</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget-body tagcloud">
      <a href="/tags/DIY/" style="font-size: 14px;">DIY</a> <a href="/tags/MySQL/" style="font-size: 13px;">MySQL</a> <a href="/tags/Question/" style="font-size: 13px;">Question</a> <a href="/tags/issue/" style="font-size: 13px;">issue</a> <a href="/tags/java/" style="font-size: 13px;">java</a> <a href="/tags/%E5%AD%A6%E4%B9%A0/" style="font-size: 13px;">å­¦ä¹ </a> <a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93%E6%9F%A5%E8%AF%A2/" style="font-size: 13px;">æ•°æ®åº“æŸ¥è¯¢</a>
    </div>
  </div>

    
      
  <div class="widget">
    <h3 class="widget-title">Archive</h3>
    <div class="widget-body">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2026/02/">February 2026</a><span class="archive-list-count">13</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget-body">
      <ul class="recent-post-list list-unstyled no-thumbnail">
        
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                
              </p>
              <p class="item-title">
                <a href="/2026/02/24/OpenStick-ARM%E8%AE%BE%E5%A4%87%E5%A4%96%E6%8E%A5%E7%A1%AC%E7%9B%98%E7%9B%92%E5%AE%8C%E5%85%A8%E6%94%BB%E7%95%A5/" class="title">OpenStick/ARMè®¾å¤‡å¤–æ¥ç¡¬ç›˜ç›’å®Œå…¨æ”»ç•¥</a>
              </p>
              <p class="item-date">
                <time datetime="2026-02-24T15:19:28.000Z" itemprop="datePublished">2026-02-24</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                
              </p>
              <p class="item-title">
                <a href="/2026/02/22/%E9%9A%8F%E8%BA%ABwifi%E5%88%B7linux/" class="title">éšèº«wifiåˆ·linux</a>
              </p>
              <p class="item-date">
                <time datetime="2026-02-22T14:45:13.000Z" itemprop="datePublished">2026-02-22</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                
              </p>
              <p class="item-title">
                <a href="/2026/02/22/Questions/" class="title">Questions</a>
              </p>
              <p class="item-date">
                <time datetime="2026-02-22T09:16:57.000Z" itemprop="datePublished">2026-02-22</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                
              </p>
              <p class="item-title">
                <a href="/2026/02/21/electron%E5%AD%A6%E4%B9%A0/" class="title">electronå­¦ä¹ </a>
              </p>
              <p class="item-date">
                <time datetime="2026-02-21T13:40:37.000Z" itemprop="datePublished">2026-02-21</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                
              </p>
              <p class="item-title">
                <a href="/2026/02/19/%E6%96%B0%E5%B9%B4%E5%BF%AB%E4%B9%90/" class="title">(no title)</a>
              </p>
              <p class="item-date">
                <time datetime="2026-02-19T10:22:27.436Z" itemprop="datePublished">2026-02-19</time>
              </p>
            </div>
          </li>
          
      </ul>
    </div>
  </div>
  

    
  </div>
</aside>

  
  
<main class="main" role="main">
  <div class="content">
  <article id="post-éšèº«wifiåˆ·linux" class="article article-type-post thisIsAAnchor" itemscope itemtype="http://schema.org/BlogPosting">
    
    <div class="article-header">
      
        
  
    <h1 class="article-title" itemprop="name">
      éšèº«wifiåˆ·linux
    </h1>
  

      
      <div class="article-meta">
        <span class="article-date">
    <i class="icon icon-calendar-check"></i>
	<a href="/2026/02/22/%E9%9A%8F%E8%BA%ABwifi%E5%88%B7linux/" class="article-date">
	  <time datetime="2026-02-22T14:45:13.000Z" itemprop="datePublished">2026-02-22</time>
	</a>
</span>
        
        
  <span class="article-tag">
    <i class="icon icon-tags"></i>
	<a class="article-tag-link-link" href="/tags/DIY/" rel="tag">DIY</a>
  </span>


        

        <span class="post-comment"><i class="icon icon-comment"></i> <a href="/2026/02/22/%E9%9A%8F%E8%BA%ABwifi%E5%88%B7linux/#comments" class="article-comment-link">Comments</a></span>
        
      </div>
    </div>
    <div class="article-entry marked-body" itemprop="articleBody">
      
        <p>æ¨èé˜…è¯»ï¼š</p>
<p><a target="_blank" rel="noopener" href="https://blog.iamsjy.com/2023/12/11/snapdragon-410-portable-wifi-hotspot-flash-debian-and-optimize/#%E6%89%80%E9%9C%80%E6%96%87%E4%BB%B6%EF%BC%88%E4%B8%BB%E8%A6%81%E8%BF%9B%E8%A1%8C%E5%88%B7%E6%9C%BA%E6%B5%81%E7%A8%8B%EF%BC%89">https://blog.iamsjy.com/2023/12/11/snapdragon-410-portable-wifi-hotspot-flash-debian-and-optimize/#æ‰€éœ€æ–‡ä»¶ï¼ˆä¸»è¦è¿›è¡Œåˆ·æœºæµç¨‹ï¼‰</a></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/659249489%EF%BC%88%E4%B8%BB%E8%A6%81%E8%BF%9B%E8%A1%8C%E8%A7%A3%E9%99%A4BL%E9%94%81%EF%BC%89">https://zhuanlan.zhihu.com/p/659249489ï¼ˆä¸»è¦è¿›è¡Œè§£é™¤BLé”ï¼‰</a></p>
<p><strong>backupä¸­æ˜¯æ‰€æœ‰åˆ†åŒºçš„å¤‡ä»½ï¼Œä¸éœ€è¦ä¸‹è½½ï¼Œåœ¨è¿‡ç¨‹ä¸­éœ€è¦ä½ è‡ªå·±å¤‡ä»½è‡ªå·±æ‰‹å¤´çš„éšèº«wifi</strong></p>
<h3 id="1-çœ‹èŠ¯ç‰‡"><a class="markdownIt-Anchor" href="#1-çœ‹èŠ¯ç‰‡"></a> 1ã€çœ‹èŠ¯ç‰‡</h3>
<p>â€‹	æ‹†ä¸‹å…¨éƒ¨å±è”½ç½©ï¼ŒæŸ¥æ‰¾æœ€å¤§çš„ä¸€å—èŠ¯ç‰‡ï¼Œçœ‹èŠ¯ç‰‡ä¸Šæ–¹ä¸å°ï¼Œä¸€èˆ¬æ¥è¯´ä¼šæœ‰ä»¥ä¸‹å‡ ç§æƒ…å†µï¼š</p>
<ul>
<li>
<p><code>QUALCOMM MSM8916</code>ï¼šé«˜é€š410ï¼Œä¹Ÿæ˜¯ç©æ³•æœ€å¤šçš„ï¼›</p>
</li>
<li>
<p><code>QUALCOMM MSM8909</code>ï¼šé«˜é€š210ï¼Œç©æ³•ä»…æ¬¡äº410ï¼›</p>
<p>æœ¬äººçš„ä¸ºé«˜é€š410ï¼Œæ¿å­ä¸ºboot-ufi001c</p>
</li>
</ul>
<h3 id="2-å®‰è£…-9008-é©±åŠ¨"><a class="markdownIt-Anchor" href="#2-å®‰è£…-9008-é©±åŠ¨"></a> 2ã€å®‰è£… 9008 é©±åŠ¨</h3>
<p>â€‹	è¿è¡Œ9008driver.exe</p>
<h3 id="3-å®‰è£…-adb-å·¥å…·"><a class="markdownIt-Anchor" href="#3-å®‰è£…-adb-å·¥å…·"></a> 3ã€å®‰è£… ADB å·¥å…·</h3>
<p>â€‹	è§£å‹UFI003.zipï¼Œå¹¶è¿›å…¥ç”¨CMDè§£å‹æ–‡ä»¶å¤¹ï¼Œå¯ç›´æ¥ä½¿ç”¨adbä¸éœ€è¦æ·»åŠ ç¯å¢ƒå˜é‡</p>
<p>â€‹	æ‰“å¼€å‘½ä»¤æç¤ºç¬¦ï¼Œæ‰§è¡Œ <code>adb version</code>ã€‚æœ‰å¦‚ä¸‹è¾“å‡ºï¼Œåˆ™è¡¨æ˜é…ç½®æ­£ç¡®ã€‚</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ³¨æ„çœ‹æˆ‘çš„è·¯å¾„</span></span><br><span class="line">C:\Users\user\Desktop\123\UFI003&gt;adb version</span><br><span class="line">Android Debug Bridge version 1.0.41</span><br><span class="line">Version 32.0.0-8006631</span><br><span class="line">Installed as C:\Users\user\Desktop\123\UFI003\adb.exe</span><br></pre></td></tr></table></figure>
<h3 id="4-å®‰è£…-miko-å¤‡ä»½å·¥å…·"><a class="markdownIt-Anchor" href="#4-å®‰è£…-miko-å¤‡ä»½å·¥å…·"></a> 4ã€å®‰è£… Miko å¤‡ä»½å·¥å…·</h3>
<p>â€‹	è§£å‹MiKo_Loder Pro.zipï¼Œç‚¹å‡»é‡Œé¢çš„miko.exeï¼Œå®‰è£…å®Œä¹‹åè¿›å…¥å®‰è£…ç›®å½•ï¼Œå°†loader.exeæ‹–è¿›å»ï¼Œä¹‹åä½¿ç”¨Mikoå·¥å…·å‡ä»loader.exeæ‰“å¼€</p>
<p>éšèº«wifiè¿›å…¥9008``æ¨¡å¼ï¼Œä¹‹åæ‰§è¡Œä¸‹å›¾æ­¥éª¤</p>
<p><img src="https://bucket.lxnchan.cn/posts/ufistick/miko.webp" alt="img" /></p>
<p>â€‹	è‹¥éœ€è¦æ¢å¤åˆ™ï¼šéšèº«wifiè¿›å…¥9008æ¨¡å¼ï¼Œæ‰§è¡Œä¸‹å›¾æ­¥éª¤</p>
<p><img src="https://bucket.lxnchan.cn/posts/ufistick/miko-restore.webp" alt="img" /></p>
<h3 id="5-å¼€å¯-adb"><a class="markdownIt-Anchor" href="#5-å¼€å¯-adb"></a> 5ã€å¼€å¯ ADB</h3>
<p>â€‹	å°†éšèº« WiFi æ’å…¥ç”µè„‘ USB æ¥å£ã€‚æ‰“å¼€è®¾å¤‡ç®¡ç†å™¨ï¼Œå¦‚æœæ­¤æ—¶å¤šäº†ä¸€ä¸ªåå« Android Composite ADB Interface çš„è®¾å¤‡ï¼Œåˆ™è¡¨æ˜éšèº« WiFi å·²ç»å¼€å¯ ADBï¼Œæ— éœ€æ‰§è¡Œå…¶ä»–æ“ä½œã€‚</p>
<p>â€‹	å¦‚æœæ²¡æœ‰å‡ºç°è¿™ä¸ªè®¾å¤‡ï¼Œåˆ™éœ€è¦æ‰‹åŠ¨å¼€å¯ ADBã€‚ä»¥ UZ801 å‹å·ä¸ºä¾‹ï¼Œè¿ä¸Šéšèº« WiFi çš„çƒ­ç‚¹ï¼Œå¹¶è®¿é—® <a target="_blank" rel="noopener" href="http://192.168.100.1/usbdebug.html">http://192.168.100.1/usbdebug.html</a> å³å¯å¼€å¯ ADBï¼Œå†æ¬¡è®¿é—®å³å¯å…³é—­ã€‚</p>
<p>â€‹	éƒ¨åˆ† UFI003 å‹å·çš„éšèº« WiFi é»˜è®¤ä¸å¼€ ADBï¼Œéœ€è¦æ‰‹åŠ¨è¿› 9008 æ¨¡å¼åˆ·å…¥å·²å¼€å¯ ADB çš„å®‰å“å›ºä»¶ã€‚</p>
<p>å›ºä»¶ä¸‹è½½åœ°å€ï¼š<a target="_blank" rel="noopener" href="https://www.123pan.com/s/NUK8Vv-nRdl">https://www.123pan.com/s/NUK8Vv-nRdl</a> æå–ç ï¼š1LEW</p>
<p>â€‹	æ‰‹åŠ¨è¿› 9008 æ¨¡å¼çš„æ–¹æ³•ï¼šæŒ‰ä½ reset é”®ä¸æ”¾ï¼ˆéšèº« WiFi èƒŒé¢äºŒç»´ç å³ä¸Šè§’çš„å°å­”ï¼Œç”¨å–å¡é’ˆæˆ–ç‰™ç­¾æˆ³å³å¯ï¼‰ï¼Œå¹¶å°†éšèº« WiFi æ’å…¥ç”µè„‘ï¼Œæ¾å¼€ reset é”®ã€‚</p>
<h3 id="5-å¤‡ä»½åŸå‚å›ºä»¶"><a class="markdownIt-Anchor" href="#5-å¤‡ä»½åŸå‚å›ºä»¶"></a> 5ã€å¤‡ä»½åŸå‚å›ºä»¶</h3>
<p>â€‹	æ‰“å¼€å‘½ä»¤æç¤ºç¬¦ï¼Œæ‰§è¡Œ <code>adb reboot edl</code>ï¼Œæ­¤æ—¶è®¾å¤‡ç®¡ç†å™¨ä¸­ä¼šå¤šå‡ºé«˜é€š 9008 è®¾å¤‡ã€‚</p>
<h3 id="6-åˆ·å…¥ç³»ç»Ÿ"><a class="markdownIt-Anchor" href="#6-åˆ·å…¥ç³»ç»Ÿ"></a> 6ã€åˆ·å…¥ç³»ç»Ÿ</h3>
<p>â€‹	æˆ‘çš„è¿™ä¸ªéšèº«wifiè¢«é”äº†BLï¼Œæ‰€ä»¥éœ€è¦é€šè¿‡9008æ¨¡å¼å¼ºè¡Œåˆ·å…¥</p>
<p>â€‹	ä¸‹é¢è¿›è¡Œè§£BLé”</p>
<h3 id="7-ä¸‹è½½emmc_appsboot-test-signedmbnå’Œqualcomm-premium-tool"><a class="markdownIt-Anchor" href="#7-ä¸‹è½½emmc_appsboot-test-signedmbnå’Œqualcomm-premium-tool"></a> 7ã€ä¸‹è½½emmc_appsboot-test-signed.mbnå’ŒQualcomm Premium Tool</h3>
<p>â€‹	éšèº«wifiè¿›å…¥9008æ¨¡å¼ï¼Œç»§ç»­æŒ‰ç…§ä¸‹å›¾å¤‡ä»½</p>
<p><img src="https://bucket.lxnchan.cn/posts/ufistick/qpt.webp" alt="img" /></p>
<p>â€‹	ä¹‹åæŒ‰ç…§ä¸‹å›¾è¿›è¡Œæ›¿æ¢aboutï¼Œ<strong>ä¹‹ååœ¨å¼¹å‡ºçš„é¡µé¢é€‰æ‹©ä½ æ‰€ä¸‹è½½çš„emmc_appsboot-test-signed.mbn</strong></p>
<p><img src="%E9%9A%8F%E8%BA%ABwifi%E5%88%B7linux/image-20260223040900115.png" alt="image-20260223040900115" /></p>
<p>â€‹	å½“å·¦ä¾§æç¤ºaboutDoneä¹‹åï¼Œè¿›è¡Œæ ¼å¼åŒ–boot</p>
<p><img src="%E9%9A%8F%E8%BA%ABwifi%E5%88%B7linux/image-20260223041037126.png" alt="image-20260223041037126" /></p>
<p>â€‹	ä¹‹åå°±å¯ä»¥é‡å¯äº†ï¼Œé‡å¯ä¹‹åæ‰§è¡Œ<code>adb reboot bootloader</code>è¿›å…¥fastbootæ¨¡å¼ï¼Œå°±å¯ä»¥è¿›è¡Œåˆ·å…¥ç³»ç»Ÿäº†ï¼Œåœ¨<a target="_blank" rel="noopener" href="https://github.com/OpenStick/OpenStick">OpenStick</a>å†…ä¸‹è½½ç³»ç»Ÿäº†ï¼Œä¸‹è½½å®Œæˆåè¿è¡Œå‹ç¼©åŒ…å†…çš„flash.batå°±å¯ä»¥åˆ·å…¥äº†ï¼ŒæœŸé—´ç‚¹å‡ ä¸ªå›è½¦</p>
<h3 id="å®‰è£…-rndis-ç½‘ç»œé©±åŠ¨"><a class="markdownIt-Anchor" href="#å®‰è£…-rndis-ç½‘ç»œé©±åŠ¨"></a> å®‰è£… RNDIS ç½‘ç»œé©±åŠ¨</h3>
<p>â€‹	é‡æ–°æ’å…¥éšèº« WiFIï¼Œæ‰“å¼€ä»»åŠ¡ç®¡ç†å™¨ï¼Œåœ¨å…¶ä»–è®¾å¤‡ä¸­ä¼šå‡ºç°ä¸€ä¸ªæœªçŸ¥è®¾å¤‡æˆ–ä»¥ RNDIS å¼€å¤´çš„è®¾å¤‡</p>
<blockquote>
<p>å¦‚æœè®¾å¤‡ç®¡ç†å™¨åªæ˜¾ç¤º Android Deviceï¼Œå³é”®æ›´æ–°é©±åŠ¨ç¨‹åºï¼Œä¾æ¬¡é€‰æ‹©<strong>æ›´æ–°é©±åŠ¨ç¨‹åº</strong>â€“&gt;<strong>æµè§ˆæˆ‘çš„ç”µè„‘ä»¥æŸ¥æ‰¾é©±åŠ¨ç¨‹åºâ€“&gt;è®©æˆ‘ä»è®¡ç®—æœºä¸Šçš„å¯ç”¨é©±åŠ¨ç¨‹åºåˆ—è¡¨ä¸­é€‰å–-&gt;å»æ‰æ‰“å‹¾æ˜¾ç¤ºå…¼å®¹ç¡¬ä»¶-&gt;å·¦ä¾§æ‰¾åˆ°Microsoftï¼Œå³ä¾§æ‰¾åˆ°USBç§»åŠ¨å®½å¸¦ç½‘ç»œé€‚é…å™¨-&gt;å®‰è£…</strong>ï¼Œç„¶åé‡æ–°æ’å…¥éšèº« WiFiï¼Œä¼šå‡ºç°ä¸€ä¸ªæœªçŸ¥è®¾å¤‡ï¼Œå†æ ¹æ®ä¸‹è¿°æ­¥éª¤è¿›è¡Œæ“ä½œã€‚</p>
</blockquote>
<p><img src="%E9%9A%8F%E8%BA%ABwifi%E5%88%B7linux/6576ceae713b7.png" alt="image-20231211002244435" /></p>
<p>â€‹	å³é”®ï¼Œ<strong>æ›´æ–°é©±åŠ¨ç¨‹åº</strong>â€“&gt;<strong>æµè§ˆæˆ‘çš„ç”µè„‘ä»¥æŸ¥æ‰¾é©±åŠ¨ç¨‹åº</strong>â€“&gt;<strong>è®©æˆ‘ä»è®¡ç®—æœºä¸Šçš„å¯ç”¨é©±åŠ¨ç¨‹åºåˆ—è¡¨ä¸­é€‰å–</strong>â€“&gt;<strong>æ˜¾ç¤ºæ‰€æœ‰è®¾å¤‡</strong>ï¼Œç­‰å¾…åˆ—è¡¨åŠ è½½å®Œæˆã€‚</p>
<p><img src="%E9%9A%8F%E8%BA%ABwifi%E5%88%B7linux/6576ced636acb.png" alt="image-20231211002348468" /></p>
<p>â€‹	å·¦ä¾§é€‰æ‹© <strong>Microsoft</strong>ï¼Œå³ä¾§é€‰æ‹© <strong>åŸºäºè¿œç¨‹ NDIS çš„ Internet å…±äº«è®¾å¤‡</strong>ï¼Œåœ¨å¼¹å‡ºçª—å£ä¸­é€‰æ‹©æ˜¯ï¼Œå¹¶ç¡®å®šã€‚</p>
<p><img src="%E9%9A%8F%E8%BA%ABwifi%E5%88%B7linux/6576cee2bd3a7.png" alt="image-20231211002724457" /></p>
<p>â€‹	è‡³æ­¤ï¼ŒRNDIS é©±åŠ¨å®‰è£…æˆåŠŸã€‚</p>
<p><img src="%E9%9A%8F%E8%BA%ABwifi%E5%88%B7linux/6576cf3d95a0f.png" alt="image-20231211002850196" /></p>
<h3 id="ç™»å½•debian"><a class="markdownIt-Anchor" href="#ç™»å½•debian"></a> ç™»å½•debian</h3>
<p>â€‹	é©±åŠ¨å®‰è£…æˆåŠŸåï¼Œç”µè„‘ä¸Šä¼šå¤šå‡ºä¸€ä¸ªåå« <code>4G_UFI_123456</code> çš„ NDIS è®¾å¤‡ï¼ŒåŒæ—¶ä¼šå‡ºç°ä¸€ä¸ªåŒåçš„çƒ­ç‚¹ï¼Œå¯†ç ä¸º <strong>12345678</strong>ã€‚</p>
<p>â€‹	Debian é»˜è®¤ç”¨æˆ·åä¸º userï¼Œå¯†ç ä¸º 1ï¼Œroot å¯†ç ä¹Ÿä¸º 1ã€‚<strong>è¯·åŠ¡å¿…åŠæ—¶ä¿®æ”¹å¯†ç ï¼ˆå‘½ä»¤ï¼špasswdï¼‰ã€‚</strong></p>
<p>â€‹	æ­¤æ—¶å¯ä»¥é€šè¿‡ adb æˆ– ssh è¿æ¥åˆ° Debian ç»ˆç«¯ã€‚</p>
<h3 id="é€šè¿‡-adb-è¿æ¥"><a class="markdownIt-Anchor" href="#é€šè¿‡-adb-è¿æ¥"></a> é€šè¿‡ adb è¿æ¥</h3>
<p>â€‹	å°†éšèº« WiFi æ’å…¥ç”µè„‘ USB æ¥å£ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹å·²è¿æ¥ adb è®¾å¤‡ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">adb devices</span><br><span class="line">C:\Users\Thinkpad&gt;adb devices</span><br><span class="line">List of devices attached</span><br><span class="line">0123456789      device</span><br></pre></td></tr></table></figure>
<p>â€‹	æœ‰æ–°è®¾å¤‡å‡ºç°æ—¶ï¼Œä½¿ç”¨ä»¥ä¸‹æŒ‡ä»¤è¿›å…¥ bashï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell</span><br></pre></td></tr></table></figure>
<p>â€‹	é€šè¿‡ adb è¿æ¥æ—¶ï¼Œä½¿ç”¨ <code>nmtui</code>ã€<code>htop</code> ç­‰éœ€è¦æ˜¾ç¤ºå›¾å½¢çš„å‘½ä»¤ï¼Œå¯èƒ½ä¼šå‡ºç°å¦‚ä¸‹é”™è¯¯ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root@openstick:/# nmtui</span><br><span class="line">TERM environment variable needs set.</span><br></pre></td></tr></table></figure>
<p>â€‹	è®¾ç½® <code>TERM</code> ç¯å¢ƒå˜é‡å³å¯è§£å†³ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export TERM=linux</span><br></pre></td></tr></table></figure>
<h3 id="é€šè¿‡-ssh-è¿æ¥"><a class="markdownIt-Anchor" href="#é€šè¿‡-ssh-è¿æ¥"></a> é€šè¿‡ ssh è¿æ¥</h3>
<p>â€‹	å°†éšèº« WiFi æ’å…¥ç”µè„‘ USB æ¥å£æˆ–è¿æ¥ä¸Šéšèº« WiFi çš„çƒ­ç‚¹ï¼Œä½¿ç”¨ä»¥ä¸‹æŒ‡ä»¤è¿›è¡Œè¿æ¥ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh root@192.168.68.1</span><br></pre></td></tr></table></figure>
<p>â€‹	é»˜è®¤ç™»é™†å¯†ç ä¸º1ï¼Œå¦‚æœè¿ä¸ä¸Šè¯´æ˜ç³»ç»Ÿè¿˜åœ¨å¯åŠ¨ï¼Œè¯·ç¨åå†è¯•ã€‚</p>
<h3 id="éšèº«-wifi-è”ç½‘"><a class="markdownIt-Anchor" href="#éšèº«-wifi-è”ç½‘"></a> éšèº« WiFi è”ç½‘</h3>
<p>â€‹	æ­¤æ—¶éšèº« WiFi å¹¶æ²¡æœ‰è”ç½‘ï¼Œå¿…é¡»è¦å…³é—­çƒ­ç‚¹æ‰èƒ½è¿æ¥ WiFiã€‚ä¸‹é¢ä»‹ç»è¯¦ç»†æ­¥éª¤ã€‚</p>
<p>â€‹	é¦–å…ˆæ‰“å¼€å‘½ä»¤æç¤ºç¬¦ï¼Œæ‰§è¡Œ <code>adb shell</code> è¿›å…¥ Debian ç»ˆç«¯ã€‚ç„¶åè®¾ç½® TERM ç¯å¢ƒå˜é‡ï¼š<code>export TERM=linux</code>ã€‚</p>
<p>â€‹	æ‰§è¡Œ <code>nmtui</code>ï¼Œé€‰æ‹©â€œç¼–è¾‘è¿æ¥â€ã€‚</p>
<p><a target="_blank" rel="noopener" href="https://img-cdn.boochi.cn/i/2023/12/11/6576cf5cb34d0.png"><img src="%E9%9A%8F%E8%BA%ABwifi%E5%88%B7linux/6576cf5cb34d0.png" alt="image-20231211005030766" /></a></p>
<p>â€‹	å·¦ä¾§ä½¿ç”¨æ–¹å‘é”®é€‰æ‹© <code>bridge</code>ï¼Œå³ä¾§é€‰æ‹©â€œç¼–è¾‘â€ã€‚å¹¶å›è½¦ã€‚</p>
<p><a target="_blank" rel="noopener" href="https://img-cdn.boochi.cn/i/2023/12/11/6576cf6e3537f.png"><img src="%E9%9A%8F%E8%BA%ABwifi%E5%88%B7linux/6576cf6e3537f.png" alt="image-20231211005119460" /></a></p>
<p>â€‹	åˆ é™¤å…¶ä¸­çš„ <code>wifi</code>ï¼Œå¹¶é€‰æ‹©ç¡®å®šã€‚</p>
<p><a target="_blank" rel="noopener" href="https://img-cdn.boochi.cn/i/2023/12/11/6576cf8484bd9.png"><img src="%E9%9A%8F%E8%BA%ABwifi%E5%88%B7linux/6576cf8484bd9.png" alt="image-20231211005229505" /></a></p>
<p><a target="_blank" rel="noopener" href="https://img-cdn.boochi.cn/i/2023/12/11/6576cf944056e.png"><img src="%E9%9A%8F%E8%BA%ABwifi%E5%88%B7linux/6576cf944056e.png" alt="image-20231211005307459" /></a></p>
<p>â€‹	è¿”å›ï¼Œé€‰æ‹©å¯ç”¨è¿æ¥ï¼Œåˆ™å¯è¿æ¥ WiFiã€‚</p>
<p><a target="_blank" rel="noopener" href="https://img-cdn.boochi.cn/i/2023/12/11/6576cf9b13fd4.png"><img src="%E9%9A%8F%E8%BA%ABwifi%E5%88%B7linux/6576cf9b13fd4.png" alt="img" /></a></p>
<p>â€‹	ä¹‹åå°±å¯ä»¥åœ¨åŒä¸€ä¸ªwifiç¯å¢ƒä¸‹ï¼Œç”¨ç”µè„‘è¿›è¡Œsshç™»å½•</p>
<h3 id="ä¼˜åŒ–ç³»ç»Ÿ"><a class="markdownIt-Anchor" href="#ä¼˜åŒ–ç³»ç»Ÿ"></a> ä¼˜åŒ–ç³»ç»Ÿ</h3>
<p>â€‹	åˆ é™¤æ— æ•ˆè½¯ä»¶åŒ…ä»“åº“</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm -rf /etc/apt/sources.list.d/*</span><br></pre></td></tr></table></figure>
<p>â€‹	åˆ é™¤å¤šä½™è½¯ä»¶åŒ…</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt autopurge -y adoptopenjdk-8-hotspot</span><br></pre></td></tr></table></figure>
<p>â€‹	æ›´æ¢è½¯ä»¶æº</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">cat &lt;&lt;EOF&gt; /etc/apt/sources.list</span><br><span class="line">deb http://mirrors.ustc.edu.cn/debian/ bullseye main contrib non-free</span><br><span class="line"># deb-src http://mirrors.ustc.edu.cn/debian/ bullseye main contrib non-free</span><br><span class="line"></span><br><span class="line">deb http://mirrors.ustc.edu.cn/debian/ bullseye-updates main contrib non-free</span><br><span class="line"># deb-src http://mirrors.ustc.edu.cn/debian/ bullseye-updates main contrib non-free</span><br><span class="line"></span><br><span class="line">#deb http://mirrors.ustc.edu.cn/debian/ bullseye-backports main contrib non-free</span><br><span class="line"># deb-src http://mirrors.ustc.edu.cn/debian/ bullseye-backports main contrib non-free</span><br><span class="line"></span><br><span class="line">deb http://mirrors.ustc.edu.cn/debian-security/ bullseye-security main contrib non-free</span><br><span class="line"># deb-src http://mirrors.ustc.edu.cn/debian-security/ bullseye-security main contrib non-free</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>
<p>æ›´æ–°è½¯ä»¶åŒ…</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt update &amp;&amp; apt upgrade -y</span><br></pre></td></tr></table></figure>
<p>å®‰è£…å¸¸ç”¨è½¯ä»¶åŒ…</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install -y nano curl</span><br></pre></td></tr></table></figure>
<p>åˆ é™¤è½¯ä»¶åŒ…ç¼“å­˜</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt clean</span><br></pre></td></tr></table></figure>
<hr />
<h3 id="question"><a class="markdownIt-Anchor" href="#question"></a> Question</h3>
<h4 id="ä¸ºä»€ä¹ˆè£…å®Œç¯ä¸äº®"><a class="markdownIt-Anchor" href="#ä¸ºä»€ä¹ˆè£…å®Œç¯ä¸äº®"></a> <strong>ä¸ºä»€ä¹ˆè£…å®Œç¯ä¸äº®ï¼Ÿ</strong></h4>
<h5 id="è§£å†³åŠæ³•"><a class="markdownIt-Anchor" href="#è§£å†³åŠæ³•"></a> è§£å†³åŠæ³•</h5>
<p>â€‹	åŸå› æ˜¯æœ‰çš„ç¯çš„GPIOå£ä¸åˆ·å…¥ç³»ç»Ÿçš„åº•å±‚ç»‘å®šçš„GPIOå£ä¸ç¬¦åˆï¼Œéœ€è¦è‡ªå·±æ‰¾å‡ºæ¥ï¼Œå®‰è£…<code>gpiod</code>æ¥æ“ä½œGPIOå£</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt update &amp;&amp; <span class="built_in">sudo</span> apt install gpiod -y</span><br></pre></td></tr></table></figure>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">gpiodetect	<span class="comment"># å¯ä»¥æŸ¥çœ‹æ‰€æœ‰çš„GPIOç»„</span></span><br><span class="line"><span class="comment"># è¾“å‡ºç±»ä¼¼äºï¼š</span></span><br><span class="line">&gt;gpiochip0 [1000000.pinctrl] (122 lines)</span><br><span class="line">&gt;gpiochip1 [200f000.spmi:pmic@0:mpps@a000] (4 lines)</span><br><span class="line">&gt;gpiochip2 [200f000.spmi:pmic@0:gpios@c000] (4 lines)</span><br></pre></td></tr></table></figure>
<p>â€‹	ç„¶åé€šè¿‡ï¼Œä¸‹é¢å‘½ä»¤æŸ¥çœ‹å¼•è„šGPIOçŠ¶æ€</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gpioinfo gpiochip0</span><br></pre></td></tr></table></figure>
<p>===============================</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> gpioset gpiochip0 20=1			<span class="comment">#è¡¨ç¤ºå°†GPIO 20 ç½®äºé«˜ç”µå¹³</span></span><br></pre></td></tr></table></figure>
<p>â€‹	å¦‚æœæ§åˆ¶è‡ªå·±çš„20ï¼Œ21ï¼Œ22å£ç¯æ²¡æœ‰å˜åŒ–ï¼Œåˆ™å¯èƒ½å°±æ˜¯GPIOå£ä¸åˆ·å…¥ç³»ç»Ÿçš„åº•å±‚ç»‘å®šçš„GPIOå£ä¸ç¬¦åˆï¼Œå¯ä»¥é€šè¿‡æš´åŠ›æšä¸¾è§‚å¯Ÿ</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æš´åŠ›æšä¸¾ gpiochip0 çš„ 0-50 å·å¼•è„šå¯è‡ªå·±æ›´æ”¹å…¶ä»–çš„å¼•è„š</span></span><br><span class="line"><span class="comment"># gpiochip1å’Œgpiochip2ä¸è¦åŠ¨</span></span><br><span class="line"><span class="comment"># è¿™é‡Œçš„å¼•è„šèŒƒå›´å¯ä»¥æ ¹æ®gpioinfo gpiochip0æŸ¥çœ‹å¼•è„šç¼–å·èŒƒå›´</span></span><br><span class="line"><span class="keyword">for</span> offset <span class="keyword">in</span> &#123;0..50&#125;; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;Testing gpiochip0 offset <span class="variable">$offset</span>&quot;</span></span><br><span class="line">    <span class="built_in">sudo</span> gpioset gpiochip0 <span class="variable">$offset</span>=1</span><br><span class="line">    <span class="built_in">sleep</span> 0.5</span><br><span class="line">    <span class="built_in">sudo</span> gpioset gpiochip0 <span class="variable">$offset</span>=0</span><br><span class="line">    <span class="built_in">sleep</span> 0.2</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>
<p>â€‹	æˆ‘çš„æƒ…å†µæ˜¯114ç”µæºç»¿,115ç”µæºçº¢ï¼Œ7ä¸ºwifiç»¿,31ä¸ºæ•°æ®ç»¿</p>
<h5 id="éœ€æ±‚"><a class="markdownIt-Anchor" href="#éœ€æ±‚"></a> <strong>éœ€æ±‚ï¼š</strong></h5>
<p><strong>1ã€å¼€æœºçŠ¶æ€ä¸‹114å£å¸¸äº®</strong></p>
<ol>
<li>
<p><strong>ç¼–è¾‘ rc.local</strong></p>
 <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> nano /etc/rc.local</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><strong>åœ¨ <code>exit 0</code> ä¹‹å‰åŠ ä¸Šè¿™è¡Œ</strong></p>
 <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gpioset gpiochip0 114=1</span><br></pre></td></tr></table></figure>
<p>å®Œæ•´ç¤ºä¾‹ï¼š</p>
 <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line">gpioset gpiochip0 114=1</span><br><span class="line"><span class="built_in">exit</span> 0</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><strong>ä¿å­˜é€€å‡º</strong>ï¼ˆCtrl+Xï¼ŒæŒ‰ Yï¼Œå›è½¦ï¼‰</p>
</li>
<li>
<p><strong>ç»™æ‰§è¡Œæƒé™</strong></p>
 <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> <span class="built_in">chmod</span> +x /etc/rc.local</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><strong>æµ‹è¯•ä¸€ä¸‹</strong></p>
 <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> /etc/rc.local</span><br></pre></td></tr></table></figure>
<p>å¦‚æœç¯äº®äº†ï¼Œè¯´æ˜è„šæœ¬æ²¡é—®é¢˜ï¼Œé‡å¯åä¼šè‡ªåŠ¨æ‰§è¡Œã€‚</p>
</li>
</ol>
<hr />
<p><strong>2ã€å½“è¿æ¥ä¸Šwifiåï¼Œè‹¥æœ‰æ•°æ®ä¼ å…¥ä¼ å‡ºåˆ™è®©7å£ç¯é—ªçƒï¼Œä¼ è¾“å¿«åˆ°æŸä¸ªé˜ˆå€¼åˆ™å¸¸é‡</strong></p>
<p>ğŸ“Œ <strong>å‚æ•°å¾®è°ƒ</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left">å‚æ•°</th>
<th style="text-align:left">ä½œç”¨</th>
<th style="text-align:left">ä½ çš„æ¿å­å»ºè®®</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>HIGH_THRESHOLD</code></td>
<td style="text-align:left">å¸¸äº®é˜ˆå€¼</td>
<td style="text-align:left">5000ï¼ˆçº¦ 40kbpsï¼‰</td>
</tr>
<tr>
<td style="text-align:left"><code>LOW_THRESHOLD</code></td>
<td style="text-align:left">ç†„ç­é˜ˆå€¼</td>
<td style="text-align:left">100</td>
</tr>
<tr>
<td style="text-align:left"><code>MEDIUM_DELAY</code></td>
<td style="text-align:left">ä¸­é€Ÿé—ªé—´éš”</td>
<td style="text-align:left">0.3 ç§’</td>
</tr>
</tbody>
</table>
<p>ä½ å¯ä»¥æ ¹æ®å®é™…ç½‘é€Ÿè°ƒæ•´è¿™äº›æ•°å€¼ã€‚</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é…ç½®</span></span><br><span class="line">INTERFACE=<span class="string">&quot;wlan0&quot;</span>        <span class="comment"># WiFi æ¥å£åï¼ˆç”¨ ip a ç¡®è®¤ï¼‰</span></span><br><span class="line">GPIO=7                   <span class="comment"># ä½ æ‰¾åˆ°çš„ WiFi ç¯ GPIO</span></span><br><span class="line">UPDATE_INTERVAL=0.2      <span class="comment"># é‡‡æ ·é—´éš”</span></span><br><span class="line">HIGH_THRESHOLD=5000      <span class="comment"># è¶…è¿‡è¿™ä¸ªæµé‡ï¼ˆå­—èŠ‚/ç§’ï¼‰å°±å¸¸äº®</span></span><br><span class="line">LOW_THRESHOLD=100        <span class="comment"># ä½äºè¿™ä¸ªæµé‡å°±ç†„ç­</span></span><br><span class="line">MEDIUM_DELAY=0.3         <span class="comment"># ä¸­æµé‡æ—¶çš„é—ªçƒå»¶è¿Ÿ</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆå§‹åŒ–</span></span><br><span class="line"><span class="built_in">echo</span> none | <span class="built_in">sudo</span> <span class="built_in">tee</span> /sys/class/leds/*/trigger 2&gt;/dev/null</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">get_traffic</span></span>() &#123;</span><br><span class="line">    <span class="built_in">cat</span> /proc/net/dev | grep <span class="string">&quot;<span class="variable">$INTERFACE</span>&quot;</span> | awk <span class="string">&#x27;&#123;print $2 + $10&#125;&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">prev_tx=$(get_traffic)</span><br><span class="line"><span class="keyword">while</span> <span class="literal">true</span>; <span class="keyword">do</span></span><br><span class="line">    curr_tx=$(get_traffic)</span><br><span class="line">    diff=$((curr_tx - prev_tx))</span><br><span class="line">    [ <span class="variable">$diff</span> -lt 0 ] &amp;&amp; diff=0</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$diff</span> -gt <span class="variable">$HIGH_THRESHOLD</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="comment"># å¤§é‡ä¸‹è½½ â†’ å¸¸äº®</span></span><br><span class="line">        <span class="built_in">sudo</span> gpioset gpiochip0 <span class="variable">$GPIO</span>=1</span><br><span class="line">        <span class="built_in">sleep</span> <span class="variable">$UPDATE_INTERVAL</span></span><br><span class="line">    <span class="keyword">elif</span> [ <span class="variable">$diff</span> -lt <span class="variable">$LOW_THRESHOLD</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="comment"># æ— æµé‡ â†’ ç†„ç­</span></span><br><span class="line">        <span class="built_in">sudo</span> gpioset gpiochip0 <span class="variable">$GPIO</span>=0</span><br><span class="line">        <span class="built_in">sleep</span> <span class="variable">$UPDATE_INTERVAL</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="comment"># ä¸­æµé‡ â†’ é—ªçƒ</span></span><br><span class="line">        <span class="built_in">sudo</span> gpioset gpiochip0 <span class="variable">$GPIO</span>=1</span><br><span class="line">        <span class="built_in">sleep</span> <span class="variable">$MEDIUM_DELAY</span></span><br><span class="line">        <span class="built_in">sudo</span> gpioset gpiochip0 <span class="variable">$GPIO</span>=0</span><br><span class="line">        <span class="built_in">sleep</span> <span class="variable">$MEDIUM_DELAY</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    </span><br><span class="line">    prev_tx=<span class="variable">$curr_tx</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>
<hr />
<p>ğŸ¯ <strong>æ•ˆæœè¯´æ˜</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left">æµé‡çŠ¶æ€</th>
<th style="text-align:left">ç¯çš„è¡Œä¸º</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>æ— æµé‡</strong> (<code>&lt;100 bytes/s</code>)</td>
<td style="text-align:left">ç†„ç­</td>
</tr>
<tr>
<td style="text-align:left"><strong>å°‘é‡æµé‡</strong> (<code>100-5000</code>)</td>
<td style="text-align:left">æ…¢é—ªï¼ˆ0.3ç§’é—´éš”ï¼‰</td>
</tr>
<tr>
<td style="text-align:left"><strong>å¤§é‡ä¸‹è½½</strong> (<code>&gt;5000 bytes/s</code>)</td>
<td style="text-align:left"><strong>å¸¸äº®</strong></td>
</tr>
</tbody>
</table>
<hr />
<p>âš™ï¸ <strong>å®‰è£…è¿è¡Œ</strong></p>
<p>1ï¸âƒ£ <strong>ä¿å­˜è„šæœ¬</strong></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> nano /usr/local/bin/wifi-led.sh</span><br></pre></td></tr></table></figure>
<p>ç²˜è´´ä¸Šé¢çš„å†…å®¹ï¼Œä¿å­˜é€€å‡ºï¼ˆCtrl+Xï¼ŒæŒ‰ Yï¼Œå›è½¦ï¼‰ã€‚</p>
<p>2ï¸âƒ£ <strong>ç»™æƒé™</strong></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> <span class="built_in">chmod</span> +x /usr/local/bin/wifi-led.sh</span><br></pre></td></tr></table></figure>
<p>3ï¸âƒ£ <strong>æµ‹è¯•</strong></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> /usr/local/bin/wifi-led.sh</span><br></pre></td></tr></table></figure>
<p>ç”¨æ‰‹æœºè¿ WiFi ä¸‹è½½ä¸ªæ–‡ä»¶ï¼Œçœ‹ç¯æ˜¯ä¸æ˜¯å¸¸äº®äº†ï¼ŒæŒ‰ctrl+cç»“æŸè„šæœ¬ã€‚</p>
<p>4ï¸âƒ£ <strong>å¼€æœºè‡ªå¯</strong></p>
<p>æŒ‰ä¹‹å‰çš„æ–¹æ³•åˆ›å»º systemd æœåŠ¡ï¼Œæˆ–è€…ç›´æ¥åŠ åˆ° <code>/etc/rc.local</code>ï¼š</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> nano /etc/rc.local</span><br></pre></td></tr></table></figure>
<p>åœ¨ <code>exit 0</code> å‰åŠ ï¼š</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/bin/wifi-led.sh &amp;</span><br></pre></td></tr></table></figure>
<p><strong><code>&amp;</code></strong> çš„ä½œç”¨æ˜¯ï¼š<strong>æŠŠå‘½ä»¤æ”¾åˆ°åå°å»è¿è¡Œ</strong>ã€‚</p>
<h4 id="åœ¨linuxé‡ŒæŸ¥çœ‹æ¿å­å‹å·"><a class="markdownIt-Anchor" href="#åœ¨linuxé‡ŒæŸ¥çœ‹æ¿å­å‹å·"></a> åœ¨linuxé‡ŒæŸ¥çœ‹æ¿å­å‹å·</h4>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> /sys/firmware/devicetree/base/model</span><br><span class="line"><span class="comment"># è¿”å›ä¾‹å¦‚</span></span><br><span class="line">&gt;Handsome OpenStick UFI003MB</span><br></pre></td></tr></table></figure>
<h3 id="cups"><a class="markdownIt-Anchor" href="#cups"></a> cups</h3>
<h4 id="å¸¸ç”¨å‘½ä»¤"><a class="markdownIt-Anchor" href="#å¸¸ç”¨å‘½ä»¤"></a> å¸¸ç”¨å‘½ä»¤</h4>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹æ‰“å°æœºçŠ¶æ€</span></span><br><span class="line">lpstat -p -d</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹ CUPS æœåŠ¡çŠ¶æ€</span></span><br><span class="line">systemctl status cups</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹ CUPS ç‰ˆæœ¬</span></span><br><span class="line">cups-config --version</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹æ‰€æœ‰å¯ç”¨å‘½ä»¤</span></span><br><span class="line"><span class="built_in">ls</span> /usr/bin/lp* /usr/sbin/lp*</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯åŠ¨ CUPS æœåŠ¡</span></span><br><span class="line"><span class="built_in">sudo</span> systemctl start cups</span><br><span class="line"></span><br><span class="line"><span class="comment"># åœæ­¢ CUPS æœåŠ¡</span></span><br><span class="line"><span class="built_in">sudo</span> systemctl stop cups</span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡å¯ CUPS æœåŠ¡</span></span><br><span class="line"><span class="built_in">sudo</span> systemctl restart cups</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹å®æ—¶æ—¥å¿—</span></span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">tail</span> -f /var/log/cups/error_log</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th style="text-align:left">å‘½ä»¤</th>
<th style="text-align:left">æ‰€å±ç›®å½•</th>
<th style="text-align:left">ä¸»è¦åŠŸèƒ½</th>
<th style="text-align:left">å¸¸ç”¨ç¤ºä¾‹</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong><code>lp</code></strong></td>
<td style="text-align:left"><code>/usr/bin</code></td>
<td style="text-align:left"><strong>æäº¤æ‰“å°ä»»åŠ¡</strong>ï¼ˆæœ€å¸¸ç”¨ï¼‰</td>
<td style="text-align:left"><code>lp -d æ‰“å°æœºå æ–‡ä»¶.pdf</code></td>
</tr>
<tr>
<td style="text-align:left"><strong><code>lpr</code></strong></td>
<td style="text-align:left"><code>/usr/bin</code></td>
<td style="text-align:left">å¦ä¸€ç§æäº¤æ‰“å°ä»»åŠ¡çš„å‘½ä»¤</td>
<td style="text-align:left"><code>lpr -P æ‰“å°æœºå æ–‡ä»¶.pdf</code></td>
</tr>
<tr>
<td style="text-align:left"><strong><code>lpq</code></strong></td>
<td style="text-align:left"><code>/usr/bin</code></td>
<td style="text-align:left"><strong>æŸ¥çœ‹æ‰“å°é˜Ÿåˆ—</strong>ï¼ˆæŸ¥çœ‹ç­‰å¾…æ‰“å°çš„ä»»åŠ¡ï¼‰</td>
<td style="text-align:left"><code>lpq -a</code>ï¼ˆæŸ¥çœ‹æ‰€æœ‰é˜Ÿåˆ—ï¼‰</td>
</tr>
<tr>
<td style="text-align:left"><strong><code>lprm</code></strong></td>
<td style="text-align:left"><code>/usr/bin</code></td>
<td style="text-align:left"><strong>å–æ¶ˆæ‰“å°ä»»åŠ¡</strong></td>
<td style="text-align:left"><code>lprm ä»»åŠ¡ID</code> æˆ– <code>lprm -</code>ï¼ˆå–æ¶ˆæ‰€æœ‰ï¼‰</td>
</tr>
<tr>
<td style="text-align:left"><strong><code>lpstat</code></strong></td>
<td style="text-align:left"><code>/usr/bin</code></td>
<td style="text-align:left"><strong>æ˜¾ç¤ºæ‰“å°æœºçŠ¶æ€å’Œä»»åŠ¡ä¿¡æ¯</strong></td>
<td style="text-align:left"><code>lpstat -p -d</code>ï¼ˆæŸ¥çœ‹æ‰“å°æœºï¼‰</td>
</tr>
<tr>
<td style="text-align:left"><strong><code>lpoptions</code></strong></td>
<td style="text-align:left"><code>/usr/bin</code></td>
<td style="text-align:left">è®¾ç½®æˆ–æŸ¥çœ‹æ‰“å°é€‰é¡¹</td>
<td style="text-align:left"><code>lpoptions -d æ‰“å°æœºå</code>ï¼ˆè®¾é»˜è®¤ï¼‰</td>
</tr>
<tr>
<td style="text-align:left"><strong><code>lpunlock</code></strong></td>
<td style="text-align:left"><code>/usr/bin</code></td>
<td style="text-align:left">è§£é”è¢«é”å®šçš„æ‰“å°æœºé˜Ÿåˆ—</td>
<td style="text-align:left"><code>lpunlock æ‰“å°æœºå</code></td>
</tr>
<tr>
<td style="text-align:left"><strong><code>lpadmin</code></strong></td>
<td style="text-align:left"><code>/usr/sbin</code></td>
<td style="text-align:left"><strong>æ·»åŠ ã€åˆ é™¤æˆ–é…ç½®æ‰“å°æœº</strong>ï¼ˆéœ€rootï¼‰</td>
<td style="text-align:left"><code>lpadmin -p æ‰“å°æœºå -v è®¾å¤‡</code></td>
</tr>
<tr>
<td style="text-align:left"><strong><code>lpinfo</code></strong></td>
<td style="text-align:left"><code>/usr/sbin</code></td>
<td style="text-align:left">åˆ—å‡ºå¯ç”¨çš„æ‰“å°æœºé©±åŠ¨å’Œæ¥å£</td>
<td style="text-align:left"><code>lpinfo -v</code>ï¼ˆæŸ¥çœ‹å¯ç”¨è¿æ¥ï¼‰</td>
</tr>
<tr>
<td style="text-align:left"><strong><code>lpmove</code></strong></td>
<td style="text-align:left"><code>/usr/sbin</code></td>
<td style="text-align:left">å°†ä»»åŠ¡ä»ä¸€ä¸ªé˜Ÿåˆ—ç§»åˆ°å¦ä¸€ä¸ª</td>
<td style="text-align:left"><code>lpmove ä»»åŠ¡ID ç›®æ ‡æ‰“å°æœº</code></td>
</tr>
<tr>
<td style="text-align:left"><strong><code>lpc</code></strong></td>
<td style="text-align:left"><code>/usr/sbin</code></td>
<td style="text-align:left">æ§åˆ¶æ‰“å°æœºçŠ¶æ€ï¼ˆå¯åŠ¨/åœæ­¢/å¯ç”¨ï¼‰</td>
<td style="text-align:left"><code>lpc status</code>ï¼ˆæŸ¥çœ‹çŠ¶æ€ï¼‰</td>
</tr>
</tbody>
</table>
<p>åœ¨ <code>lp</code> å‘½ä»¤ä¸­ï¼Œå¤æ‚çš„æ‰“å°é€‰é¡¹ä¸»è¦é€šè¿‡ <code>-o</code> å‚æ•°æ¥æŒ‡å®šã€‚æ ¹æ® CUPS çš„å®˜æ–¹æ–‡æ¡£ï¼Œä»¥ä¸‹æ˜¯å¸¸ç”¨çš„å¤æ‚æ‰“å°é€‰é¡¹ ï¼š</p>
<h4 id="é¡µé¢å¸ƒå±€ä¸æ’ç‰ˆé€‰é¡¹"><a class="markdownIt-Anchor" href="#é¡µé¢å¸ƒå±€ä¸æ’ç‰ˆé€‰é¡¹"></a> é¡µé¢å¸ƒå±€ä¸æ’ç‰ˆé€‰é¡¹</h4>
<table>
<thead>
<tr>
<th style="text-align:left">é€‰é¡¹</th>
<th style="text-align:left">è¯´æ˜</th>
<th style="text-align:left">ç¤ºä¾‹å€¼</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>-o number-up=N</code></td>
<td style="text-align:left">æ¯å¼ çº¸ä¸Šæ‰“å°Né¡µ</td>
<td style="text-align:left"><code>2</code>, <code>4</code>, <code>6</code>, <code>9</code>, <code>16</code></td>
</tr>
<tr>
<td style="text-align:left"><code>-o page-border=border</code></td>
<td style="text-align:left">æ¯é¡µæ·»åŠ è¾¹æ¡†</td>
<td style="text-align:left"><code>single</code>ï¼ˆå•çº¿ï¼‰, <code>double</code>ï¼ˆåŒçº¿ï¼‰, <code>single-thick</code>ï¼ˆç²—å•çº¿ï¼‰</td>
</tr>
<tr>
<td style="text-align:left"><code>-o number-up-layout=layout</code></td>
<td style="text-align:left">å¤šé¡µæ’åˆ—é¡ºåº</td>
<td style="text-align:left"><code>lrtb</code>ï¼ˆä»å·¦åˆ°å³ï¼Œä»ä¸Šåˆ°ä¸‹ï¼‰, <code>tblr</code>ï¼ˆä»ä¸Šåˆ°ä¸‹ï¼Œä»å·¦åˆ°å³ï¼‰ç­‰</td>
</tr>
<tr>
<td style="text-align:left"><code>-o page-set=set</code></td>
<td style="text-align:left">æ‰“å°ç‰¹å®šé¡µé¢é›†</td>
<td style="text-align:left"><code>odd</code>ï¼ˆå¥‡æ•°é¡µï¼‰, <code>even</code>ï¼ˆå¶æ•°é¡µï¼‰, <code>booklet</code>ï¼ˆå°å†Œå­ï¼‰</td>
</tr>
<tr>
<td style="text-align:left"><code>-o outputorder=reverse</code></td>
<td style="text-align:left">é€†åºæ‰“å°</td>
<td style="text-align:left"><code>reverse</code></td>
</tr>
<tr>
<td style="text-align:left"><code>-o mirror</code></td>
<td style="text-align:left">é•œåƒæ‰“å°</td>
<td style="text-align:left">ï¼ˆæ— å€¼ï¼Œç›´æ¥ä½¿ç”¨ï¼‰</td>
</tr>
</tbody>
</table>
<h4 id="åŒé¢ä¸æ–¹å‘é€‰é¡¹"><a class="markdownIt-Anchor" href="#åŒé¢ä¸æ–¹å‘é€‰é¡¹"></a> åŒé¢ä¸æ–¹å‘é€‰é¡¹</h4>
<table>
<thead>
<tr>
<th style="text-align:left">é€‰é¡¹</th>
<th style="text-align:left">è¯´æ˜</th>
<th style="text-align:left">ç¤ºä¾‹å€¼</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>-o sides=option</code></td>
<td style="text-align:left">å•é¢/åŒé¢è®¾ç½®</td>
<td style="text-align:left"><code>one-sided</code>ï¼ˆå•é¢ï¼‰, <code>two-sided-long-edge</code>ï¼ˆåŒé¢é•¿è¾¹ï¼‰, <code>two-sided-short-edge</code>ï¼ˆåŒé¢çŸ­è¾¹ï¼‰</td>
</tr>
<tr>
<td style="text-align:left"><code>-o orientation-requested=N</code></td>
<td style="text-align:left">æ‰“å°æ–¹å‘</td>
<td style="text-align:left"><code>3</code>ï¼ˆçºµå‘ï¼‰, <code>4</code>ï¼ˆæ¨ªå‘é€†æ—¶é’ˆï¼‰, <code>5</code>ï¼ˆæ¨ªå‘é¡ºæ—¶é’ˆï¼‰, <code>6</code>ï¼ˆåå‘çºµå‘ï¼‰</td>
</tr>
<tr>
<td style="text-align:left"><code>-o landscape</code></td>
<td style="text-align:left">æ¨ªå‘æ‰“å°ï¼ˆç®€åŒ–ç‰ˆï¼‰</td>
<td style="text-align:left">ï¼ˆæ— å€¼ï¼Œç›´æ¥ä½¿ç”¨ï¼‰</td>
</tr>
</tbody>
</table>
<h4 id="çº¸å¼ ä¸è´¨é‡é€‰é¡¹"><a class="markdownIt-Anchor" href="#çº¸å¼ ä¸è´¨é‡é€‰é¡¹"></a> çº¸å¼ ä¸è´¨é‡é€‰é¡¹</h4>
<table>
<thead>
<tr>
<th style="text-align:left">é€‰é¡¹</th>
<th style="text-align:left">è¯´æ˜</th>
<th style="text-align:left">ç¤ºä¾‹å€¼</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>-o media=size</code></td>
<td style="text-align:left">çº¸å¼ å¤§å°</td>
<td style="text-align:left"><code>A4</code>, <code>Letter</code>, <code>Legal</code></td>
</tr>
<tr>
<td style="text-align:left"><code>-o media=size,type</code></td>
<td style="text-align:left">çº¸å¼ å¤§å°å’Œç±»å‹</td>
<td style="text-align:left"><code>A4,Transparency</code>ï¼ˆA4é€æ˜èƒ¶ç‰‡ï¼‰</td>
</tr>
<tr>
<td style="text-align:left"><code>-o media=source</code></td>
<td style="text-align:left">çº¸ç›’æ¥æº</td>
<td style="text-align:left"><code>Upper</code>ï¼ˆä¸Šçº¸ç›’ï¼‰, <code>Lower</code>ï¼ˆä¸‹çº¸ç›’ï¼‰, <code>MultiPurpose</code>ï¼ˆå¤šåŠŸèƒ½çº¸ç›’ï¼‰</td>
</tr>
<tr>
<td style="text-align:left"><code>-o print-quality=N</code></td>
<td style="text-align:left">æ‰“å°è´¨é‡</td>
<td style="text-align:left"><code>3</code>ï¼ˆè‰ç¨¿ï¼‰, <code>4</code>ï¼ˆæ ‡å‡†ï¼‰, <code>5</code>ï¼ˆæœ€ä½³ï¼‰</td>
</tr>
</tbody>
</table>
<h4 id="ç¼©æ”¾ä¸é€‚é…é€‰é¡¹"><a class="markdownIt-Anchor" href="#ç¼©æ”¾ä¸é€‚é…é€‰é¡¹"></a> ç¼©æ”¾ä¸é€‚é…é€‰é¡¹</h4>
<table>
<thead>
<tr>
<th style="text-align:left">é€‰é¡¹</th>
<th style="text-align:left">è¯´æ˜</th>
<th style="text-align:left">ç¤ºä¾‹å€¼</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>-o fit-to-page</code></td>
<td style="text-align:left">ç¼©æ”¾ä»¥é€‚åˆé¡µé¢</td>
<td style="text-align:left">ï¼ˆæ— å€¼ï¼Œç›´æ¥ä½¿ç”¨ï¼‰</td>
</tr>
<tr>
<td style="text-align:left"><code>-o scaling=N</code></td>
<td style="text-align:left">ç¼©æ”¾ç™¾åˆ†æ¯”</td>
<td style="text-align:left"><code>75</code>ï¼ˆç¼©æ”¾75%ï¼‰</td>
</tr>
</tbody>
</table>
<h4 id="å…¶ä»–é€‰é¡¹"><a class="markdownIt-Anchor" href="#å…¶ä»–é€‰é¡¹"></a> å…¶ä»–é€‰é¡¹</h4>
<table>
<thead>
<tr>
<th style="text-align:left">é€‰é¡¹</th>
<th style="text-align:left">è¯´æ˜</th>
<th style="text-align:left">ç¤ºä¾‹å€¼</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>-o collate=true</code></td>
<td style="text-align:left">é€ä»½æ‰“å°</td>
<td style="text-align:left"><code>true</code> æˆ– <code>false</code></td>
</tr>
<tr>
<td style="text-align:left"><code>-o job-sheets=name</code></td>
<td style="text-align:left">æ·»åŠ å°é¢é¡µ</td>
<td style="text-align:left"><code>standard</code>, <code>classified</code>, <code>confidential</code>, <code>topsecret</code></td>
</tr>
<tr>
<td style="text-align:left"><code>-o page-ranges=page-list</code></td>
<td style="text-align:left">æŒ‡å®šé¡µç èŒƒå›´</td>
<td style="text-align:left"><code>1-5</code>, <code>1,3,5-7</code></td>
</tr>
<tr>
<td style="text-align:left"><code>-o job-priority=priority</code></td>
<td style="text-align:left">ä»»åŠ¡ä¼˜å…ˆçº§</td>
<td style="text-align:left"><code>1</code>ï¼ˆæœ€ä½ï¼‰åˆ° <code>100</code>ï¼ˆæœ€é«˜ï¼‰</td>
</tr>
</tbody>
</table>
<h3 id="æŒ‚è½½ç¡¬ç›˜ç›’"><a class="markdownIt-Anchor" href="#æŒ‚è½½ç¡¬ç›˜ç›’"></a> æŒ‚è½½ç¡¬ç›˜ç›’</h3>
<h4 id="å®‰è£…usbå·¥å…·"><a class="markdownIt-Anchor" href="#å®‰è£…usbå·¥å…·"></a> å®‰è£…USBå·¥å…·</h4>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ›´æ–°è½¯ä»¶æº</span></span><br><span class="line"><span class="built_in">sudo</span> apt update</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®‰è£… USB åŸºç¡€å·¥å…·</span></span><br><span class="line"><span class="built_in">sudo</span> apt install usbutils usb-modeswitch</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®‰è£…æ–‡ä»¶ç³»ç»Ÿæ”¯æŒï¼ˆç”¨äºè¯†åˆ«ç¡¬ç›˜æ ¼å¼ï¼‰</span></span><br><span class="line"><span class="built_in">sudo</span> apt install ntfs-3g exfat-fuse exfat-utils</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œä¸‹é¢ä»£ç ï¼Œä¸æ˜¯æ‰€æœ‰éƒ½é€‚ç”¨</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> &gt; usb_switch.sh &lt;&lt; <span class="string">&#x27;EOF&#x27;</span></span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># USB æ¨¡å¼åˆ‡æ¢è„šæœ¬ - æ”¯æŒ host/gadget åˆ‡æ¢å¹¶è‡ªåŠ¨æŒ‚è½½/å¸è½½ç¡¬ç›˜</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é¢œè‰²å®šä¹‰</span></span><br><span class="line">RED=<span class="string">&#x27;\033[0;31m&#x27;</span></span><br><span class="line">GREEN=<span class="string">&#x27;\033[0;32m&#x27;</span></span><br><span class="line">YELLOW=<span class="string">&#x27;\033[1;33m&#x27;</span></span><br><span class="line">BLUE=<span class="string">&#x27;\033[0;34m&#x27;</span></span><br><span class="line">NC=<span class="string">&#x27;\033[0m&#x27;</span> <span class="comment"># No Color</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é…ç½®</span></span><br><span class="line">MOUNT_POINT=<span class="string">&quot;/mnt/nas&quot;</span></span><br><span class="line">USB_ROLE_FILE=<span class="string">&quot;/sys/kernel/debug/usb/ci_hdrc.0/role&quot;</span></span><br><span class="line">LOG_FILE=<span class="string">&quot;/var/log/usb_switch.log&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¾ç¤ºä½¿ç”¨æ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="title">show_usage</span></span>() &#123;</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;ç”¨æ³•: <span class="variable">$0</span> [host|gadget|status]&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;  host    - åˆ‡æ¢åˆ°ä¸»æœºæ¨¡å¼ï¼ˆè¿æ¥ç¡¬ç›˜ï¼‰å¹¶è‡ªåŠ¨æŒ‚è½½&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;  gadget  - åˆ‡æ¢åˆ°è®¾å¤‡æ¨¡å¼ï¼ˆè¿æ¥ç”µè„‘ï¼‰å¹¶è‡ªåŠ¨å¸è½½ç¡¬ç›˜&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;  status  - æ˜¾ç¤ºå½“å‰çŠ¶æ€&quot;</span></span><br><span class="line">    <span class="built_in">exit</span> 1</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ—¥å¿—å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="title">log</span></span>() &#123;</span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;<span class="subst">$(date &#x27;+%Y-%m-%d %H:%M:%S&#x27;)</span> - <span class="variable">$1</span>&quot;</span> | <span class="built_in">tee</span> -a <span class="string">&quot;<span class="variable">$LOG_FILE</span>&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ£€æŸ¥æ˜¯å¦ root</span></span><br><span class="line"><span class="function"><span class="title">check_root</span></span>() &#123;</span><br><span class="line">    <span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$EUID</span>&quot;</span> -ne 0 ]; <span class="keyword">then</span> </span><br><span class="line">        <span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;RED&#125;</span>è¯·ç”¨ sudo è¿è¡Œæ­¤è„šæœ¬<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">        <span class="built_in">exit</span> 1</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–å½“å‰æ¨¡å¼</span></span><br><span class="line"><span class="function"><span class="title">get_current_mode</span></span>() &#123;</span><br><span class="line">    <span class="keyword">if</span> [ -f <span class="string">&quot;<span class="variable">$USB_ROLE_FILE</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">cat</span> <span class="string">&quot;<span class="variable">$USB_ROLE_FILE</span>&quot;</span> 2&gt;/dev/null</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;unknown&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ£€æŸ¥ç¡¬ç›˜æ˜¯å¦å·²æŒ‚è½½</span></span><br><span class="line"><span class="function"><span class="title">is_mounted</span></span>() &#123;</span><br><span class="line">    mount | grep -q <span class="string">&quot; <span class="variable">$MOUNT_POINT</span> &quot;</span></span><br><span class="line">    <span class="built_in">return</span> $?</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥æ‰¾ç¡¬ç›˜è®¾å¤‡</span></span><br><span class="line"><span class="function"><span class="title">find_hdd</span></span>() &#123;</span><br><span class="line">    <span class="comment"># æŸ¥æ‰¾ sda æˆ– sdb ç­‰è®¾å¤‡</span></span><br><span class="line">    <span class="built_in">local</span> hdd=$(lsblk -o NAME,TYPE | grep -E <span class="string">&quot;sd[a-z][0-9]&quot;</span> | grep -v <span class="string">&quot;0B&quot;</span> | <span class="built_in">head</span> -1 | awk <span class="string">&#x27;&#123;print $1&#125;&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> [ -n <span class="string">&quot;<span class="variable">$hdd</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;/dev/<span class="variable">$hdd</span>&quot;</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŒ‚è½½ç¡¬ç›˜</span></span><br><span class="line"><span class="function"><span class="title">mount_hdd</span></span>() &#123;</span><br><span class="line">    <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;YELLOW&#125;</span>å°è¯•æŒ‚è½½ç¡¬ç›˜...<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># åˆ›å»ºæŒ‚è½½ç‚¹</span></span><br><span class="line">    <span class="built_in">mkdir</span> -p <span class="string">&quot;<span class="variable">$MOUNT_POINT</span>&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># æŸ¥æ‰¾ç¡¬ç›˜</span></span><br><span class="line">    HDD_DEV=$(find_hdd)</span><br><span class="line">    <span class="keyword">if</span> [ -z <span class="string">&quot;<span class="variable">$HDD_DEV</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;RED&#125;</span>æœªæ‰¾åˆ°ç¡¬ç›˜è®¾å¤‡<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">        <span class="built_in">return</span> 1</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">log</span> <span class="string">&quot;æ‰¾åˆ°ç¡¬ç›˜è®¾å¤‡: <span class="variable">$HDD_DEV</span>&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># è·å–æ–‡ä»¶ç³»ç»Ÿç±»å‹</span></span><br><span class="line">    FSTYPE=$(lsblk -o NAME,FSTYPE | grep <span class="string">&quot;<span class="subst">$(basename $HDD_DEV)</span>&quot;</span> | awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span>)</span><br><span class="line">    <span class="built_in">log</span> <span class="string">&quot;æ–‡ä»¶ç³»ç»Ÿç±»å‹: <span class="variable">$&#123;FSTYPE:-æœªçŸ¥&#125;</span>&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># å°è¯•æŒ‚è½½</span></span><br><span class="line">    <span class="keyword">if</span> [ -n <span class="string">&quot;<span class="variable">$FSTYPE</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;<span class="variable">$FSTYPE</span>&quot;</span> <span class="keyword">in</span></span><br><span class="line">            ntfs|NTFS)</span><br><span class="line">                mount -t ntfs-3g <span class="string">&quot;<span class="variable">$HDD_DEV</span>&quot;</span> <span class="string">&quot;<span class="variable">$MOUNT_POINT</span>&quot;</span> 2&gt;/dev/null</span><br><span class="line">                ;;</span><br><span class="line">            exfat|EXFAT)</span><br><span class="line">                mount -t exfat <span class="string">&quot;<span class="variable">$HDD_DEV</span>&quot;</span> <span class="string">&quot;<span class="variable">$MOUNT_POINT</span>&quot;</span> 2&gt;/dev/null</span><br><span class="line">                ;;</span><br><span class="line">            ext4|ext3|ext2)</span><br><span class="line">                mount <span class="string">&quot;<span class="variable">$HDD_DEV</span>&quot;</span> <span class="string">&quot;<span class="variable">$MOUNT_POINT</span>&quot;</span> 2&gt;/dev/null</span><br><span class="line">                ;;</span><br><span class="line">            *)</span><br><span class="line">                mount <span class="string">&quot;<span class="variable">$HDD_DEV</span>&quot;</span> <span class="string">&quot;<span class="variable">$MOUNT_POINT</span>&quot;</span> 2&gt;/dev/null</span><br><span class="line">                ;;</span><br><span class="line">        <span class="keyword">esac</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="comment"># å°è¯•è‡ªåŠ¨æ£€æµ‹</span></span><br><span class="line">        mount <span class="string">&quot;<span class="variable">$HDD_DEV</span>&quot;</span> <span class="string">&quot;<span class="variable">$MOUNT_POINT</span>&quot;</span> 2&gt;/dev/null || \</span><br><span class="line">        mount -t ntfs-3g <span class="string">&quot;<span class="variable">$HDD_DEV</span>&quot;</span> <span class="string">&quot;<span class="variable">$MOUNT_POINT</span>&quot;</span> 2&gt;/dev/null || \</span><br><span class="line">        mount -t exfat <span class="string">&quot;<span class="variable">$HDD_DEV</span>&quot;</span> <span class="string">&quot;<span class="variable">$MOUNT_POINT</span>&quot;</span> 2&gt;/dev/null</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> [ $? -eq 0 ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;GREEN&#125;</span>ç¡¬ç›˜æŒ‚è½½æˆåŠŸåˆ° $MOUNT_POINT<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># è®¾ç½®æƒé™</span></span><br><span class="line">        <span class="built_in">chmod</span> 777 <span class="string">&quot;<span class="variable">$MOUNT_POINT</span>&quot;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># æ˜¾ç¤ºæŒ‚è½½ä¿¡æ¯</span></span><br><span class="line">        <span class="built_in">df</span> -h <span class="string">&quot;<span class="variable">$MOUNT_POINT</span>&quot;</span> | <span class="built_in">tail</span> -1</span><br><span class="line">        <span class="built_in">return</span> 0</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;RED&#125;</span>ç¡¬ç›˜æŒ‚è½½å¤±è´¥<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">        <span class="built_in">return</span> 1</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¸è½½ç¡¬ç›˜</span></span><br><span class="line"><span class="function"><span class="title">umount_hdd</span></span>() &#123;</span><br><span class="line">    <span class="keyword">if</span> is_mounted; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;YELLOW&#125;</span>å¸è½½ç¡¬ç›˜ <span class="variable">$MOUNT_POINT</span>...<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">        umount <span class="string">&quot;<span class="variable">$MOUNT_POINT</span>&quot;</span></span><br><span class="line">        <span class="keyword">if</span> [ $? -eq 0 ]; <span class="keyword">then</span></span><br><span class="line">            <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;GREEN&#125;</span>ç¡¬ç›˜å¸è½½æˆåŠŸ<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;RED&#125;</span>ç¡¬ç›˜å¸è½½å¤±è´¥ï¼Œå¯èƒ½æ­£åœ¨è¢«ä½¿ç”¨<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">            <span class="comment"># å¼ºåˆ¶å¸è½½</span></span><br><span class="line">            <span class="built_in">log</span> <span class="string">&quot;å°è¯•å¼ºåˆ¶å¸è½½...&quot;</span></span><br><span class="line">            umount -l <span class="string">&quot;<span class="variable">$MOUNT_POINT</span>&quot;</span> &amp;&amp; <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;GREEN&#125;</span>å¼ºåˆ¶å¸è½½æˆåŠŸ<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;BLUE&#125;</span>ç¡¬ç›˜æœªæŒ‚è½½<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ‡æ¢åˆ° host æ¨¡å¼</span></span><br><span class="line"><span class="function"><span class="title">switch_to_host</span></span>() &#123;</span><br><span class="line">    <span class="built_in">local</span> current=$(get_current_mode)</span><br><span class="line">    <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;BLUE&#125;</span>å½“å‰æ¨¡å¼: <span class="variable">$current</span> -&gt; ç›®æ ‡æ¨¡å¼: host<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$current</span>&quot;</span> = <span class="string">&quot;host&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;YELLOW&#125;</span>å·²ç»æ˜¯ host æ¨¡å¼<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="comment"># å…ˆå¸è½½å¯èƒ½åŠ è½½çš„ gadget é©±åŠ¨</span></span><br><span class="line">        modprobe -r g_serial g_ether g_mass_storage usb_f_* libcomposite 2&gt;/dev/null</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># åˆ‡æ¢åˆ° host</span></span><br><span class="line">        <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;YELLOW&#125;</span>åˆ‡æ¢åˆ° host æ¨¡å¼...<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;host&quot;</span> &gt; <span class="string">&quot;<span class="variable">$USB_ROLE_FILE</span>&quot;</span></span><br><span class="line">        <span class="built_in">sleep</span> 3</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># é‡æ–°åŠ è½½å­˜å‚¨é©±åŠ¨</span></span><br><span class="line">        modprobe usb-storage</span><br><span class="line">        modprobe uas</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># é‡æ–°æ‰«æ SCSI æ€»çº¿</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;- - -&quot;</span> &gt; /sys/class/scsi_host/host0/scan 2&gt;/dev/null</span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;- - -&quot;</span> &gt; /sys/class/scsi_host/host1/scan 2&gt;/dev/null</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">sleep</span> 2</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">local</span> new=$(get_current_mode)</span><br><span class="line">        <span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$new</span>&quot;</span> = <span class="string">&quot;host&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">            <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;GREEN&#125;</span>åˆ‡æ¢åˆ° host æ¨¡å¼æˆåŠŸ<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;RED&#125;</span>åˆ‡æ¢åˆ° host æ¨¡å¼å¤±è´¥ï¼Œå½“å‰æ¨¡å¼: $new<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">            <span class="built_in">return</span> 1</span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># æŒ‚è½½ç¡¬ç›˜</span></span><br><span class="line">    mount_hdd</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># æ˜¾ç¤ºæœ€ç»ˆçŠ¶æ€</span></span><br><span class="line">    show_status</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ‡æ¢åˆ° gadget æ¨¡å¼</span></span><br><span class="line"><span class="function"><span class="title">switch_to_gadget</span></span>() &#123;</span><br><span class="line">    <span class="built_in">local</span> current=$(get_current_mode)</span><br><span class="line">    <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;BLUE&#125;</span>å½“å‰æ¨¡å¼: <span class="variable">$current</span> -&gt; ç›®æ ‡æ¨¡å¼: gadget<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># å…ˆå¸è½½ç¡¬ç›˜</span></span><br><span class="line">    umount_hdd</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$current</span>&quot;</span> = <span class="string">&quot;gadget&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;YELLOW&#125;</span>å·²ç»æ˜¯ gadget æ¨¡å¼<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="comment"># å¸è½½å­˜å‚¨é©±åŠ¨</span></span><br><span class="line">        modprobe -r usb-storage uas 2&gt;/dev/null</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># åˆ‡æ¢åˆ° gadget</span></span><br><span class="line">        <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;YELLOW&#125;</span>åˆ‡æ¢åˆ° gadget æ¨¡å¼...<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;gadget&quot;</span> &gt; <span class="string">&quot;<span class="variable">$USB_ROLE_FILE</span>&quot;</span></span><br><span class="line">        <span class="built_in">sleep</span> 2</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">local</span> new=$(get_current_mode)</span><br><span class="line">        <span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$new</span>&quot;</span> = <span class="string">&quot;gadget&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">            <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;GREEN&#125;</span>åˆ‡æ¢åˆ° gadget æ¨¡å¼æˆåŠŸ<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">            </span><br><span class="line">            <span class="comment"># åŠ è½½å¸¸ç”¨çš„ gadget åŠŸèƒ½</span></span><br><span class="line">            modprobe g_serial 2&gt;/dev/null  <span class="comment"># USB ä¸²å£</span></span><br><span class="line">            modprobe g_ether 2&gt;/dev/null   <span class="comment"># USB ç½‘ç»œ</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;RED&#125;</span>åˆ‡æ¢åˆ° gadget æ¨¡å¼å¤±è´¥ï¼Œå½“å‰æ¨¡å¼: $new<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">            <span class="comment"># å°è¯•å¼ºåˆ¶åˆ‡æ¢</span></span><br><span class="line">            <span class="built_in">log</span> <span class="string">&quot;å°è¯•å¼ºåˆ¶åˆ‡æ¢...&quot;</span></span><br><span class="line">            modprobe -r ci_hdrc 2&gt;/dev/null</span><br><span class="line">            modprobe ci_hdrc</span><br><span class="line">            <span class="built_in">echo</span> <span class="string">&quot;gadget&quot;</span> &gt; <span class="string">&quot;<span class="variable">$USB_ROLE_FILE</span>&quot;</span> 2&gt;/dev/null</span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># æ˜¾ç¤ºæœ€ç»ˆçŠ¶æ€</span></span><br><span class="line">    show_status</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¾ç¤ºçŠ¶æ€</span></span><br><span class="line"><span class="function"><span class="title">show_status</span></span>() &#123;</span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;\n<span class="variable">$&#123;BLUE&#125;</span>=== USB çŠ¶æ€ ===<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># USB è§’è‰²</span></span><br><span class="line">    <span class="built_in">local</span> role=$(get_current_mode)</span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;USB æ¨¡å¼: <span class="variable">$&#123;GREEN&#125;</span>$role<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># ç¡¬ç›˜è®¾å¤‡</span></span><br><span class="line">    <span class="built_in">local</span> hdd=$(lsblk -o NAME,SIZE,MODEL | grep -E <span class="string">&quot;sd[a-z]&quot;</span> | <span class="built_in">head</span> -3)</span><br><span class="line">    <span class="keyword">if</span> [ -n <span class="string">&quot;<span class="variable">$hdd</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> -e <span class="string">&quot;\n<span class="variable">$&#123;BLUE&#125;</span>ç¡¬ç›˜è®¾å¤‡:<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$hdd</span>&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># æŒ‚è½½çŠ¶æ€</span></span><br><span class="line">    <span class="keyword">if</span> is_mounted; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> -e <span class="string">&quot;\n<span class="variable">$&#123;GREEN&#125;</span>ç¡¬ç›˜å·²æŒ‚è½½åˆ° $MOUNT_POINT<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">        <span class="built_in">df</span> -h <span class="string">&quot;<span class="variable">$MOUNT_POINT</span>&quot;</span> | <span class="built_in">tail</span> -1</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> -e <span class="string">&quot;\n<span class="variable">$&#123;YELLOW&#125;</span>ç¡¬ç›˜æœªæŒ‚è½½<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># USB æ§åˆ¶å™¨ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">if</span> [ -d <span class="string">&quot;/sys/kernel/debug/usb/ci_hdrc.0&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> -e <span class="string">&quot;\n<span class="variable">$&#123;BLUE&#125;</span>USB æ§åˆ¶å™¨:<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">        <span class="built_in">ls</span> /sys/kernel/debug/usb/ci_hdrc.0/ 2&gt;/dev/null | <span class="built_in">head</span> -5</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸»å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="title">main</span></span>() &#123;</span><br><span class="line">    check_root</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;<span class="variable">$1</span>&quot;</span> <span class="keyword">in</span></span><br><span class="line">        host)</span><br><span class="line">            switch_to_host</span><br><span class="line">            ;;</span><br><span class="line">        gadget)</span><br><span class="line">            switch_to_gadget</span><br><span class="line">            ;;</span><br><span class="line">        status)</span><br><span class="line">            show_status</span><br><span class="line">            ;;</span><br><span class="line">        *)</span><br><span class="line">            show_usage</span><br><span class="line">            ;;</span><br><span class="line">    <span class="keyword">esac</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰§è¡Œä¸»å‡½æ•°</span></span><br><span class="line">main <span class="string">&quot;<span class="variable">$@</span>&quot;</span></span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>
<h4 id="ä½¿ç”¨æ–¹å¼"><a class="markdownIt-Anchor" href="#ä½¿ç”¨æ–¹å¼"></a> ğŸ¯ ä½¿ç”¨æ–¹å¼</h4>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç»™è„šæœ¬æ·»åŠ æ‰§è¡Œæƒé™</span></span><br><span class="line"><span class="built_in">chmod</span> +x usb_switch.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ‡æ¢åˆ° host æ¨¡å¼ï¼ˆæ¥ç¡¬ç›˜ï¼‰å¹¶è‡ªåŠ¨æŒ‚è½½</span></span><br><span class="line"><span class="built_in">sudo</span> ./usb_switch.sh host</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ‡æ¢åˆ° gadget æ¨¡å¼ï¼ˆæ¥ç”µè„‘ï¼‰å¹¶è‡ªåŠ¨å¸è½½</span></span><br><span class="line"><span class="built_in">sudo</span> ./usb_switch.sh gadget</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹å½“å‰çŠ¶æ€</span></span><br><span class="line"><span class="built_in">sudo</span> ./usb_switch.sh status</span><br></pre></td></tr></table></figure>
<h4 id="å®‰è£…åˆ°ç³»ç»Ÿè·¯å¾„æ–¹ä¾¿ä½¿ç”¨"><a class="markdownIt-Anchor" href="#å®‰è£…åˆ°ç³»ç»Ÿè·¯å¾„æ–¹ä¾¿ä½¿ç”¨"></a> ğŸš€ å®‰è£…åˆ°ç³»ç»Ÿè·¯å¾„ï¼ˆæ–¹ä¾¿ä½¿ç”¨ï¼‰</h4>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¤åˆ¶åˆ°ç³»ç»Ÿè·¯å¾„</span></span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">cp</span> usb_switch.sh /usr/local/bin/usb-switch</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç»™æ‰€æœ‰äººæ‰§è¡Œæƒé™</span></span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">chmod</span> +x /usr/local/bin/usb-switch</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç°åœ¨å¯ä»¥ç›´æ¥è¿è¡Œäº†</span></span><br><span class="line"><span class="comment"># 1. åˆ‡æ¢åˆ° host æ¨¡å¼ï¼ˆæ¥ç¡¬ç›˜ï¼‰å¹¶è‡ªåŠ¨æŒ‚è½½</span></span><br><span class="line"><span class="built_in">sudo</span> usb-switch host</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. åˆ‡æ¢åˆ° gadget æ¨¡å¼ï¼ˆæ¥ç”µè„‘ï¼‰å¹¶è‡ªåŠ¨å¸è½½</span></span><br><span class="line"><span class="built_in">sudo</span> usb-switch gadget</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. æŸ¥çœ‹å½“å‰çŠ¶æ€</span></span><br><span class="line"><span class="built_in">sudo</span> usb-switch status</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4. åªæŒ‚è½½ç¡¬ç›˜ï¼ˆä¸åˆ‡æ¢æ¨¡å¼ï¼‰- å¦‚æœç¡¬ç›˜æ²¡æŒ‚ä¸Šæ—¶ç”¨</span></span><br><span class="line"><span class="built_in">sudo</span> usb-switch mount</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5. åªå¸è½½ç¡¬ç›˜ï¼ˆä¸åˆ‡æ¢æ¨¡å¼ï¼‰- æƒ³æ‰‹åŠ¨å¸è½½æ—¶ç”¨</span></span><br><span class="line"><span class="built_in">sudo</span> usb-switch umount</span><br></pre></td></tr></table></figure>
<h4 id="è„šæœ¬åŠŸèƒ½è¯´æ˜"><a class="markdownIt-Anchor" href="#è„šæœ¬åŠŸèƒ½è¯´æ˜"></a> ğŸ“‹ è„šæœ¬åŠŸèƒ½è¯´æ˜</h4>
<p>è¿™ä¸ªè„šæœ¬ä¼šè‡ªåŠ¨ï¼š</p>
<ol>
<li><strong>åˆ‡æ¢æ¨¡å¼æ—¶</strong>ï¼š
<ul>
<li>æ£€æŸ¥å½“å‰æ¨¡å¼</li>
<li>å¸è½½/åŠ è½½å¿…è¦çš„é©±åŠ¨</li>
<li>æ‰§è¡Œæ¨¡å¼åˆ‡æ¢</li>
</ul>
</li>
<li><strong>host æ¨¡å¼ä¸‹</strong>ï¼š
<ul>
<li>è‡ªåŠ¨æ‰«æå¹¶è¯†åˆ«ç¡¬ç›˜</li>
<li>è‡ªåŠ¨æŒ‚è½½åˆ° <code>/mnt/nas</code></li>
<li>è®¾ç½®é€‚å½“çš„æƒé™</li>
</ul>
</li>
<li><strong>gadget æ¨¡å¼ä¸‹</strong>ï¼š
<ul>
<li>è‡ªåŠ¨å¸è½½ç¡¬ç›˜</li>
<li>åŠ è½½å¸¸ç”¨çš„ gadget åŠŸèƒ½ï¼ˆä¸²å£ã€ç½‘ç»œï¼‰</li>
</ul>
</li>
<li><strong>çŠ¶æ€æ˜¾ç¤º</strong>ï¼š
<ul>
<li>æ˜¾ç¤ºå½“å‰ USB æ¨¡å¼</li>
<li>æ˜¾ç¤ºç¡¬ç›˜è®¾å¤‡ä¿¡æ¯</li>
<li>æ˜¾ç¤ºæŒ‚è½½çŠ¶æ€</li>
</ul>
</li>
</ol>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹æŒ‚è½½ç¡¬ç›˜</span></span><br><span class="line">lsblk</span><br></pre></td></tr></table></figure>
<h3 id=""><a class="markdownIt-Anchor" href="#"></a> </h3>

      
    </div>
    <div class="article-footer">
      <blockquote class="mt-2x">
  <ul class="post-copyright list-unstyled">
    <!-- 
    <li class="post-copyright-link hidden-xs">
      <strong>æœ¬æ–‡é“¾æ¥ï¼š</strong>
      <a href="" title="" target="_blank" rel="external"></a>
    </li>
     -->
    <li class="post-copyright-license">
      <strong>ç‰ˆæƒå£°æ˜ï¼š </strong> æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external">CC BY 4.0 CNåè®®</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼
    </li>
  </ul>
</blockquote>


<div class="panel panel-default panel-badger">
  <div class="panel-body">
    <figure class="media">
      <div class="media-left">
        <a href="https://github.com/IMOUYO" target="_blank" class="img-burn thumb-sm visible-lg">
          <img src="/images/avatar.gif" class="img-rounded w-full" alt="">
        </a>
      </div>
      <div class="media-body">
        <h3 class="media-heading"><a href="https://github.com/IMOUYO" target="_blank"><span class="text-dark">makabaka</span><small class="ml-1x"></small></a></h3>
        <div></div>
      </div>
    </figure>
  </div>
</div>


    </div>
  </article>
  
    
  <section id="comments">
  	
           
    
  </section>


  
</div>

  <nav class="bar bar-footer clearfix" data-stick-bottom>
  <div class="bar-inner">
  
  <ul class="pager pull-left">
    
    <li class="prev">
      <a href="/2026/02/24/OpenStick-ARM%E8%AE%BE%E5%A4%87%E5%A4%96%E6%8E%A5%E7%A1%AC%E7%9B%98%E7%9B%92%E5%AE%8C%E5%85%A8%E6%94%BB%E7%95%A5/" title="OpenStick/ARMè®¾å¤‡å¤–æ¥ç¡¬ç›˜ç›’å®Œå…¨æ”»ç•¥"><i class="icon icon-angle-left" aria-hidden="true"></i><span>&nbsp;&nbsp;Newer</span></a>
    </li>
    
    
    <li class="next">
      <a href="/2026/02/22/Questions/" title="Questions"><span>Older&nbsp;&nbsp;</span><i class="icon icon-angle-right" aria-hidden="true"></i></a>
    </li>
    
    
  </ul>
  
  
  
  <div class="bar-right">
    
    <div class="share-component" data-sites="weibo,qq,wechat,facebook,twitter" data-mobile-sites="weibo,qq,qzone"></div>
    
  </div>
  </div>
</nav>
  


</main>
<!-- æµ‹è¯•æ ‡è®°ï¼šçœ‹è¿™ä¸ªä¼šä¸ä¼šå‡ºç°åœ¨ç”Ÿæˆçš„HTMLä¸­ -->
<!-- PARTIAL_IMAGE_FIXER_START -->
<script>
    (function() {
  // é…ç½®é€‰é¡¹
  const config = {
    // éœ€è¦æ›¿æ¢çš„è·¯å¾„è§„åˆ™
    rules: [
      {
        pattern: '^éšèº«wifiåˆ·linux/',           // åŒ¹é…ä»¥ /images/ å¼€å¤´çš„è·¯å¾„
        replace: ''       // æ›¿æ¢ä¸º /assets/images/
      },
      {
        pattern: '^%E9%9A%8F%E8%BA%ABwifi%E5%88%B7linux/',   //è§£å†³ä¸­æ–‡é—®é¢˜
        replace: ''
      }
    ],
    // æ’é™¤å¤–éƒ¨é“¾æ¥
    excludeExternal: true,
    // æ˜¯å¦æ˜¾ç¤ºè°ƒè¯•ä¿¡æ¯
    debug: true
  };
  
  // æ‰§è¡Œä¿®æ”¹
  function fixImagePaths() {
    const images = document.getElementsByTagName('img');
    
    for (let img of images) {
      let src = img.getAttribute('src');
      
      // è·³è¿‡ç©ºå€¼
      if (!src) continue;
      
      // è·³è¿‡å¤–éƒ¨é“¾æ¥ï¼ˆå¦‚æœé…ç½®æ’é™¤ï¼‰
      if (config.excludeExternal && src.match(/^(https?:)?\/\//)) continue;
      
      let originalSrc = src;
      
      // åº”ç”¨æ‰€æœ‰æ›¿æ¢è§„åˆ™
      for (let rule of config.rules) {
        const regex = new RegExp(rule.pattern);
        if (regex.test(src)) {
          src = src.replace(regex, rule.replace);
        }
      }
      
      // å¦‚æœè·¯å¾„æ”¹å˜äº†ï¼Œæ›´æ–°å›¾ç‰‡ src
      if (src !== originalSrc) {
        img.src = src;
        if (config.debug) {
          console.log('âœ… å›¾ç‰‡è·¯å¾„å·²ä¿®æ”¹:', originalSrc, 'â†’', src);
        }
      }
    }
  }
  
  // åœ¨å¤šä¸ªæ—¶æœºæ‰§è¡Œï¼Œç¡®ä¿ä¿®æ”¹ç”Ÿæ•ˆ
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', fixImagePaths);
  } else {
    fixImagePaths();
  }
  
  // å¦‚æœæ˜¯ SPA æˆ–æœ‰åŠ¨æ€åŠ è½½çš„å†…å®¹ï¼Œå¯ä»¥ç›‘å¬ DOM å˜åŒ–
  const observer = new MutationObserver(function(mutations) {
    mutations.forEach(function(mutation) {
      if (mutation.addedNodes.length) {
        fixImagePaths();
      }
    });
  });
  
  observer.observe(document.body, {
    childList: true,
    subtree: true
  });
  
})();
</script>
<!-- PARTIAL_IMAGE_FIXER_END -->
  <footer class="footer" itemscope itemtype="http://schema.org/WPFooter">
	
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/cofess" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
    </ul>

    <div class="copyright">
    	
        <div class="publishby">
        	Theme by <a href="https://github.com/cofess" target="_blank"> cofess </a>base on <a href="https://github.com/cofess/hexo-theme-pure" target="_blank">pure</a>.
        </div>
    </div>
</footer>
  <script src="//cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
<script>
window.jQuery || document.write('<script src="js/jquery.min.js"><\/script>')
</script>

<script src="/js/plugin.min.js"></script>


<script src="/js/application.js"></script>


    <script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>

<script src="/js/insight.js"></script>






   




   
    
  <!-- <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css"> -->
  <script src="//cdn.jsdelivr.net/npm/gitalk@1.6.2/dist/gitalk.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/blueimp-md5@2.10.0/js/md5.min.js"></script>
  <script type="text/javascript">
  var gitalk = new Gitalk({
    clientID: 'Ov23li41op8ra6ULwVKH',
    clientSecret: '8637d8e4da9dee4d4ab44fff1c11f554fe5251f7',
    repo: 'gitalk-comments',
    owner: 'IMOUYO',
    admin: ['IMOUYO'],
    id: md5(location.pathname),
    distractionFreeMode: true,
    language: 'zh-CN',
    enableHotKey: 'true'
  })
  gitalk.render('comments')
  </script>
      







  <script src="/js/toc.js"></script>
</body>
</html>