<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <author>
    <name>John Doe</name>
  </author>
  <generator uri="https://hexo.io/">Hexo</generator>
  <id>https://imouyo.github.io/</id>
  <link href="https://imouyo.github.io/" rel="alternate"/>
  <link href="https://imouyo.github.io/atom.xml" rel="self"/>
  <rights>All rights reserved 2026, John Doe</rights>
  <title>Hexo</title>
  <updated>2026-02-24T16:07:32.676Z</updated>
  <entry>
    <author>
      <name>John Doe</name>
    </author>
    <category term="DIY" scheme="https://imouyo.github.io/tags/DIY/"/>
    <content>
      <![CDATA[<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¿›å…¥ä½ çš„ USB è®¾å¤‡ï¼ˆå‡è®¾è¿˜æ˜¯åŸæ¥çš„è·¯å¾„ï¼‰</span></span><br><span class="line"><span class="built_in">cd</span> /mnt/usb</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»º Jellyfin ç›®å½•</span></span><br><span class="line"><span class="built_in">mkdir</span> -p jellyfin/&#123;config,cache&#125;</span><br><span class="line"><span class="built_in">mkdir</span> -p media/&#123;movies,tv,music&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹å½“å‰ç”¨æˆ· IDï¼ˆç­‰ä¸‹è¦ç”¨ï¼‰</span></span><br><span class="line"><span class="built_in">id</span></span><br></pre></td></tr></table></figure>]]>
    </content>
    <id>https://imouyo.github.io/2026/02/25/OpenStick%E5%AE%89%E8%A3%85Jellyfin/</id>
    <link href="https://imouyo.github.io/2026/02/25/OpenStick%E5%AE%89%E8%A3%85Jellyfin/"/>
    <published>2026-02-24T16:06:20.000Z</published>
    <summary>
      <![CDATA[<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="l]]>
    </summary>
    <title>OpenStickå®‰è£…Jellyfin</title>
    <updated>2026-02-24T16:07:32.676Z</updated>
  </entry>
  <entry>
    <author>
      <name>John Doe</name>
    </author>
    <category term="DIY" scheme="https://imouyo.github.io/tags/DIY/"/>
    <content>
      <![CDATA[<blockquote><p>æœ¬æ–‡æ¡£è®°å½•äº†åœ¨OpenStickï¼ˆARM64è®¾å¤‡ï¼‰ä¸Šä»é›¶å¼€å§‹è¿æ¥ã€è¯†åˆ«å¹¶æŒ‚è½½å¤–ç½®ç¡¬ç›˜ç›’çš„å…¨è¿‡ç¨‹ï¼Œç‰¹åˆ«é€‚ç”¨äº<strong>åªæœ‰ä¸€ä¸ªMicro USBå£</strong>çš„ç”µè§†æ£’/å¼€å‘æ¿ã€‚</p><p><em>æ”»ç•¥ä½œè€…ï¼š<a href="https://github.com/IMOUYO">Imakabaka</a></em><br /><em>æŠ€æœ¯æŒ‡å¯¼ï¼šDeepSeek AIåŠ©æ‰‹</em><br /><em>è”ç³»æˆ‘ğŸ‘‰ï¼šwangyimail20230608@163.com</em></p></blockquote><h2 id="ç›®å½•"><a class="markdownIt-Anchor" href="#ç›®å½•"></a> ğŸ“– ç›®å½•</h2><ul><li>èƒŒæ™¯æ•…äº‹</li><li>é—®é¢˜åˆ†æ</li><li>å®Œæ•´è§£å†³æ­¥éª¤</li><li>å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</li><li>æ—¥å¸¸ä½¿ç”¨æŒ‡å—</li><li>å‚è€ƒèµ„æ–™</li></ul><h2 id="èƒŒæ™¯æ•…äº‹"><a class="markdownIt-Anchor" href="#èƒŒæ™¯æ•…äº‹"></a> ğŸ¯ èƒŒæ™¯æ•…äº‹</h2><p>æˆ‘æœ‰ä¸€ä¸ªOpenStickï¼ˆç”µè§†æ£’åˆ·çš„Debianç³»ç»Ÿï¼‰ï¼Œåªæœ‰ä¸€ä¸ªMicro USBå£ï¼Œæƒ³ç”¨å®ƒè¿æ¥å¤–éƒ¨ç¡¬ç›˜ç›’åšNASã€‚ç¡¬ç›˜ç›’æ˜¯<strong>ç‹¬ç«‹12Vä¾›ç”µ</strong>çš„3.5è‹±å¯¸ç¡¬ç›˜ç›’ï¼Œé€šè¿‡USBè½¬Micro USBçº¿è¿æ¥è®¾å¤‡ã€‚</p><p><strong>è®¾å¤‡é…ç½®ï¼š</strong></p><ul><li>ç³»ç»Ÿï¼šDebian ARM64 (aarch64)</li><li>å­˜å‚¨ï¼š3.6GB SDå¡ï¼ˆæ ¹åˆ†åŒºä»…3.3GBï¼‰</li><li>å†…å­˜ï¼š512MB RAM + 191MB SWAP</li><li>æ¥å£ï¼šå”¯ä¸€Micro USBå£</li></ul><h2 id="é—®é¢˜åˆ†æ"><a class="markdownIt-Anchor" href="#é—®é¢˜åˆ†æ"></a> ğŸ” é—®é¢˜åˆ†æ</h2><h3 id="è¡¨é¢ç°è±¡"><a class="markdownIt-Anchor" href="#è¡¨é¢ç°è±¡"></a> è¡¨é¢ç°è±¡</h3><ol><li>æ’å…¥ç¡¬ç›˜ç›’åï¼Œ<code>lsusb</code> å‘½ä»¤ä¸å­˜åœ¨</li><li><code>lsblk</code> çœ‹ä¸åˆ°ä»»ä½• <code>/dev/sd*</code> è®¾å¤‡</li><li><code>dmesg</code> æ—¥å¿—æ˜¾ç¤º AppArmor é˜»æ­¢ USB è®¿é—®</li></ol><h3 id="æ ¹æœ¬åŸå› "><a class="markdownIt-Anchor" href="#æ ¹æœ¬åŸå› "></a> æ ¹æœ¬åŸå› </h3><ol><li><strong>ç³»ç»Ÿæåº¦ç²¾ç®€</strong>ï¼šè¿åŸºç¡€USBå·¥å…·éƒ½æ²¡è£…</li><li><strong>USBé»˜è®¤æ˜¯deviceæ¨¡å¼</strong>ï¼šMicro USBå£è®¾è®¡ä¸ºè¿æ¥ç”µè„‘åˆ·æœºï¼Œä¸æ˜¯æ¥å¤–è®¾</li><li><strong>AppArmorå®‰å…¨æ¨¡å—é™åˆ¶</strong>ï¼šé˜»æ­¢CUPSç­‰æœåŠ¡è®¿é—®USBè®¾å¤‡</li><li><strong>USBæ§åˆ¶å™¨é©±åŠ¨æœªæ­£ç¡®åŠ è½½</strong>ï¼šéœ€è¦æ‰‹åŠ¨åˆ‡æ¢æ¨¡å¼</li></ol><h2 id="ï¸-å®Œæ•´è§£å†³æ­¥éª¤"><a class="markdownIt-Anchor" href="#ï¸-å®Œæ•´è§£å†³æ­¥éª¤"></a> ğŸ› ï¸ å®Œæ•´è§£å†³æ­¥éª¤</h2><h3 id="ç¬¬ä¸€é˜¶æ®µåŸºç¡€ç¯å¢ƒå‡†å¤‡"><a class="markdownIt-Anchor" href="#ç¬¬ä¸€é˜¶æ®µåŸºç¡€ç¯å¢ƒå‡†å¤‡"></a> ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€ç¯å¢ƒå‡†å¤‡</h3><h4 id="11-å®‰è£…å¿…è¦å·¥å…·"><a class="markdownIt-Anchor" href="#11-å®‰è£…å¿…è¦å·¥å…·"></a> 1.1 å®‰è£…å¿…è¦å·¥å…·</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ›´æ–°è½¯ä»¶æº</span></span><br><span class="line"><span class="built_in">sudo</span> apt update</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®‰è£…USBåŸºç¡€å·¥å…·</span></span><br><span class="line"><span class="built_in">sudo</span> apt install usbutils usb-modeswitch</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®‰è£…æ–‡ä»¶ç³»ç»Ÿæ”¯æŒï¼ˆç”¨äºè¯†åˆ«ç¡¬ç›˜æ ¼å¼ï¼‰</span></span><br><span class="line"><span class="built_in">sudo</span> apt install ntfs-3g exfat-fuse exfat-utils</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®‰è£…å…¶ä»–æœ‰ç”¨å·¥å…·</span></span><br><span class="line"><span class="built_in">sudo</span> apt install hdparm smartmontools</span><br></pre></td></tr></table></figure><h3 id="ç¬¬äºŒé˜¶æ®µè¯†åˆ«usbæ§åˆ¶å™¨"><a class="markdownIt-Anchor" href="#ç¬¬äºŒé˜¶æ®µè¯†åˆ«usbæ§åˆ¶å™¨"></a> ç¬¬äºŒé˜¶æ®µï¼šè¯†åˆ«USBæ§åˆ¶å™¨</h3><h4 id="21-æŸ¥çœ‹usbæ§åˆ¶å™¨çŠ¶æ€"><a class="markdownIt-Anchor" href="#21-æŸ¥çœ‹usbæ§åˆ¶å™¨çŠ¶æ€"></a> 2.1 æŸ¥çœ‹USBæ§åˆ¶å™¨çŠ¶æ€</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹USBè®¾å¤‡æ§åˆ¶å™¨</span></span><br><span class="line"><span class="built_in">ls</span> /sys/class/udc/</span><br><span class="line"><span class="comment"># çœ‹åˆ° ci_hdrc.0 è¯´æ˜USBæ§åˆ¶å™¨å­˜åœ¨</span></span><br></pre></td></tr></table></figure><h4 id="22-ç¡®è®¤usbè®¾è®¡æ¨¡å¼"><a class="markdownIt-Anchor" href="#22-ç¡®è®¤usbè®¾è®¡æ¨¡å¼"></a> 2.2 ç¡®è®¤USBè®¾è®¡æ¨¡å¼</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹è®¾å¤‡æ ‘ä¸­USBçš„é…ç½®</span></span><br><span class="line"><span class="built_in">cat</span> /sys/firmware/devicetree/base/soc/usb@78d9000/dr_mode</span><br><span class="line"><span class="comment"># æ˜¾ç¤º &quot;otg&quot; è¯´æ˜ç¡¬ä»¶æ”¯æŒOTGæ¨¡å¼åˆ‡æ¢</span></span><br></pre></td></tr></table></figure><h3 id="ç¬¬ä¸‰é˜¶æ®µæ‰‹åŠ¨åˆ‡æ¢usbæ¨¡å¼"><a class="markdownIt-Anchor" href="#ç¬¬ä¸‰é˜¶æ®µæ‰‹åŠ¨åˆ‡æ¢usbæ¨¡å¼"></a> ç¬¬ä¸‰é˜¶æ®µï¼šæ‰‹åŠ¨åˆ‡æ¢USBæ¨¡å¼</h3><h4 id="31-æ‰¾åˆ°è§’è‰²åˆ‡æ¢æ¥å£"><a class="markdownIt-Anchor" href="#31-æ‰¾åˆ°è§’è‰²åˆ‡æ¢æ¥å£"></a> 3.1 æ‰¾åˆ°è§’è‰²åˆ‡æ¢æ¥å£</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹debugfsä¸­çš„USBä¿¡æ¯</span></span><br><span class="line"><span class="built_in">ls</span> -la /sys/kernel/debug/usb/</span><br><span class="line"><span class="comment"># åº”è¯¥çœ‹åˆ° ci_hdrc.0 ç›®å½•</span></span><br></pre></td></tr></table></figure><h4 id="32-åˆ‡æ¢åˆ°hostæ¨¡å¼"><a class="markdownIt-Anchor" href="#32-åˆ‡æ¢åˆ°hostæ¨¡å¼"></a> 3.2 åˆ‡æ¢åˆ°hostæ¨¡å¼</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹å½“å‰è§’è‰²</span></span><br><span class="line"><span class="built_in">cat</span> /sys/kernel/debug/usb/ci_hdrc.0/role</span><br><span class="line"><span class="comment"># é€šå¸¸æ˜¯ &quot;gadget&quot;ï¼ˆè®¾å¤‡æ¨¡å¼ï¼‰</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ‡æ¢åˆ°hostæ¨¡å¼</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;host&quot;</span> | <span class="built_in">sudo</span> <span class="built_in">tee</span> /sys/kernel/debug/usb/ci_hdrc.0/role</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¡®è®¤åˆ‡æ¢æˆåŠŸ</span></span><br><span class="line"><span class="built_in">cat</span> /sys/kernel/debug/usb/ci_hdrc.0/role</span><br><span class="line"><span class="comment"># åº”è¯¥æ˜¾ç¤º &quot;host&quot;</span></span><br></pre></td></tr></table></figure><h4 id="33-åŠ è½½å­˜å‚¨é©±åŠ¨"><a class="markdownIt-Anchor" href="#33-åŠ è½½å­˜å‚¨é©±åŠ¨"></a> 3.3 åŠ è½½å­˜å‚¨é©±åŠ¨</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åŠ è½½USBå­˜å‚¨é©±åŠ¨</span></span><br><span class="line"><span class="built_in">sudo</span> modprobe usb-storage</span><br><span class="line"><span class="built_in">sudo</span> modprobe uas  <span class="comment"># å¦‚æœæ”¯æŒ</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡æ–°æ‰«æSCSIæ€»çº¿</span></span><br><span class="line"><span class="keyword">for</span> host <span class="keyword">in</span> /sys/class/scsi_host/host*; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;- - -&quot;</span> | <span class="built_in">sudo</span> <span class="built_in">tee</span> <span class="string">&quot;<span class="variable">$host</span>/scan&quot;</span> 2&gt;/dev/null</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><h3 id="ç¬¬å››é˜¶æ®µæŒ‚è½½ç¡¬ç›˜"><a class="markdownIt-Anchor" href="#ç¬¬å››é˜¶æ®µæŒ‚è½½ç¡¬ç›˜"></a> ç¬¬å››é˜¶æ®µï¼šæŒ‚è½½ç¡¬ç›˜</h3><h4 id="41-ç¡®è®¤ç¡¬ç›˜è¯†åˆ«"><a class="markdownIt-Anchor" href="#41-ç¡®è®¤ç¡¬ç›˜è¯†åˆ«"></a> 4.1 ç¡®è®¤ç¡¬ç›˜è¯†åˆ«</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹å—è®¾å¤‡</span></span><br><span class="line">lsblk</span><br><span class="line"><span class="comment"># åº”è¯¥çœ‹åˆ° sda / sda1 ç­‰è®¾å¤‡</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹ç¡¬ç›˜è¯¦ç»†ä¿¡æ¯</span></span><br><span class="line"><span class="built_in">sudo</span> fdisk -l /dev/sda</span><br></pre></td></tr></table></figure><h4 id="42-åˆ›å»ºæŒ‚è½½ç‚¹"><a class="markdownIt-Anchor" href="#42-åˆ›å»ºæŒ‚è½½ç‚¹"></a> 4.2 åˆ›å»ºæŒ‚è½½ç‚¹</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºæŒ‚è½½ç›®å½•</span></span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">mkdir</span> -p /mnt/nas</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹æ–‡ä»¶ç³»ç»Ÿç±»å‹</span></span><br><span class="line"><span class="built_in">sudo</span> blkid /dev/sda1</span><br></pre></td></tr></table></figure><h4 id="43-æŒ‚è½½ç¡¬ç›˜"><a class="markdownIt-Anchor" href="#43-æŒ‚è½½ç¡¬ç›˜"></a> 4.3 æŒ‚è½½ç¡¬ç›˜</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ ¹æ®æ–‡ä»¶ç³»ç»Ÿç±»å‹é€‰æ‹©æŒ‚è½½å‘½ä»¤</span></span><br><span class="line"><span class="comment"># NTFSæ ¼å¼</span></span><br><span class="line"><span class="built_in">sudo</span> mount -t ntfs-3g /dev/sda1 /mnt/nas</span><br><span class="line"></span><br><span class="line"><span class="comment"># exFATæ ¼å¼</span></span><br><span class="line"><span class="built_in">sudo</span> mount -t exfat /dev/sda1 /mnt/nas</span><br><span class="line"></span><br><span class="line"><span class="comment"># ext4æ ¼å¼</span></span><br><span class="line"><span class="built_in">sudo</span> mount /dev/sda1 /mnt/nas</span><br></pre></td></tr></table></figure><h4 id="44-éªŒè¯æŒ‚è½½"><a class="markdownIt-Anchor" href="#44-éªŒè¯æŒ‚è½½"></a> 4.4 éªŒè¯æŒ‚è½½</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹æŒ‚è½½æƒ…å†µ</span></span><br><span class="line"><span class="built_in">df</span> -h /mnt/nas</span><br><span class="line"></span><br><span class="line"><span class="comment"># æµ‹è¯•å†™å…¥æƒé™</span></span><br><span class="line"><span class="built_in">touch</span> /mnt/nas/test.txt</span><br><span class="line"><span class="built_in">ls</span> -la /mnt/nas/</span><br></pre></td></tr></table></figure><h3 id="ç¬¬äº”é˜¶æ®µè‡ªåŠ¨åŒ–è„šæœ¬"><a class="markdownIt-Anchor" href="#ç¬¬äº”é˜¶æ®µè‡ªåŠ¨åŒ–è„šæœ¬"></a> ç¬¬äº”é˜¶æ®µï¼šè‡ªåŠ¨åŒ–è„šæœ¬</h3><h4 id="51-åˆ›å»ºusbæ¨¡å¼åˆ‡æ¢è„šæœ¬"><a class="markdownIt-Anchor" href="#51-åˆ›å»ºusbæ¨¡å¼åˆ‡æ¢è„šæœ¬"></a> 5.1 åˆ›å»ºUSBæ¨¡å¼åˆ‡æ¢è„šæœ¬</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> nano /usr/local/bin/usb-switch</span><br></pre></td></tr></table></figure><p>è„šæœ¬å†…å®¹ï¼ˆå®Œæ•´ç‰ˆè§é™„å½•ï¼‰ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é…ç½®</span></span><br><span class="line">MOUNT_POINT=<span class="string">&quot;/mnt/nas&quot;</span></span><br><span class="line">USB_ROLE_FILE=<span class="string">&quot;/sys/kernel/debug/usb/ci_hdrc.0/role&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ‡æ¢åˆ°hostæ¨¡å¼</span></span><br><span class="line"><span class="function"><span class="title">switch_to_host</span></span>() &#123;</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;host&quot;</span> &gt; <span class="string">&quot;<span class="variable">$USB_ROLE_FILE</span>&quot;</span></span><br><span class="line">    <span class="built_in">sleep</span> 3</span><br><span class="line">    modprobe usb-storage</span><br><span class="line">    <span class="comment"># æ‰«æå¹¶æŒ‚è½½ç¡¬ç›˜...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ‡æ¢åˆ°gadgetæ¨¡å¼</span></span><br><span class="line"><span class="function"><span class="title">switch_to_gadget</span></span>() &#123;</span><br><span class="line">    umount <span class="string">&quot;<span class="variable">$MOUNT_POINT</span>&quot;</span> 2&gt;/dev/null</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;gadget&quot;</span> &gt; <span class="string">&quot;<span class="variable">$USB_ROLE_FILE</span>&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ ¹æ®å‚æ•°æ‰§è¡Œ</span></span><br><span class="line"><span class="keyword">case</span> <span class="string">&quot;<span class="variable">$1</span>&quot;</span> <span class="keyword">in</span></span><br><span class="line">    host) switch_to_host ;;</span><br><span class="line">    gadget) switch_to_gadget ;;</span><br><span class="line">    status) show_status ;;</span><br><span class="line">    mount) mount_hdd ;;</span><br><span class="line">    umount) umount_hdd ;;</span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure><h4 id="52-è®¾ç½®æ‰§è¡Œæƒé™"><a class="markdownIt-Anchor" href="#52-è®¾ç½®æ‰§è¡Œæƒé™"></a> 5.2 è®¾ç½®æ‰§è¡Œæƒé™</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> <span class="built_in">chmod</span> +x /usr/local/bin/usb-switch</span><br></pre></td></tr></table></figure><h3 id="ç¬¬å…­é˜¶æ®µè®¾ç½®å¼€æœºè‡ªåŠ¨æŒ‚è½½"><a class="markdownIt-Anchor" href="#ç¬¬å…­é˜¶æ®µè®¾ç½®å¼€æœºè‡ªåŠ¨æŒ‚è½½"></a> ç¬¬å…­é˜¶æ®µï¼šè®¾ç½®å¼€æœºè‡ªåŠ¨æŒ‚è½½</h3><h4 id="61-è·å–ç¡¬ç›˜uuid"><a class="markdownIt-Anchor" href="#61-è·å–ç¡¬ç›˜uuid"></a> 6.1 è·å–ç¡¬ç›˜UUID</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">UUID=$(<span class="built_in">sudo</span> blkid -s UUID -o value /dev/sda1)</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$UUID</span></span><br></pre></td></tr></table></figure><h4 id="62-æ·»åŠ åˆ°fstab"><a class="markdownIt-Anchor" href="#62-æ·»åŠ åˆ°fstab"></a> 6.2 æ·»åŠ åˆ°fstab</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¤‡ä»½åŸé…ç½®</span></span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">cp</span> /etc/fstab /etc/fstab.bak</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ è‡ªåŠ¨æŒ‚è½½</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;UUID=<span class="variable">$UUID</span> /mnt/nas ntfs-3g defaults,nofail,uid=1000,gid=1000,umask=0002 0 2&quot;</span> | <span class="built_in">sudo</span> <span class="built_in">tee</span> -a /etc/fstab</span><br><span class="line"></span><br><span class="line"><span class="comment"># æµ‹è¯•é…ç½®</span></span><br><span class="line"><span class="built_in">sudo</span> mount -a</span><br></pre></td></tr></table></figure><h2 id="å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ"><a class="markdownIt-Anchor" href="#å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ"></a> â“ å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h2><h3 id="q1-åˆ‡æ¢æ¨¡å¼åç¡¬ç›˜ä¸å‡ºç°"><a class="markdownIt-Anchor" href="#q1-åˆ‡æ¢æ¨¡å¼åç¡¬ç›˜ä¸å‡ºç°"></a> Q1: åˆ‡æ¢æ¨¡å¼åç¡¬ç›˜ä¸å‡ºç°</h3><p><strong>å¯èƒ½åŸå› </strong>ï¼šå­˜å‚¨é©±åŠ¨æœªåŠ è½½</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ‰‹åŠ¨åŠ è½½é©±åŠ¨</span></span><br><span class="line"><span class="built_in">sudo</span> modprobe usb-storage</span><br><span class="line"><span class="built_in">sudo</span> modprobe uas</span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡æ–°æ‰«æ</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;- - -&quot;</span> | <span class="built_in">sudo</span> <span class="built_in">tee</span> /sys/class/scsi_host/host*/scan</span><br></pre></td></tr></table></figure><h3 id="q2-åˆ‡æ¢å›gadgetæ¨¡å¼åç¡¬ç›˜è¿˜åœ¨è½¬"><a class="markdownIt-Anchor" href="#q2-åˆ‡æ¢å›gadgetæ¨¡å¼åç¡¬ç›˜è¿˜åœ¨è½¬"></a> Q2: åˆ‡æ¢å›gadgetæ¨¡å¼åï¼Œç¡¬ç›˜è¿˜åœ¨è½¬</h3><p><strong>è§£é‡Š</strong>ï¼šç¡¬ç›˜ç›’ç‹¬ç«‹ä¾›ç”µï¼ŒUSBåªä¼ è¾“æ•°æ®ï¼Œä¸å½±å“ç”µæºã€‚è¿™æ˜¯<strong>æ­£å¸¸ç°è±¡</strong>ï¼Œä¸å½±å“ä½¿ç”¨ã€‚</p><h3 id="q3-æŒ‚è½½æ—¶æç¤º-wrong-fs-type"><a class="markdownIt-Anchor" href="#q3-æŒ‚è½½æ—¶æç¤º-wrong-fs-type"></a> Q3: æŒ‚è½½æ—¶æç¤º â€œwrong fs typeâ€</h3><p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šå®‰è£…å¯¹åº”æ–‡ä»¶ç³»ç»Ÿæ”¯æŒ</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># NTFS</span></span><br><span class="line"><span class="built_in">sudo</span> apt install ntfs-3g</span><br><span class="line"></span><br><span class="line"><span class="comment"># exFAT</span></span><br><span class="line"><span class="built_in">sudo</span> apt install exfat-fuse exfat-utils</span><br></pre></td></tr></table></figure><h3 id="q4-æƒé™ä¸è¶³æ— æ³•å†™å…¥"><a class="markdownIt-Anchor" href="#q4-æƒé™ä¸è¶³æ— æ³•å†™å…¥"></a> Q4: æƒé™ä¸è¶³æ— æ³•å†™å…¥</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è®¾ç½®æŒ‚è½½ç‚¹æƒé™</span></span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">chmod</span> 777 /mnt/nas</span><br><span class="line"></span><br><span class="line"><span class="comment"># æˆ–è€…æ”¹å˜æ‰€æœ‰è€…</span></span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">chown</span> -R ä½ çš„ç”¨æˆ·å:ä½ çš„ç»„å /mnt/nas</span><br></pre></td></tr></table></figure><h3 id="q5-å¦‚ä½•åˆ¤æ–­ç³»ç»Ÿæ¶æ„"><a class="markdownIt-Anchor" href="#q5-å¦‚ä½•åˆ¤æ–­ç³»ç»Ÿæ¶æ„"></a> Q5: å¦‚ä½•åˆ¤æ–­ç³»ç»Ÿæ¶æ„ï¼Ÿ</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">uname</span> -m</span><br><span class="line"><span class="comment"># x86_64 = 64ä½PC</span></span><br><span class="line"><span class="comment"># armv7l = 32ä½ARM</span></span><br><span class="line"><span class="comment"># aarch64 = 64ä½ARM</span></span><br></pre></td></tr></table></figure><h2 id="å¸¸ç”¨å‘½ä»¤ä½¿ç”¨æŒ‡å—"><a class="markdownIt-Anchor" href="#å¸¸ç”¨å‘½ä»¤ä½¿ç”¨æŒ‡å—"></a> ğŸ“± å¸¸ç”¨å‘½ä»¤ä½¿ç”¨æŒ‡å—</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹å½“å‰çŠ¶æ€</span></span><br><span class="line"><span class="built_in">sudo</span> usb-switch status</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ‡æ¢åˆ°hostæ¨¡å¼ï¼ˆæ¥ç¡¬ç›˜ï¼‰ï¼ˆè‡ªåŠ¨æŒ‚è½½ç¡¬ç›˜ï¼‰</span></span><br><span class="line"><span class="built_in">sudo</span> usb-switch host</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ‡æ¢åˆ°gadgetæ¨¡å¼ï¼ˆæ¥ç”µè„‘ï¼‰ï¼ˆè‡ªåŠ¨å¸è½½ç¡¬ç›˜ï¼‰</span></span><br><span class="line"><span class="built_in">sudo</span> usb-switch gadget</span><br><span class="line"></span><br><span class="line"><span class="comment"># åªæŒ‚è½½ç¡¬ç›˜ï¼ˆä¸åˆ‡æ¢æ¨¡å¼ï¼‰</span></span><br><span class="line"><span class="built_in">sudo</span> usb-switch mount</span><br><span class="line"></span><br><span class="line"><span class="comment"># åªå¸è½½ç¡¬ç›˜ï¼ˆä¸åˆ‡æ¢æ¨¡å¼ï¼‰</span></span><br><span class="line"><span class="built_in">sudo</span> usb-switch umount</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰‹åŠ¨æŸ¥çœ‹ç¡¬ç›˜</span></span><br><span class="line">lsblk</span><br><span class="line"><span class="built_in">df</span> -h /mnt/nas</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨åœºæ™¯ç¤ºä¾‹"><a class="markdownIt-Anchor" href="#ä½¿ç”¨åœºæ™¯ç¤ºä¾‹"></a> ä½¿ç”¨åœºæ™¯ç¤ºä¾‹</h3><p><strong>åœºæ™¯1ï¼šåšNAS/æ‰“å°æœåŠ¡å™¨</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> usb-switch host</span><br><span class="line"><span class="comment"># ç¡¬ç›˜è‡ªåŠ¨æŒ‚è½½åˆ° /mnt/nas</span></span><br></pre></td></tr></table></figure><p><strong>åœºæ™¯2ï¼šè¿æ¥ç”µè„‘åˆ·æœº/è°ƒè¯•</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> usb-switch gadget</span><br><span class="line"><span class="comment"># ç”¨äºè¿æ¥ç”µè„‘adbè°ƒè¯•</span></span><br></pre></td></tr></table></figure><p><strong>åœºæ™¯3ï¼šæŸ¥çœ‹ç¡¬ç›˜ä½¿ç”¨æƒ…å†µ</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> usb-switch status</span><br><span class="line"><span class="comment"># æ˜¾ç¤ºæ¨¡å¼ã€ç¡¬ç›˜ä¿¡æ¯ã€æŒ‚è½½çŠ¶æ€</span></span><br></pre></td></tr></table></figure><h2 id="æœ€ç»ˆæˆæœ"><a class="markdownIt-Anchor" href="#æœ€ç»ˆæˆæœ"></a> ğŸ‰ æœ€ç»ˆæˆæœ</h2><p>æˆåŠŸåœ¨OpenStickä¸Šå®ç°ï¼š</p><ul><li>âœ… USBæ¨¡å¼è‡ªç”±åˆ‡æ¢ï¼ˆhost/gadgetï¼‰</li><li>âœ… è‡ªåŠ¨è¯†åˆ«465GBå¤–ç½®ç¡¬ç›˜</li><li>âœ… å¼€æœºè‡ªåŠ¨æŒ‚è½½åˆ° <code>/mnt/nas</code></li><li>âœ… å®Œå–„çš„å‘½ä»¤è¡Œç®¡ç†å·¥å…·</li></ul><p><strong>ç¡¬ç›˜ä¿¡æ¯ï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">è®¾å¤‡ï¼š/dev/sda1</span><br><span class="line">å®¹é‡ï¼š465.8 GB</span><br><span class="line">æ ¼å¼ï¼šNTFS</span><br><span class="line">æŒ‚è½½ç‚¹ï¼š/mnt/nas</span><br><span class="line">å¯ç”¨ç©ºé—´ï¼š65 GB</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒèµ„æ–™"><a class="markdownIt-Anchor" href="#å‚è€ƒèµ„æ–™"></a> ğŸ“š å‚è€ƒèµ„æ–™</h2><ul><li><a href="https://chat.deepseek.com/">DeepSeek AIåŠ©æ‰‹</a> - å…¨ç¨‹æŠ€æœ¯æŒ‡å¯¼</li><li><a href="https://www.kernel.org/doc/html/latest/usb/gadget_configfs.html">Linux USB Gadget APIæ–‡æ¡£</a></li><li><a href="https://wiki.archlinux.org/title/USB_storage">Arch Linux Wiki: USB storage</a></li></ul><hr /><h2 id="é™„å½•å®Œæ•´è„šæœ¬"><a class="markdownIt-Anchor" href="#é™„å½•å®Œæ•´è„šæœ¬"></a> ğŸ“‹ é™„å½•ï¼šå®Œæ•´è„šæœ¬</h2><h3 id="usb-switch-å®Œæ•´è„šæœ¬"><a class="markdownIt-Anchor" href="#usb-switch-å®Œæ•´è„šæœ¬"></a> usb-switch å®Œæ•´è„šæœ¬</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># USBæ¨¡å¼åˆ‡æ¢è„šæœ¬ - æ”¯æŒhost/gadgetåˆ‡æ¢å¹¶è‡ªåŠ¨æŒ‚è½½/å¸è½½ç¡¬ç›˜</span></span><br><span class="line"><span class="comment"># ä½œè€…: DeepSeek AI</span></span><br><span class="line"><span class="comment"># æ—¥æœŸ: 2026-02-24</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é¢œè‰²å®šä¹‰</span></span><br><span class="line">RED=<span class="string">&#x27;\033[0;31m&#x27;</span></span><br><span class="line">GREEN=<span class="string">&#x27;\033[0;32m&#x27;</span></span><br><span class="line">YELLOW=<span class="string">&#x27;\033[1;33m&#x27;</span></span><br><span class="line">BLUE=<span class="string">&#x27;\033[0;34m&#x27;</span></span><br><span class="line">NC=<span class="string">&#x27;\033[0m&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é…ç½®</span></span><br><span class="line">MOUNT_POINT=<span class="string">&quot;/mnt/nas&quot;</span></span><br><span class="line">USB_ROLE_FILE=<span class="string">&quot;/sys/kernel/debug/usb/ci_hdrc.0/role&quot;</span></span><br><span class="line">LOG_FILE=<span class="string">&quot;/var/log/usb_switch.log&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¾ç¤ºä½¿ç”¨æ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="title">show_usage</span></span>() &#123;</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;ç”¨æ³•: <span class="variable">$0</span> [host|gadget|status|mount|umount]&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;  host    - åˆ‡æ¢åˆ°ä¸»æœºæ¨¡å¼ï¼ˆè¿æ¥ç¡¬ç›˜ï¼‰å¹¶è‡ªåŠ¨æŒ‚è½½&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;  gadget  - åˆ‡æ¢åˆ°è®¾å¤‡æ¨¡å¼ï¼ˆè¿æ¥ç”µè„‘ï¼‰å¹¶è‡ªåŠ¨å¸è½½&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;  status  - æ˜¾ç¤ºå½“å‰çŠ¶æ€&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;  mount   - åªæŒ‚è½½ç¡¬ç›˜ï¼ˆä¸åˆ‡æ¢æ¨¡å¼ï¼‰&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;  umount  - åªå¸è½½ç¡¬ç›˜ï¼ˆä¸åˆ‡æ¢æ¨¡å¼ï¼‰&quot;</span></span><br><span class="line">    <span class="built_in">exit</span> 1</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ—¥å¿—å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="title">log</span></span>() &#123;</span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;<span class="subst">$(date &#x27;+%Y-%m-%d %H:%M:%S&#x27;)</span> - <span class="variable">$1</span>&quot;</span> | <span class="built_in">tee</span> -a <span class="string">&quot;<span class="variable">$LOG_FILE</span>&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ£€æŸ¥æ˜¯å¦root</span></span><br><span class="line"><span class="function"><span class="title">check_root</span></span>() &#123;</span><br><span class="line">    <span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$EUID</span>&quot;</span> -ne 0 ]; <span class="keyword">then</span> </span><br><span class="line">        <span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;RED&#125;</span>è¯·ç”¨ sudo è¿è¡Œæ­¤è„šæœ¬<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">        <span class="built_in">exit</span> 1</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–å½“å‰æ¨¡å¼</span></span><br><span class="line"><span class="function"><span class="title">get_current_mode</span></span>() &#123;</span><br><span class="line">    <span class="keyword">if</span> [ -f <span class="string">&quot;<span class="variable">$USB_ROLE_FILE</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">cat</span> <span class="string">&quot;<span class="variable">$USB_ROLE_FILE</span>&quot;</span> 2&gt;/dev/null</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;unknown&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ£€æŸ¥ç¡¬ç›˜æ˜¯å¦å·²æŒ‚è½½</span></span><br><span class="line"><span class="function"><span class="title">is_mounted</span></span>() &#123;</span><br><span class="line">    mount | grep -q <span class="string">&quot; <span class="variable">$MOUNT_POINT</span> &quot;</span></span><br><span class="line">    <span class="built_in">return</span> $?</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥æ‰¾ç¡¬ç›˜è®¾å¤‡</span></span><br><span class="line"><span class="function"><span class="title">find_hdd</span></span>() &#123;</span><br><span class="line">    <span class="comment"># å…ˆæ‰«æ</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;- - -&quot;</span> &gt; /sys/class/scsi_host/host0/scan 2&gt;/dev/null</span><br><span class="line">    <span class="built_in">sleep</span> 1</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># æŸ¥æ‰¾åˆ†åŒº</span></span><br><span class="line">    <span class="keyword">for</span> dev <span class="keyword">in</span> /dev/sd[a-z][0-9]; <span class="keyword">do</span></span><br><span class="line">        <span class="keyword">if</span> [ -e <span class="string">&quot;<span class="variable">$dev</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">            <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$dev</span>&quot;</span></span><br><span class="line">            <span class="built_in">return</span> 0</span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># æŸ¥æ‰¾ç£ç›˜</span></span><br><span class="line">    <span class="keyword">for</span> dev <span class="keyword">in</span> /dev/sd[a-z]; <span class="keyword">do</span></span><br><span class="line">        <span class="keyword">if</span> [ -e <span class="string">&quot;<span class="variable">$dev</span>&quot;</span> ] &amp;&amp; [ <span class="string">&quot;<span class="variable">$dev</span>&quot;</span> != <span class="string">&quot;/dev/sda&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">            <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$dev</span>&quot;</span></span><br><span class="line">            <span class="built_in">return</span> 0</span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŒ‚è½½ç¡¬ç›˜</span></span><br><span class="line"><span class="function"><span class="title">mount_hdd</span></span>() &#123;</span><br><span class="line">    <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;YELLOW&#125;</span>å°è¯•æŒ‚è½½ç¡¬ç›˜...<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">mkdir</span> -p <span class="string">&quot;<span class="variable">$MOUNT_POINT</span>&quot;</span></span><br><span class="line">    </span><br><span class="line">    HDD_DEV=$(find_hdd)</span><br><span class="line">    <span class="keyword">if</span> [ -z <span class="string">&quot;<span class="variable">$HDD_DEV</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;RED&#125;</span>æœªæ‰¾åˆ°ç¡¬ç›˜è®¾å¤‡<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">        <span class="built_in">return</span> 1</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">log</span> <span class="string">&quot;æ‰¾åˆ°ç¡¬ç›˜è®¾å¤‡: <span class="variable">$HDD_DEV</span>&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> [ ! -e <span class="string">&quot;<span class="variable">$HDD_DEV</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;RED&#125;</span>è®¾å¤‡ <span class="variable">$HDD_DEV</span> ä¸å­˜åœ¨<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">        <span class="built_in">return</span> 1</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    </span><br><span class="line">    FSTYPE=$(blkid -s TYPE -o value <span class="string">&quot;<span class="variable">$HDD_DEV</span>&quot;</span> 2&gt;/dev/null)</span><br><span class="line">    <span class="built_in">log</span> <span class="string">&quot;æ–‡ä»¶ç³»ç»Ÿç±»å‹: <span class="variable">$&#123;FSTYPE:-æœªçŸ¥&#125;</span>&quot;</span></span><br><span class="line">    </span><br><span class="line">    mount_success=0</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> [ -n <span class="string">&quot;<span class="variable">$FSTYPE</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;<span class="variable">$FSTYPE</span>&quot;</span> <span class="keyword">in</span></span><br><span class="line">            ntfs|NTFS)</span><br><span class="line">                mount -t ntfs-3g <span class="string">&quot;<span class="variable">$HDD_DEV</span>&quot;</span> <span class="string">&quot;<span class="variable">$MOUNT_POINT</span>&quot;</span> 2&gt;/tmp/mount_error &amp;&amp; mount_success=1</span><br><span class="line">                ;;</span><br><span class="line">            exfat|EXFAT)</span><br><span class="line">                mount -t exfat <span class="string">&quot;<span class="variable">$HDD_DEV</span>&quot;</span> <span class="string">&quot;<span class="variable">$MOUNT_POINT</span>&quot;</span> 2&gt;/tmp/mount_error &amp;&amp; mount_success=1</span><br><span class="line">                ;;</span><br><span class="line">            ext4|ext3|ext2)</span><br><span class="line">                mount <span class="string">&quot;<span class="variable">$HDD_DEV</span>&quot;</span> <span class="string">&quot;<span class="variable">$MOUNT_POINT</span>&quot;</span> 2&gt;/tmp/mount_error &amp;&amp; mount_success=1</span><br><span class="line">                ;;</span><br><span class="line">            *)</span><br><span class="line">                mount <span class="string">&quot;<span class="variable">$HDD_DEV</span>&quot;</span> <span class="string">&quot;<span class="variable">$MOUNT_POINT</span>&quot;</span> 2&gt;/tmp/mount_error &amp;&amp; mount_success=1</span><br><span class="line">                ;;</span><br><span class="line">        <span class="keyword">esac</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$mount_success</span> -eq 0 ]; <span class="keyword">then</span></span><br><span class="line">        mount -t ntfs-3g <span class="string">&quot;<span class="variable">$HDD_DEV</span>&quot;</span> <span class="string">&quot;<span class="variable">$MOUNT_POINT</span>&quot;</span> 2&gt;/tmp/mount_error &amp;&amp; mount_success=1</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$mount_success</span> -eq 1 ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;GREEN&#125;</span>ç¡¬ç›˜æŒ‚è½½æˆåŠŸåˆ° $MOUNT_POINT<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">        <span class="built_in">chmod</span> 777 <span class="string">&quot;<span class="variable">$MOUNT_POINT</span>&quot;</span></span><br><span class="line">        <span class="built_in">df</span> -h <span class="string">&quot;<span class="variable">$MOUNT_POINT</span>&quot;</span> | <span class="built_in">tail</span> -1</span><br><span class="line">        <span class="built_in">return</span> 0</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;RED&#125;</span>ç¡¬ç›˜æŒ‚è½½å¤±è´¥<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">        [ -f /tmp/mount_error ] &amp;&amp; <span class="built_in">log</span> <span class="string">&quot;é”™è¯¯: <span class="subst">$(cat /tmp/mount_error)</span>&quot;</span></span><br><span class="line">        <span class="built_in">return</span> 1</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¸è½½ç¡¬ç›˜</span></span><br><span class="line"><span class="function"><span class="title">umount_hdd</span></span>() &#123;</span><br><span class="line">    <span class="keyword">if</span> is_mounted; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;YELLOW&#125;</span>å¸è½½ç¡¬ç›˜ <span class="variable">$MOUNT_POINT</span>...<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">        umount <span class="string">&quot;<span class="variable">$MOUNT_POINT</span>&quot;</span> 2&gt;/tmp/umount_error</span><br><span class="line">        <span class="keyword">if</span> [ $? -eq 0 ]; <span class="keyword">then</span></span><br><span class="line">            <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;GREEN&#125;</span>ç¡¬ç›˜å¸è½½æˆåŠŸ<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;RED&#125;</span>ç¡¬ç›˜å¸è½½å¤±è´¥ï¼Œå°è¯•å¼ºåˆ¶å¸è½½...<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">            umount -l <span class="string">&quot;<span class="variable">$MOUNT_POINT</span>&quot;</span> &amp;&amp; <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;GREEN&#125;</span>å¼ºåˆ¶å¸è½½æˆåŠŸ<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;BLUE&#125;</span>ç¡¬ç›˜æœªæŒ‚è½½<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ‡æ¢åˆ°hostæ¨¡å¼</span></span><br><span class="line"><span class="function"><span class="title">switch_to_host</span></span>() &#123;</span><br><span class="line">    <span class="built_in">local</span> current=$(get_current_mode)</span><br><span class="line">    <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;BLUE&#125;</span>å½“å‰æ¨¡å¼: <span class="variable">$current</span> -&gt; ç›®æ ‡æ¨¡å¼: host<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$current</span>&quot;</span> = <span class="string">&quot;host&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;YELLOW&#125;</span>å·²ç»æ˜¯hostæ¨¡å¼<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        modprobe -r g_serial g_ether g_mass_storage 2&gt;/dev/null</span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;host&quot;</span> &gt; <span class="string">&quot;<span class="variable">$USB_ROLE_FILE</span>&quot;</span></span><br><span class="line">        <span class="built_in">sleep</span> 3</span><br><span class="line">        modprobe usb-storage 2&gt;/dev/null</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> host <span class="keyword">in</span> /sys/class/scsi_host/host*; <span class="keyword">do</span></span><br><span class="line">            [ -f <span class="string">&quot;<span class="variable">$host</span>/scan&quot;</span> ] &amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;- - -&quot;</span> &gt; <span class="string">&quot;<span class="variable">$host</span>/scan&quot;</span> 2&gt;/dev/null</span><br><span class="line">        <span class="keyword">done</span></span><br><span class="line">        </span><br><span class="line">        <span class="built_in">sleep</span> 2</span><br><span class="line">        <span class="built_in">local</span> new=$(get_current_mode)</span><br><span class="line">        [ <span class="string">&quot;<span class="variable">$new</span>&quot;</span> = <span class="string">&quot;host&quot;</span> ] &amp;&amp; <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;GREEN&#125;</span>åˆ‡æ¢åˆ°hostæ¨¡å¼æˆåŠŸ<span class="variable">$&#123;NC&#125;</span>&quot;</span> || <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;RED&#125;</span>åˆ‡æ¢å¤±è´¥<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    </span><br><span class="line">    mount_hdd</span><br><span class="line">    show_status</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ‡æ¢åˆ°gadgetæ¨¡å¼</span></span><br><span class="line"><span class="function"><span class="title">switch_to_gadget</span></span>() &#123;</span><br><span class="line">    <span class="built_in">local</span> current=$(get_current_mode)</span><br><span class="line">    <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;BLUE&#125;</span>å½“å‰æ¨¡å¼: <span class="variable">$current</span> -&gt; ç›®æ ‡æ¨¡å¼: gadget<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">    </span><br><span class="line">    umount_hdd</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$current</span>&quot;</span> = <span class="string">&quot;gadget&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;YELLOW&#125;</span>å·²ç»æ˜¯gadgetæ¨¡å¼<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        modprobe -r usb-storage 2&gt;/dev/null</span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;gadget&quot;</span> &gt; <span class="string">&quot;<span class="variable">$USB_ROLE_FILE</span>&quot;</span></span><br><span class="line">        <span class="built_in">sleep</span> 2</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">local</span> new=$(get_current_mode)</span><br><span class="line">        [ <span class="string">&quot;<span class="variable">$new</span>&quot;</span> = <span class="string">&quot;gadget&quot;</span> ] &amp;&amp; <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;GREEN&#125;</span>åˆ‡æ¢åˆ°gadgetæ¨¡å¼æˆåŠŸ<span class="variable">$&#123;NC&#125;</span>&quot;</span> || <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;RED&#125;</span>åˆ‡æ¢å¤±è´¥<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    </span><br><span class="line">    show_status</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># åªæŒ‚è½½ç¡¬ç›˜</span></span><br><span class="line"><span class="function"><span class="title">do_mount</span></span>() &#123;</span><br><span class="line">    <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;BLUE&#125;</span>æ‰‹åŠ¨æŒ‚è½½ç¡¬ç›˜...<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">    mount_hdd</span><br><span class="line">    show_status</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># åªå¸è½½ç¡¬ç›˜</span></span><br><span class="line"><span class="function"><span class="title">do_umount</span></span>() &#123;</span><br><span class="line">    <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;BLUE&#125;</span>æ‰‹åŠ¨å¸è½½ç¡¬ç›˜...<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">    umount_hdd</span><br><span class="line">    show_status</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¾ç¤ºçŠ¶æ€</span></span><br><span class="line"><span class="function"><span class="title">show_status</span></span>() &#123;</span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;\n<span class="variable">$&#123;BLUE&#125;</span>=== USB çŠ¶æ€ ===<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">local</span> role=$(get_current_mode)</span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;USB æ¨¡å¼: <span class="variable">$&#123;GREEN&#125;</span>$role<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;\n<span class="variable">$&#123;BLUE&#125;</span>ç¡¬ç›˜è®¾å¤‡:<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">    lsblk -o NAME,SIZE,MODEL | grep -E <span class="string">&quot;sd[a-z]&quot;</span> | <span class="built_in">head</span> -5 || <span class="built_in">echo</span> <span class="string">&quot;æœªæ‰¾åˆ°ç¡¬ç›˜&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> is_mounted; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> -e <span class="string">&quot;\n<span class="variable">$&#123;GREEN&#125;</span>ç¡¬ç›˜å·²æŒ‚è½½åˆ° $MOUNT_POINT<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">        <span class="built_in">df</span> -h <span class="string">&quot;<span class="variable">$MOUNT_POINT</span>&quot;</span> | <span class="built_in">tail</span> -1</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> -e <span class="string">&quot;\n<span class="variable">$&#123;YELLOW&#125;</span>ç¡¬ç›˜æœªæŒ‚è½½<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸»å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="title">main</span></span>() &#123;</span><br><span class="line">    check_root</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;<span class="variable">$1</span>&quot;</span> <span class="keyword">in</span></span><br><span class="line">        host) switch_to_host ;;</span><br><span class="line">        gadget) switch_to_gadget ;;</span><br><span class="line">        status) show_status ;;</span><br><span class="line">        mount) do_mount ;;</span><br><span class="line">        umount) do_umount ;;</span><br><span class="line">        *) show_usage ;;</span><br><span class="line">    <span class="keyword">esac</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">main <span class="string">&quot;<span class="variable">$@</span>&quot;</span></span><br></pre></td></tr></table></figure><hr /><blockquote><p>ğŸ’¡ <strong>ç‰¹åˆ«æ„Ÿè°¢</strong>ï¼šæœ¬æ–‡æ¡£çš„è§£å†³è¿‡ç¨‹å¾—åˆ°äº†DeepSeek AIçš„å…¨ç¨‹æŠ€æœ¯æ”¯æŒã€‚DeepSeekæ˜¯ä¸€æ¬¾å…è´¹çš„AIåŠ©æ‰‹ï¼Œèƒ½å¤Ÿå¸®åŠ©è§£å†³å„ç§æŠ€æœ¯éš¾é¢˜ã€‚</p><p><em>æœ€åæ›´æ–°ï¼š2026å¹´2æœˆ24æ—¥</em></p></blockquote>]]>
    </content>
    <id>https://imouyo.github.io/2026/02/24/OpenStick-ARM%E8%AE%BE%E5%A4%87%E5%A4%96%E6%8E%A5%E7%A1%AC%E7%9B%98%E7%9B%92%E5%AE%8C%E5%85%A8%E6%94%BB%E7%95%A5/</id>
    <link href="https://imouyo.github.io/2026/02/24/OpenStick-ARM%E8%AE%BE%E5%A4%87%E5%A4%96%E6%8E%A5%E7%A1%AC%E7%9B%98%E7%9B%92%E5%AE%8C%E5%85%A8%E6%94%BB%E7%95%A5/"/>
    <published>2026-02-24T15:19:28.000Z</published>
    <summary>
      <![CDATA[<blockquote>
<p>æœ¬æ–‡æ¡£è®°å½•äº†åœ¨OpenStickï¼ˆARM64è®¾å¤‡ï¼‰ä¸Šä»é›¶å¼€å§‹è¿æ¥ã€è¯†åˆ«å¹¶æŒ‚è½½å¤–ç½®ç¡¬ç›˜ç›’çš„å…¨è¿‡ç¨‹ï¼Œç‰¹åˆ«é€‚ç”¨äº<strong>åªæœ‰ä¸€ä¸ªMicro USBå£</strong>çš„ç”µè§†æ£’/å¼€å‘æ¿ã€‚</p>
<p><em>æ”»ç•¥ä½œè€…ï¼š<a href="https]]>
    </summary>
    <title>OpenStick/ARMè®¾å¤‡å¤–æ¥ç¡¬ç›˜ç›’å®Œå…¨æ”»ç•¥</title>
    <updated>2026-02-24T18:22:42.899Z</updated>
  </entry>
  <entry>
    <author>
      <name>John Doe</name>
    </author>
    <category term="DIY" scheme="https://imouyo.github.io/tags/DIY/"/>
    <content>
      <![CDATA[<p>æ¨èé˜…è¯»ï¼š</p><p><a href="https://blog.iamsjy.com/2023/12/11/snapdragon-410-portable-wifi-hotspot-flash-debian-and-optimize/#%E6%89%80%E9%9C%80%E6%96%87%E4%BB%B6%EF%BC%88%E4%B8%BB%E8%A6%81%E8%BF%9B%E8%A1%8C%E5%88%B7%E6%9C%BA%E6%B5%81%E7%A8%8B%EF%BC%89">https://blog.iamsjy.com/2023/12/11/snapdragon-410-portable-wifi-hotspot-flash-debian-and-optimize/#æ‰€éœ€æ–‡ä»¶ï¼ˆä¸»è¦è¿›è¡Œåˆ·æœºæµç¨‹ï¼‰</a></p><p><a href="https://zhuanlan.zhihu.com/p/659249489%EF%BC%88%E4%B8%BB%E8%A6%81%E8%BF%9B%E8%A1%8C%E8%A7%A3%E9%99%A4BL%E9%94%81%EF%BC%89">https://zhuanlan.zhihu.com/p/659249489ï¼ˆä¸»è¦è¿›è¡Œè§£é™¤BLé”ï¼‰</a></p><p><strong>backupä¸­æ˜¯æ‰€æœ‰åˆ†åŒºçš„å¤‡ä»½ï¼Œä¸éœ€è¦ä¸‹è½½ï¼Œåœ¨è¿‡ç¨‹ä¸­éœ€è¦ä½ è‡ªå·±å¤‡ä»½è‡ªå·±æ‰‹å¤´çš„éšèº«wifi</strong></p><h3 id="1-çœ‹èŠ¯ç‰‡"><a class="markdownIt-Anchor" href="#1-çœ‹èŠ¯ç‰‡"></a> 1ã€çœ‹èŠ¯ç‰‡</h3><p>â€‹æ‹†ä¸‹å…¨éƒ¨å±è”½ç½©ï¼ŒæŸ¥æ‰¾æœ€å¤§çš„ä¸€å—èŠ¯ç‰‡ï¼Œçœ‹èŠ¯ç‰‡ä¸Šæ–¹ä¸å°ï¼Œä¸€èˆ¬æ¥è¯´ä¼šæœ‰ä»¥ä¸‹å‡ ç§æƒ…å†µï¼š</p><ul><li><p><code>QUALCOMM MSM8916</code>ï¼šé«˜é€š410ï¼Œä¹Ÿæ˜¯ç©æ³•æœ€å¤šçš„ï¼›</p></li><li><p><code>QUALCOMM MSM8909</code>ï¼šé«˜é€š210ï¼Œç©æ³•ä»…æ¬¡äº410ï¼›</p><p>æœ¬äººçš„ä¸ºé«˜é€š410ï¼Œæ¿å­ä¸ºboot-ufi001c</p></li></ul><h3 id="2-å®‰è£…-9008-é©±åŠ¨"><a class="markdownIt-Anchor" href="#2-å®‰è£…-9008-é©±åŠ¨"></a> 2ã€å®‰è£… 9008 é©±åŠ¨</h3><p>â€‹è¿è¡Œ9008driver.exe</p><h3 id="3-å®‰è£…-adb-å·¥å…·"><a class="markdownIt-Anchor" href="#3-å®‰è£…-adb-å·¥å…·"></a> 3ã€å®‰è£… ADB å·¥å…·</h3><p>â€‹è§£å‹UFI003.zipï¼Œå¹¶è¿›å…¥ç”¨CMDè§£å‹æ–‡ä»¶å¤¹ï¼Œå¯ç›´æ¥ä½¿ç”¨adbä¸éœ€è¦æ·»åŠ ç¯å¢ƒå˜é‡</p><p>â€‹æ‰“å¼€å‘½ä»¤æç¤ºç¬¦ï¼Œæ‰§è¡Œ <code>adb version</code>ã€‚æœ‰å¦‚ä¸‹è¾“å‡ºï¼Œåˆ™è¡¨æ˜é…ç½®æ­£ç¡®ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ³¨æ„çœ‹æˆ‘çš„è·¯å¾„</span></span><br><span class="line">C:\Users\user\Desktop\123\UFI003&gt;adb version</span><br><span class="line">Android Debug Bridge version 1.0.41</span><br><span class="line">Version 32.0.0-8006631</span><br><span class="line">Installed as C:\Users\user\Desktop\123\UFI003\adb.exe</span><br></pre></td></tr></table></figure><h3 id="4-å®‰è£…-miko-å¤‡ä»½å·¥å…·"><a class="markdownIt-Anchor" href="#4-å®‰è£…-miko-å¤‡ä»½å·¥å…·"></a> 4ã€å®‰è£… Miko å¤‡ä»½å·¥å…·</h3><p>â€‹è§£å‹MiKo_Loder Pro.zipï¼Œç‚¹å‡»é‡Œé¢çš„miko.exeï¼Œå®‰è£…å®Œä¹‹åè¿›å…¥å®‰è£…ç›®å½•ï¼Œå°†loader.exeæ‹–è¿›å»ï¼Œä¹‹åä½¿ç”¨Mikoå·¥å…·å‡ä»loader.exeæ‰“å¼€</p><p>éšèº«wifiè¿›å…¥9008``æ¨¡å¼ï¼Œä¹‹åæ‰§è¡Œä¸‹å›¾æ­¥éª¤</p><p><img src="https://bucket.lxnchan.cn/posts/ufistick/miko.webp" alt="img" /></p><p>â€‹è‹¥éœ€è¦æ¢å¤åˆ™ï¼šéšèº«wifiè¿›å…¥9008æ¨¡å¼ï¼Œæ‰§è¡Œä¸‹å›¾æ­¥éª¤</p><p><img src="https://bucket.lxnchan.cn/posts/ufistick/miko-restore.webp" alt="img" /></p><h3 id="5-å¼€å¯-adb"><a class="markdownIt-Anchor" href="#5-å¼€å¯-adb"></a> 5ã€å¼€å¯ ADB</h3><p>â€‹å°†éšèº« WiFi æ’å…¥ç”µè„‘ USB æ¥å£ã€‚æ‰“å¼€è®¾å¤‡ç®¡ç†å™¨ï¼Œå¦‚æœæ­¤æ—¶å¤šäº†ä¸€ä¸ªåå« Android Composite ADB Interface çš„è®¾å¤‡ï¼Œåˆ™è¡¨æ˜éšèº« WiFi å·²ç»å¼€å¯ ADBï¼Œæ— éœ€æ‰§è¡Œå…¶ä»–æ“ä½œã€‚</p><p>â€‹å¦‚æœæ²¡æœ‰å‡ºç°è¿™ä¸ªè®¾å¤‡ï¼Œåˆ™éœ€è¦æ‰‹åŠ¨å¼€å¯ ADBã€‚ä»¥ UZ801 å‹å·ä¸ºä¾‹ï¼Œè¿ä¸Šéšèº« WiFi çš„çƒ­ç‚¹ï¼Œå¹¶è®¿é—® <a href="http://192.168.100.1/usbdebug.html">http://192.168.100.1/usbdebug.html</a> å³å¯å¼€å¯ ADBï¼Œå†æ¬¡è®¿é—®å³å¯å…³é—­ã€‚</p><p>â€‹éƒ¨åˆ† UFI003 å‹å·çš„éšèº« WiFi é»˜è®¤ä¸å¼€ ADBï¼Œéœ€è¦æ‰‹åŠ¨è¿› 9008 æ¨¡å¼åˆ·å…¥å·²å¼€å¯ ADB çš„å®‰å“å›ºä»¶ã€‚</p><p>å›ºä»¶ä¸‹è½½åœ°å€ï¼š<a href="https://www.123pan.com/s/NUK8Vv-nRdl">https://www.123pan.com/s/NUK8Vv-nRdl</a> æå–ç ï¼š1LEW</p><p>â€‹æ‰‹åŠ¨è¿› 9008 æ¨¡å¼çš„æ–¹æ³•ï¼šæŒ‰ä½ reset é”®ä¸æ”¾ï¼ˆéšèº« WiFi èƒŒé¢äºŒç»´ç å³ä¸Šè§’çš„å°å­”ï¼Œç”¨å–å¡é’ˆæˆ–ç‰™ç­¾æˆ³å³å¯ï¼‰ï¼Œå¹¶å°†éšèº« WiFi æ’å…¥ç”µè„‘ï¼Œæ¾å¼€ reset é”®ã€‚</p><h3 id="5-å¤‡ä»½åŸå‚å›ºä»¶"><a class="markdownIt-Anchor" href="#5-å¤‡ä»½åŸå‚å›ºä»¶"></a> 5ã€å¤‡ä»½åŸå‚å›ºä»¶</h3><p>â€‹æ‰“å¼€å‘½ä»¤æç¤ºç¬¦ï¼Œæ‰§è¡Œ <code>adb reboot edl</code>ï¼Œæ­¤æ—¶è®¾å¤‡ç®¡ç†å™¨ä¸­ä¼šå¤šå‡ºé«˜é€š 9008 è®¾å¤‡ã€‚</p><h3 id="6-åˆ·å…¥ç³»ç»Ÿ"><a class="markdownIt-Anchor" href="#6-åˆ·å…¥ç³»ç»Ÿ"></a> 6ã€åˆ·å…¥ç³»ç»Ÿ</h3><p>â€‹æˆ‘çš„è¿™ä¸ªéšèº«wifiè¢«é”äº†BLï¼Œæ‰€ä»¥éœ€è¦é€šè¿‡9008æ¨¡å¼å¼ºè¡Œåˆ·å…¥</p><p>â€‹ä¸‹é¢è¿›è¡Œè§£BLé”</p><h3 id="7-ä¸‹è½½emmc_appsboot-test-signedmbnå’Œqualcomm-premium-tool"><a class="markdownIt-Anchor" href="#7-ä¸‹è½½emmc_appsboot-test-signedmbnå’Œqualcomm-premium-tool"></a> 7ã€ä¸‹è½½emmc_appsboot-test-signed.mbnå’ŒQualcomm Premium Tool</h3><p>â€‹éšèº«wifiè¿›å…¥9008æ¨¡å¼ï¼Œç»§ç»­æŒ‰ç…§ä¸‹å›¾å¤‡ä»½</p><p><img src="https://bucket.lxnchan.cn/posts/ufistick/qpt.webp" alt="img" /></p><p>â€‹ä¹‹åæŒ‰ç…§ä¸‹å›¾è¿›è¡Œæ›¿æ¢aboutï¼Œ<strong>ä¹‹ååœ¨å¼¹å‡ºçš„é¡µé¢é€‰æ‹©ä½ æ‰€ä¸‹è½½çš„emmc_appsboot-test-signed.mbn</strong></p><p><img src="%E9%9A%8F%E8%BA%ABwifi%E5%88%B7linux/image-20260223040900115.png" alt="image-20260223040900115" /></p><p>â€‹å½“å·¦ä¾§æç¤ºaboutDoneä¹‹åï¼Œè¿›è¡Œæ ¼å¼åŒ–boot</p><p><img src="%E9%9A%8F%E8%BA%ABwifi%E5%88%B7linux/image-20260223041037126.png" alt="image-20260223041037126" /></p><p>â€‹ä¹‹åå°±å¯ä»¥é‡å¯äº†ï¼Œé‡å¯ä¹‹åæ‰§è¡Œ<code>adb reboot bootloader</code>è¿›å…¥fastbootæ¨¡å¼ï¼Œå°±å¯ä»¥è¿›è¡Œåˆ·å…¥ç³»ç»Ÿäº†ï¼Œåœ¨<a href="https://github.com/OpenStick/OpenStick">OpenStick</a>å†…ä¸‹è½½ç³»ç»Ÿäº†ï¼Œä¸‹è½½å®Œæˆåè¿è¡Œå‹ç¼©åŒ…å†…çš„flash.batå°±å¯ä»¥åˆ·å…¥äº†ï¼ŒæœŸé—´ç‚¹å‡ ä¸ªå›è½¦</p><h3 id="å®‰è£…-rndis-ç½‘ç»œé©±åŠ¨"><a class="markdownIt-Anchor" href="#å®‰è£…-rndis-ç½‘ç»œé©±åŠ¨"></a> å®‰è£… RNDIS ç½‘ç»œé©±åŠ¨</h3><p>â€‹é‡æ–°æ’å…¥éšèº« WiFIï¼Œæ‰“å¼€ä»»åŠ¡ç®¡ç†å™¨ï¼Œåœ¨å…¶ä»–è®¾å¤‡ä¸­ä¼šå‡ºç°ä¸€ä¸ªæœªçŸ¥è®¾å¤‡æˆ–ä»¥ RNDIS å¼€å¤´çš„è®¾å¤‡</p><blockquote><p>å¦‚æœè®¾å¤‡ç®¡ç†å™¨åªæ˜¾ç¤º Android Deviceï¼Œå³é”®æ›´æ–°é©±åŠ¨ç¨‹åºï¼Œä¾æ¬¡é€‰æ‹©<strong>æ›´æ–°é©±åŠ¨ç¨‹åº</strong>â€“&gt;<strong>æµè§ˆæˆ‘çš„ç”µè„‘ä»¥æŸ¥æ‰¾é©±åŠ¨ç¨‹åºâ€“&gt;è®©æˆ‘ä»è®¡ç®—æœºä¸Šçš„å¯ç”¨é©±åŠ¨ç¨‹åºåˆ—è¡¨ä¸­é€‰å–-&gt;å»æ‰æ‰“å‹¾æ˜¾ç¤ºå…¼å®¹ç¡¬ä»¶-&gt;å·¦ä¾§æ‰¾åˆ°Microsoftï¼Œå³ä¾§æ‰¾åˆ°USBç§»åŠ¨å®½å¸¦ç½‘ç»œé€‚é…å™¨-&gt;å®‰è£…</strong>ï¼Œç„¶åé‡æ–°æ’å…¥éšèº« WiFiï¼Œä¼šå‡ºç°ä¸€ä¸ªæœªçŸ¥è®¾å¤‡ï¼Œå†æ ¹æ®ä¸‹è¿°æ­¥éª¤è¿›è¡Œæ“ä½œã€‚</p></blockquote><p><img src="%E9%9A%8F%E8%BA%ABwifi%E5%88%B7linux/6576ceae713b7.png" alt="image-20231211002244435" /></p><p>â€‹å³é”®ï¼Œ<strong>æ›´æ–°é©±åŠ¨ç¨‹åº</strong>â€“&gt;<strong>æµè§ˆæˆ‘çš„ç”µè„‘ä»¥æŸ¥æ‰¾é©±åŠ¨ç¨‹åº</strong>â€“&gt;<strong>è®©æˆ‘ä»è®¡ç®—æœºä¸Šçš„å¯ç”¨é©±åŠ¨ç¨‹åºåˆ—è¡¨ä¸­é€‰å–</strong>â€“&gt;<strong>æ˜¾ç¤ºæ‰€æœ‰è®¾å¤‡</strong>ï¼Œç­‰å¾…åˆ—è¡¨åŠ è½½å®Œæˆã€‚</p><p><img src="%E9%9A%8F%E8%BA%ABwifi%E5%88%B7linux/6576ced636acb.png" alt="image-20231211002348468" /></p><p>â€‹å·¦ä¾§é€‰æ‹© <strong>Microsoft</strong>ï¼Œå³ä¾§é€‰æ‹© <strong>åŸºäºè¿œç¨‹ NDIS çš„ Internet å…±äº«è®¾å¤‡</strong>ï¼Œåœ¨å¼¹å‡ºçª—å£ä¸­é€‰æ‹©æ˜¯ï¼Œå¹¶ç¡®å®šã€‚</p><p><img src="%E9%9A%8F%E8%BA%ABwifi%E5%88%B7linux/6576cee2bd3a7.png" alt="image-20231211002724457" /></p><p>â€‹è‡³æ­¤ï¼ŒRNDIS é©±åŠ¨å®‰è£…æˆåŠŸã€‚</p><p><img src="%E9%9A%8F%E8%BA%ABwifi%E5%88%B7linux/6576cf3d95a0f.png" alt="image-20231211002850196" /></p><h3 id="ç™»å½•debian"><a class="markdownIt-Anchor" href="#ç™»å½•debian"></a> ç™»å½•debian</h3><p>â€‹é©±åŠ¨å®‰è£…æˆåŠŸåï¼Œç”µè„‘ä¸Šä¼šå¤šå‡ºä¸€ä¸ªåå« <code>4G_UFI_123456</code> çš„ NDIS è®¾å¤‡ï¼ŒåŒæ—¶ä¼šå‡ºç°ä¸€ä¸ªåŒåçš„çƒ­ç‚¹ï¼Œå¯†ç ä¸º <strong>12345678</strong>ã€‚</p><p>â€‹Debian é»˜è®¤ç”¨æˆ·åä¸º userï¼Œå¯†ç ä¸º 1ï¼Œroot å¯†ç ä¹Ÿä¸º 1ã€‚<strong>è¯·åŠ¡å¿…åŠæ—¶ä¿®æ”¹å¯†ç ï¼ˆå‘½ä»¤ï¼špasswdï¼‰ã€‚</strong></p><p>â€‹æ­¤æ—¶å¯ä»¥é€šè¿‡ adb æˆ– ssh è¿æ¥åˆ° Debian ç»ˆç«¯ã€‚</p><h3 id="é€šè¿‡-adb-è¿æ¥"><a class="markdownIt-Anchor" href="#é€šè¿‡-adb-è¿æ¥"></a> é€šè¿‡ adb è¿æ¥</h3><p>â€‹å°†éšèº« WiFi æ’å…¥ç”µè„‘ USB æ¥å£ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹å·²è¿æ¥ adb è®¾å¤‡ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">adb devices</span><br><span class="line">C:\Users\Thinkpad&gt;adb devices</span><br><span class="line">List of devices attached</span><br><span class="line">0123456789      device</span><br></pre></td></tr></table></figure><p>â€‹æœ‰æ–°è®¾å¤‡å‡ºç°æ—¶ï¼Œä½¿ç”¨ä»¥ä¸‹æŒ‡ä»¤è¿›å…¥ bashï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell</span><br></pre></td></tr></table></figure><p>â€‹é€šè¿‡ adb è¿æ¥æ—¶ï¼Œä½¿ç”¨ <code>nmtui</code>ã€<code>htop</code> ç­‰éœ€è¦æ˜¾ç¤ºå›¾å½¢çš„å‘½ä»¤ï¼Œå¯èƒ½ä¼šå‡ºç°å¦‚ä¸‹é”™è¯¯ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root@openstick:/# nmtui</span><br><span class="line">TERM environment variable needs set.</span><br></pre></td></tr></table></figure><p>â€‹è®¾ç½® <code>TERM</code> ç¯å¢ƒå˜é‡å³å¯è§£å†³ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export TERM=linux</span><br></pre></td></tr></table></figure><h3 id="é€šè¿‡-ssh-è¿æ¥"><a class="markdownIt-Anchor" href="#é€šè¿‡-ssh-è¿æ¥"></a> é€šè¿‡ ssh è¿æ¥</h3><p>â€‹å°†éšèº« WiFi æ’å…¥ç”µè„‘ USB æ¥å£æˆ–è¿æ¥ä¸Šéšèº« WiFi çš„çƒ­ç‚¹ï¼Œä½¿ç”¨ä»¥ä¸‹æŒ‡ä»¤è¿›è¡Œè¿æ¥ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh root@192.168.68.1</span><br></pre></td></tr></table></figure><p>â€‹é»˜è®¤ç™»é™†å¯†ç ä¸º1ï¼Œå¦‚æœè¿ä¸ä¸Šè¯´æ˜ç³»ç»Ÿè¿˜åœ¨å¯åŠ¨ï¼Œè¯·ç¨åå†è¯•ã€‚</p><h3 id="éšèº«-wifi-è”ç½‘"><a class="markdownIt-Anchor" href="#éšèº«-wifi-è”ç½‘"></a> éšèº« WiFi è”ç½‘</h3><p>â€‹æ­¤æ—¶éšèº« WiFi å¹¶æ²¡æœ‰è”ç½‘ï¼Œå¿…é¡»è¦å…³é—­çƒ­ç‚¹æ‰èƒ½è¿æ¥ WiFiã€‚ä¸‹é¢ä»‹ç»è¯¦ç»†æ­¥éª¤ã€‚</p><p>â€‹é¦–å…ˆæ‰“å¼€å‘½ä»¤æç¤ºç¬¦ï¼Œæ‰§è¡Œ <code>adb shell</code> è¿›å…¥ Debian ç»ˆç«¯ã€‚ç„¶åè®¾ç½® TERM ç¯å¢ƒå˜é‡ï¼š<code>export TERM=linux</code>ã€‚</p><p>â€‹æ‰§è¡Œ <code>nmtui</code>ï¼Œé€‰æ‹©â€œç¼–è¾‘è¿æ¥â€ã€‚</p><p><a href="https://img-cdn.boochi.cn/i/2023/12/11/6576cf5cb34d0.png"><img src="%E9%9A%8F%E8%BA%ABwifi%E5%88%B7linux/6576cf5cb34d0.png" alt="image-20231211005030766" /></a></p><p>â€‹å·¦ä¾§ä½¿ç”¨æ–¹å‘é”®é€‰æ‹© <code>bridge</code>ï¼Œå³ä¾§é€‰æ‹©â€œç¼–è¾‘â€ã€‚å¹¶å›è½¦ã€‚</p><p><a href="https://img-cdn.boochi.cn/i/2023/12/11/6576cf6e3537f.png"><img src="%E9%9A%8F%E8%BA%ABwifi%E5%88%B7linux/6576cf6e3537f.png" alt="image-20231211005119460" /></a></p><p>â€‹åˆ é™¤å…¶ä¸­çš„ <code>wifi</code>ï¼Œå¹¶é€‰æ‹©ç¡®å®šã€‚</p><p><a href="https://img-cdn.boochi.cn/i/2023/12/11/6576cf8484bd9.png"><img src="%E9%9A%8F%E8%BA%ABwifi%E5%88%B7linux/6576cf8484bd9.png" alt="image-20231211005229505" /></a></p><p><a href="https://img-cdn.boochi.cn/i/2023/12/11/6576cf944056e.png"><img src="%E9%9A%8F%E8%BA%ABwifi%E5%88%B7linux/6576cf944056e.png" alt="image-20231211005307459" /></a></p><p>â€‹è¿”å›ï¼Œé€‰æ‹©å¯ç”¨è¿æ¥ï¼Œåˆ™å¯è¿æ¥ WiFiã€‚</p><p><a href="https://img-cdn.boochi.cn/i/2023/12/11/6576cf9b13fd4.png"><img src="%E9%9A%8F%E8%BA%ABwifi%E5%88%B7linux/6576cf9b13fd4.png" alt="img" /></a></p><p>â€‹ä¹‹åå°±å¯ä»¥åœ¨åŒä¸€ä¸ªwifiç¯å¢ƒä¸‹ï¼Œç”¨ç”µè„‘è¿›è¡Œsshç™»å½•</p><h3 id="ä¼˜åŒ–ç³»ç»Ÿ"><a class="markdownIt-Anchor" href="#ä¼˜åŒ–ç³»ç»Ÿ"></a> ä¼˜åŒ–ç³»ç»Ÿ</h3><p>â€‹åˆ é™¤æ— æ•ˆè½¯ä»¶åŒ…ä»“åº“</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm -rf /etc/apt/sources.list.d/*</span><br></pre></td></tr></table></figure><p>â€‹åˆ é™¤å¤šä½™è½¯ä»¶åŒ…</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt autopurge -y adoptopenjdk-8-hotspot</span><br></pre></td></tr></table></figure><p>â€‹æ›´æ¢è½¯ä»¶æº</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">cat &lt;&lt;EOF&gt; /etc/apt/sources.list</span><br><span class="line">deb http://mirrors.ustc.edu.cn/debian/ bullseye main contrib non-free</span><br><span class="line"># deb-src http://mirrors.ustc.edu.cn/debian/ bullseye main contrib non-free</span><br><span class="line"></span><br><span class="line">deb http://mirrors.ustc.edu.cn/debian/ bullseye-updates main contrib non-free</span><br><span class="line"># deb-src http://mirrors.ustc.edu.cn/debian/ bullseye-updates main contrib non-free</span><br><span class="line"></span><br><span class="line">#deb http://mirrors.ustc.edu.cn/debian/ bullseye-backports main contrib non-free</span><br><span class="line"># deb-src http://mirrors.ustc.edu.cn/debian/ bullseye-backports main contrib non-free</span><br><span class="line"></span><br><span class="line">deb http://mirrors.ustc.edu.cn/debian-security/ bullseye-security main contrib non-free</span><br><span class="line"># deb-src http://mirrors.ustc.edu.cn/debian-security/ bullseye-security main contrib non-free</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure><p>æ›´æ–°è½¯ä»¶åŒ…</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt update &amp;&amp; apt upgrade -y</span><br></pre></td></tr></table></figure><p>å®‰è£…å¸¸ç”¨è½¯ä»¶åŒ…</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install -y nano curl</span><br></pre></td></tr></table></figure><p>åˆ é™¤è½¯ä»¶åŒ…ç¼“å­˜</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt clean</span><br></pre></td></tr></table></figure><hr /><h3 id="question"><a class="markdownIt-Anchor" href="#question"></a> Question</h3><h4 id="ä¸ºä»€ä¹ˆè£…å®Œç¯ä¸äº®"><a class="markdownIt-Anchor" href="#ä¸ºä»€ä¹ˆè£…å®Œç¯ä¸äº®"></a> <strong>ä¸ºä»€ä¹ˆè£…å®Œç¯ä¸äº®ï¼Ÿ</strong></h4><h5 id="è§£å†³åŠæ³•"><a class="markdownIt-Anchor" href="#è§£å†³åŠæ³•"></a> è§£å†³åŠæ³•</h5><p>â€‹åŸå› æ˜¯æœ‰çš„ç¯çš„GPIOå£ä¸åˆ·å…¥ç³»ç»Ÿçš„åº•å±‚ç»‘å®šçš„GPIOå£ä¸ç¬¦åˆï¼Œéœ€è¦è‡ªå·±æ‰¾å‡ºæ¥ï¼Œå®‰è£…<code>gpiod</code>æ¥æ“ä½œGPIOå£</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt update &amp;&amp; <span class="built_in">sudo</span> apt install gpiod -y</span><br></pre></td></tr></table></figure><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">gpiodetect<span class="comment"># å¯ä»¥æŸ¥çœ‹æ‰€æœ‰çš„GPIOç»„</span></span><br><span class="line"><span class="comment"># è¾“å‡ºç±»ä¼¼äºï¼š</span></span><br><span class="line">&gt;gpiochip0 [1000000.pinctrl] (122 lines)</span><br><span class="line">&gt;gpiochip1 [200f000.spmi:pmic@0:mpps@a000] (4 lines)</span><br><span class="line">&gt;gpiochip2 [200f000.spmi:pmic@0:gpios@c000] (4 lines)</span><br></pre></td></tr></table></figure><p>â€‹ç„¶åé€šè¿‡ï¼Œä¸‹é¢å‘½ä»¤æŸ¥çœ‹å¼•è„šGPIOçŠ¶æ€</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gpioinfo gpiochip0</span><br></pre></td></tr></table></figure><p>===============================</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> gpioset gpiochip0 20=1<span class="comment">#è¡¨ç¤ºå°†GPIO 20 ç½®äºé«˜ç”µå¹³</span></span><br></pre></td></tr></table></figure><p>â€‹å¦‚æœæ§åˆ¶è‡ªå·±çš„20ï¼Œ21ï¼Œ22å£ç¯æ²¡æœ‰å˜åŒ–ï¼Œåˆ™å¯èƒ½å°±æ˜¯GPIOå£ä¸åˆ·å…¥ç³»ç»Ÿçš„åº•å±‚ç»‘å®šçš„GPIOå£ä¸ç¬¦åˆï¼Œå¯ä»¥é€šè¿‡æš´åŠ›æšä¸¾è§‚å¯Ÿ</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æš´åŠ›æšä¸¾ gpiochip0 çš„ 0-50 å·å¼•è„šå¯è‡ªå·±æ›´æ”¹å…¶ä»–çš„å¼•è„š</span></span><br><span class="line"><span class="comment"># gpiochip1å’Œgpiochip2ä¸è¦åŠ¨</span></span><br><span class="line"><span class="comment"># è¿™é‡Œçš„å¼•è„šèŒƒå›´å¯ä»¥æ ¹æ®gpioinfo gpiochip0æŸ¥çœ‹å¼•è„šç¼–å·èŒƒå›´</span></span><br><span class="line"><span class="keyword">for</span> offset <span class="keyword">in</span> &#123;0..50&#125;; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;Testing gpiochip0 offset <span class="variable">$offset</span>&quot;</span></span><br><span class="line">    <span class="built_in">sudo</span> gpioset gpiochip0 <span class="variable">$offset</span>=1</span><br><span class="line">    <span class="built_in">sleep</span> 0.5</span><br><span class="line">    <span class="built_in">sudo</span> gpioset gpiochip0 <span class="variable">$offset</span>=0</span><br><span class="line">    <span class="built_in">sleep</span> 0.2</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><p>â€‹æˆ‘çš„æƒ…å†µæ˜¯114ç”µæºç»¿,115ç”µæºçº¢ï¼Œ7ä¸ºwifiç»¿,31ä¸ºæ•°æ®ç»¿</p><h5 id="éœ€æ±‚"><a class="markdownIt-Anchor" href="#éœ€æ±‚"></a> <strong>éœ€æ±‚ï¼š</strong></h5><p><strong>1ã€å¼€æœºçŠ¶æ€ä¸‹114å£å¸¸äº®</strong></p><ol><li><p><strong>ç¼–è¾‘ rc.local</strong></p> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> nano /etc/rc.local</span><br></pre></td></tr></table></figure></li><li><p><strong>åœ¨ <code>exit 0</code> ä¹‹å‰åŠ ä¸Šè¿™è¡Œ</strong></p> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gpioset gpiochip0 114=1</span><br></pre></td></tr></table></figure><p>å®Œæ•´ç¤ºä¾‹ï¼š</p> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line">gpioset gpiochip0 114=1</span><br><span class="line"><span class="built_in">exit</span> 0</span><br></pre></td></tr></table></figure></li><li><p><strong>ä¿å­˜é€€å‡º</strong>ï¼ˆCtrl+Xï¼ŒæŒ‰ Yï¼Œå›è½¦ï¼‰</p></li><li><p><strong>ç»™æ‰§è¡Œæƒé™</strong></p> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> <span class="built_in">chmod</span> +x /etc/rc.local</span><br></pre></td></tr></table></figure></li><li><p><strong>æµ‹è¯•ä¸€ä¸‹</strong></p> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> /etc/rc.local</span><br></pre></td></tr></table></figure><p>å¦‚æœç¯äº®äº†ï¼Œè¯´æ˜è„šæœ¬æ²¡é—®é¢˜ï¼Œé‡å¯åä¼šè‡ªåŠ¨æ‰§è¡Œã€‚</p></li></ol><hr /><p><strong>2ã€å½“è¿æ¥ä¸Šwifiåï¼Œè‹¥æœ‰æ•°æ®ä¼ å…¥ä¼ å‡ºåˆ™è®©7å£ç¯é—ªçƒï¼Œä¼ è¾“å¿«åˆ°æŸä¸ªé˜ˆå€¼åˆ™å¸¸é‡</strong></p><p>ğŸ“Œ <strong>å‚æ•°å¾®è°ƒ</strong></p><table><thead><tr><th style="text-align:left">å‚æ•°</th><th style="text-align:left">ä½œç”¨</th><th style="text-align:left">ä½ çš„æ¿å­å»ºè®®</th></tr></thead><tbody><tr><td style="text-align:left"><code>HIGH_THRESHOLD</code></td><td style="text-align:left">å¸¸äº®é˜ˆå€¼</td><td style="text-align:left">5000ï¼ˆçº¦ 40kbpsï¼‰</td></tr><tr><td style="text-align:left"><code>LOW_THRESHOLD</code></td><td style="text-align:left">ç†„ç­é˜ˆå€¼</td><td style="text-align:left">100</td></tr><tr><td style="text-align:left"><code>MEDIUM_DELAY</code></td><td style="text-align:left">ä¸­é€Ÿé—ªé—´éš”</td><td style="text-align:left">0.3 ç§’</td></tr></tbody></table><p>ä½ å¯ä»¥æ ¹æ®å®é™…ç½‘é€Ÿè°ƒæ•´è¿™äº›æ•°å€¼ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é…ç½®</span></span><br><span class="line">INTERFACE=<span class="string">&quot;wlan0&quot;</span></span><br><span class="line">GPIO=7</span><br><span class="line">UPDATE_INTERVAL=0.2</span><br><span class="line">HIGH_THRESHOLD=5000</span><br><span class="line">LOW_THRESHOLD=100</span><br><span class="line">MEDIUM_DELAY=0.3</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> none | <span class="built_in">sudo</span> <span class="built_in">tee</span> /sys/class/leds/*/trigger 2&gt;/dev/null</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">get_traffic</span></span>() &#123;</span><br><span class="line">    <span class="built_in">cat</span> /proc/net/dev | grep <span class="string">&quot;<span class="variable">$INTERFACE</span>&quot;</span> | awk <span class="string">&#x27;&#123;print $2 + $10&#125;&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">prev_tx=$(get_traffic)</span><br><span class="line"><span class="keyword">while</span> <span class="literal">true</span>; <span class="keyword">do</span></span><br><span class="line">    curr_tx=$(get_traffic)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># ä½¿ç”¨ awk åšè®¡ç®—ï¼ˆé¿å… Bash çš„æ•´æ•°é™åˆ¶ï¼‰</span></span><br><span class="line">    diff=$(awk -v curr=<span class="variable">$curr_tx</span> -v prev=<span class="variable">$prev_tx</span> <span class="string">&#x27;BEGIN &#123;diff=curr-prev; if(diff&lt;0) diff=0; print diff&#125;&#x27;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># ä½¿ç”¨ awk åšæ¯”è¾ƒ</span></span><br><span class="line">    high=$(awk -v d=<span class="variable">$diff</span> -v h=<span class="variable">$HIGH_THRESHOLD</span> <span class="string">&#x27;BEGIN &#123;print (d&gt;h)&#125;&#x27;</span>)</span><br><span class="line">    low=$(awk -v d=<span class="variable">$diff</span> -v l=<span class="variable">$LOW_THRESHOLD</span> <span class="string">&#x27;BEGIN &#123;print (d&lt;l)&#125;&#x27;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$high</span> -eq 1 ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">sudo</span> gpioset gpiochip0 <span class="variable">$GPIO</span>=1</span><br><span class="line">        <span class="built_in">sleep</span> <span class="variable">$UPDATE_INTERVAL</span></span><br><span class="line">    <span class="keyword">elif</span> [ <span class="variable">$low</span> -eq 1 ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">sudo</span> gpioset gpiochip0 <span class="variable">$GPIO</span>=0</span><br><span class="line">        <span class="built_in">sleep</span> <span class="variable">$UPDATE_INTERVAL</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">sudo</span> gpioset gpiochip0 <span class="variable">$GPIO</span>=1</span><br><span class="line">        <span class="built_in">sleep</span> <span class="variable">$MEDIUM_DELAY</span></span><br><span class="line">        <span class="built_in">sudo</span> gpioset gpiochip0 <span class="variable">$GPIO</span>=0</span><br><span class="line">        <span class="built_in">sleep</span> <span class="variable">$MEDIUM_DELAY</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">    prev_tx=<span class="variable">$curr_tx</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><hr /><p>ğŸ¯ <strong>æ•ˆæœè¯´æ˜</strong></p><table><thead><tr><th style="text-align:left">æµé‡çŠ¶æ€</th><th style="text-align:left">ç¯çš„è¡Œä¸º</th></tr></thead><tbody><tr><td style="text-align:left"><strong>æ— æµé‡</strong> (<code>&lt;100 bytes/s</code>)</td><td style="text-align:left">ç†„ç­</td></tr><tr><td style="text-align:left"><strong>å°‘é‡æµé‡</strong> (<code>100-5000</code>)</td><td style="text-align:left">æ…¢é—ªï¼ˆ0.3ç§’é—´éš”ï¼‰</td></tr><tr><td style="text-align:left"><strong>å¤§é‡ä¸‹è½½</strong> (<code>&gt;5000 bytes/s</code>)</td><td style="text-align:left"><strong>å¸¸äº®</strong></td></tr></tbody></table><hr /><p>âš™ï¸ <strong>å®‰è£…è¿è¡Œ</strong></p><p>1ï¸âƒ£ <strong>ä¿å­˜è„šæœ¬</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> nano /usr/local/bin/net-led.sh</span><br></pre></td></tr></table></figure><p>ç²˜è´´ä¸Šé¢çš„å†…å®¹ï¼Œä¿å­˜é€€å‡ºï¼ˆCtrl+Xï¼ŒæŒ‰ Yï¼Œå›è½¦ï¼‰ã€‚</p><p>2ï¸âƒ£ <strong>ç»™æƒé™</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> <span class="built_in">chmod</span> +x /usr/local/bin/net-led.sh</span><br></pre></td></tr></table></figure><p>3ï¸âƒ£ <strong>æµ‹è¯•</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> /usr/local/bin/net-led.sh</span><br></pre></td></tr></table></figure><p>ç”¨æ‰‹æœºè¿ WiFi ä¸‹è½½ä¸ªæ–‡ä»¶ï¼Œçœ‹ç¯æ˜¯ä¸æ˜¯å¸¸äº®äº†ï¼ŒæŒ‰ctrl+cç»“æŸè„šæœ¬ã€‚</p><p><strong>è®¾ç½®æˆæ­£ç¡®çš„å¼€æœºè‡ªå¯æ–¹æ¡ˆ</strong></p><p>1ï¸âƒ£ <strong>æŠŠä¹‹å‰çš„è„šæœ¬æ”¹æˆå¼€æœºè‡ªå¯çš„ systemd æœåŠ¡</strong></p><p>å…ˆç¡®ä¿ä½ çš„è„šæœ¬æ˜¯å®Œæ•´çš„ï¼ˆåŒ…å«æµé‡ç›‘æ§å’Œé—ªçƒé€»è¾‘ï¼‰ï¼Œç„¶ååˆ›å»ºæœåŠ¡ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> nano /etc/systemd/system/net-led.service</span><br></pre></td></tr></table></figure><p>ç²˜è´´ä»¥ä¸‹å†…å®¹ï¼š</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[Unit]</span></span><br><span class="line"><span class="attr">Description</span>=Network Traffic LED</span><br><span class="line"><span class="attr">After</span>=network.target multi-user.target</span><br><span class="line"></span><br><span class="line"><span class="section">[Service]</span></span><br><span class="line"><span class="attr">Type</span>=simple</span><br><span class="line"><span class="attr">ExecStart</span>=/usr/local/bin/net-led.sh</span><br><span class="line"><span class="attr">Restart</span>=always</span><br><span class="line"><span class="attr">User</span>=root</span><br><span class="line"></span><br><span class="line"><span class="section">[Install]</span></span><br><span class="line"><span class="attr">WantedBy</span>=multi-user.target</span><br></pre></td></tr></table></figure><p>2ï¸âƒ£ <strong>ç¡®ä¿è„šæœ¬æœ‰æ‰§è¡Œæƒé™</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> <span class="built_in">chmod</span> +x /usr/local/bin/net-led.sh</span><br></pre></td></tr></table></figure><p>3ï¸âƒ£ <strong>å¯ç”¨å¹¶å¯åŠ¨æœåŠ¡</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl <span class="built_in">enable</span> net-led.service</span><br><span class="line"><span class="built_in">sudo</span> systemctl start net-led.service</span><br></pre></td></tr></table></figure><p>4ï¸âƒ£ <strong>éªŒè¯</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl status net-led.service</span><br></pre></td></tr></table></figure><p>åº”è¯¥æ˜¾ç¤º <code>active (running)</code>ï¼Œå¹¶ä¸” GPIO 114 å¼€å§‹éšæµé‡é—ªçƒã€‚</p><h4 id="åœ¨linuxé‡ŒæŸ¥çœ‹æ¿å­å‹å·"><a class="markdownIt-Anchor" href="#åœ¨linuxé‡ŒæŸ¥çœ‹æ¿å­å‹å·"></a> åœ¨linuxé‡ŒæŸ¥çœ‹æ¿å­å‹å·</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> /sys/firmware/devicetree/base/model</span><br><span class="line"><span class="comment"># è¿”å›ä¾‹å¦‚</span></span><br><span class="line">&gt;Handsome OpenStick UFI003MB</span><br></pre></td></tr></table></figure><h3 id="cups"><a class="markdownIt-Anchor" href="#cups"></a> cups</h3><h4 id="å¸¸ç”¨å‘½ä»¤"><a class="markdownIt-Anchor" href="#å¸¸ç”¨å‘½ä»¤"></a> å¸¸ç”¨å‘½ä»¤</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹æ‰“å°æœºçŠ¶æ€</span></span><br><span class="line">lpstat -p -d</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹ CUPS æœåŠ¡çŠ¶æ€</span></span><br><span class="line">systemctl status cups</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹ CUPS ç‰ˆæœ¬</span></span><br><span class="line">cups-config --version</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹æ‰€æœ‰å¯ç”¨å‘½ä»¤</span></span><br><span class="line"><span class="built_in">ls</span> /usr/bin/lp* /usr/sbin/lp*</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯åŠ¨ CUPS æœåŠ¡</span></span><br><span class="line"><span class="built_in">sudo</span> systemctl start cups</span><br><span class="line"></span><br><span class="line"><span class="comment"># åœæ­¢ CUPS æœåŠ¡</span></span><br><span class="line"><span class="built_in">sudo</span> systemctl stop cups</span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡å¯ CUPS æœåŠ¡</span></span><br><span class="line"><span class="built_in">sudo</span> systemctl restart cups</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹å®æ—¶æ—¥å¿—</span></span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">tail</span> -f /var/log/cups/error_log</span><br></pre></td></tr></table></figure><table><thead><tr><th style="text-align:left">å‘½ä»¤</th><th style="text-align:left">æ‰€å±ç›®å½•</th><th style="text-align:left">ä¸»è¦åŠŸèƒ½</th><th style="text-align:left">å¸¸ç”¨ç¤ºä¾‹</th></tr></thead><tbody><tr><td style="text-align:left"><strong><code>lp</code></strong></td><td style="text-align:left"><code>/usr/bin</code></td><td style="text-align:left"><strong>æäº¤æ‰“å°ä»»åŠ¡</strong>ï¼ˆæœ€å¸¸ç”¨ï¼‰</td><td style="text-align:left"><code>lp -d æ‰“å°æœºå æ–‡ä»¶.pdf</code></td></tr><tr><td style="text-align:left"><strong><code>lpr</code></strong></td><td style="text-align:left"><code>/usr/bin</code></td><td style="text-align:left">å¦ä¸€ç§æäº¤æ‰“å°ä»»åŠ¡çš„å‘½ä»¤</td><td style="text-align:left"><code>lpr -P æ‰“å°æœºå æ–‡ä»¶.pdf</code></td></tr><tr><td style="text-align:left"><strong><code>lpq</code></strong></td><td style="text-align:left"><code>/usr/bin</code></td><td style="text-align:left"><strong>æŸ¥çœ‹æ‰“å°é˜Ÿåˆ—</strong>ï¼ˆæŸ¥çœ‹ç­‰å¾…æ‰“å°çš„ä»»åŠ¡ï¼‰</td><td style="text-align:left"><code>lpq -a</code>ï¼ˆæŸ¥çœ‹æ‰€æœ‰é˜Ÿåˆ—ï¼‰</td></tr><tr><td style="text-align:left"><strong><code>lprm</code></strong></td><td style="text-align:left"><code>/usr/bin</code></td><td style="text-align:left"><strong>å–æ¶ˆæ‰“å°ä»»åŠ¡</strong></td><td style="text-align:left"><code>lprm ä»»åŠ¡ID</code> æˆ– <code>lprm -</code>ï¼ˆå–æ¶ˆæ‰€æœ‰ï¼‰</td></tr><tr><td style="text-align:left"><strong><code>lpstat</code></strong></td><td style="text-align:left"><code>/usr/bin</code></td><td style="text-align:left"><strong>æ˜¾ç¤ºæ‰“å°æœºçŠ¶æ€å’Œä»»åŠ¡ä¿¡æ¯</strong></td><td style="text-align:left"><code>lpstat -p -d</code>ï¼ˆæŸ¥çœ‹æ‰“å°æœºï¼‰</td></tr><tr><td style="text-align:left"><strong><code>lpoptions</code></strong></td><td style="text-align:left"><code>/usr/bin</code></td><td style="text-align:left">è®¾ç½®æˆ–æŸ¥çœ‹æ‰“å°é€‰é¡¹</td><td style="text-align:left"><code>lpoptions -d æ‰“å°æœºå</code>ï¼ˆè®¾é»˜è®¤ï¼‰</td></tr><tr><td style="text-align:left"><strong><code>lpunlock</code></strong></td><td style="text-align:left"><code>/usr/bin</code></td><td style="text-align:left">è§£é”è¢«é”å®šçš„æ‰“å°æœºé˜Ÿåˆ—</td><td style="text-align:left"><code>lpunlock æ‰“å°æœºå</code></td></tr><tr><td style="text-align:left"><strong><code>lpadmin</code></strong></td><td style="text-align:left"><code>/usr/sbin</code></td><td style="text-align:left"><strong>æ·»åŠ ã€åˆ é™¤æˆ–é…ç½®æ‰“å°æœº</strong>ï¼ˆéœ€rootï¼‰</td><td style="text-align:left"><code>lpadmin -p æ‰“å°æœºå -v è®¾å¤‡</code></td></tr><tr><td style="text-align:left"><strong><code>lpinfo</code></strong></td><td style="text-align:left"><code>/usr/sbin</code></td><td style="text-align:left">åˆ—å‡ºå¯ç”¨çš„æ‰“å°æœºé©±åŠ¨å’Œæ¥å£</td><td style="text-align:left"><code>lpinfo -v</code>ï¼ˆæŸ¥çœ‹å¯ç”¨è¿æ¥ï¼‰</td></tr><tr><td style="text-align:left"><strong><code>lpmove</code></strong></td><td style="text-align:left"><code>/usr/sbin</code></td><td style="text-align:left">å°†ä»»åŠ¡ä»ä¸€ä¸ªé˜Ÿåˆ—ç§»åˆ°å¦ä¸€ä¸ª</td><td style="text-align:left"><code>lpmove ä»»åŠ¡ID ç›®æ ‡æ‰“å°æœº</code></td></tr><tr><td style="text-align:left"><strong><code>lpc</code></strong></td><td style="text-align:left"><code>/usr/sbin</code></td><td style="text-align:left">æ§åˆ¶æ‰“å°æœºçŠ¶æ€ï¼ˆå¯åŠ¨/åœæ­¢/å¯ç”¨ï¼‰</td><td style="text-align:left"><code>lpc status</code>ï¼ˆæŸ¥çœ‹çŠ¶æ€ï¼‰</td></tr></tbody></table><p>åœ¨ <code>lp</code> å‘½ä»¤ä¸­ï¼Œå¤æ‚çš„æ‰“å°é€‰é¡¹ä¸»è¦é€šè¿‡ <code>-o</code> å‚æ•°æ¥æŒ‡å®šã€‚æ ¹æ® CUPS çš„å®˜æ–¹æ–‡æ¡£ï¼Œä»¥ä¸‹æ˜¯å¸¸ç”¨çš„å¤æ‚æ‰“å°é€‰é¡¹ ï¼š</p><h4 id="é¡µé¢å¸ƒå±€ä¸æ’ç‰ˆé€‰é¡¹"><a class="markdownIt-Anchor" href="#é¡µé¢å¸ƒå±€ä¸æ’ç‰ˆé€‰é¡¹"></a> é¡µé¢å¸ƒå±€ä¸æ’ç‰ˆé€‰é¡¹</h4><table><thead><tr><th style="text-align:left">é€‰é¡¹</th><th style="text-align:left">è¯´æ˜</th><th style="text-align:left">ç¤ºä¾‹å€¼</th></tr></thead><tbody><tr><td style="text-align:left"><code>-o number-up=N</code></td><td style="text-align:left">æ¯å¼ çº¸ä¸Šæ‰“å°Né¡µ</td><td style="text-align:left"><code>2</code>, <code>4</code>, <code>6</code>, <code>9</code>, <code>16</code></td></tr><tr><td style="text-align:left"><code>-o page-border=border</code></td><td style="text-align:left">æ¯é¡µæ·»åŠ è¾¹æ¡†</td><td style="text-align:left"><code>single</code>ï¼ˆå•çº¿ï¼‰, <code>double</code>ï¼ˆåŒçº¿ï¼‰, <code>single-thick</code>ï¼ˆç²—å•çº¿ï¼‰</td></tr><tr><td style="text-align:left"><code>-o number-up-layout=layout</code></td><td style="text-align:left">å¤šé¡µæ’åˆ—é¡ºåº</td><td style="text-align:left"><code>lrtb</code>ï¼ˆä»å·¦åˆ°å³ï¼Œä»ä¸Šåˆ°ä¸‹ï¼‰, <code>tblr</code>ï¼ˆä»ä¸Šåˆ°ä¸‹ï¼Œä»å·¦åˆ°å³ï¼‰ç­‰</td></tr><tr><td style="text-align:left"><code>-o page-set=set</code></td><td style="text-align:left">æ‰“å°ç‰¹å®šé¡µé¢é›†</td><td style="text-align:left"><code>odd</code>ï¼ˆå¥‡æ•°é¡µï¼‰, <code>even</code>ï¼ˆå¶æ•°é¡µï¼‰, <code>booklet</code>ï¼ˆå°å†Œå­ï¼‰</td></tr><tr><td style="text-align:left"><code>-o outputorder=reverse</code></td><td style="text-align:left">é€†åºæ‰“å°</td><td style="text-align:left"><code>reverse</code></td></tr><tr><td style="text-align:left"><code>-o mirror</code></td><td style="text-align:left">é•œåƒæ‰“å°</td><td style="text-align:left">ï¼ˆæ— å€¼ï¼Œç›´æ¥ä½¿ç”¨ï¼‰</td></tr></tbody></table><h4 id="åŒé¢ä¸æ–¹å‘é€‰é¡¹"><a class="markdownIt-Anchor" href="#åŒé¢ä¸æ–¹å‘é€‰é¡¹"></a> åŒé¢ä¸æ–¹å‘é€‰é¡¹</h4><table><thead><tr><th style="text-align:left">é€‰é¡¹</th><th style="text-align:left">è¯´æ˜</th><th style="text-align:left">ç¤ºä¾‹å€¼</th></tr></thead><tbody><tr><td style="text-align:left"><code>-o sides=option</code></td><td style="text-align:left">å•é¢/åŒé¢è®¾ç½®</td><td style="text-align:left"><code>one-sided</code>ï¼ˆå•é¢ï¼‰, <code>two-sided-long-edge</code>ï¼ˆåŒé¢é•¿è¾¹ï¼‰, <code>two-sided-short-edge</code>ï¼ˆåŒé¢çŸ­è¾¹ï¼‰</td></tr><tr><td style="text-align:left"><code>-o orientation-requested=N</code></td><td style="text-align:left">æ‰“å°æ–¹å‘</td><td style="text-align:left"><code>3</code>ï¼ˆçºµå‘ï¼‰, <code>4</code>ï¼ˆæ¨ªå‘é€†æ—¶é’ˆï¼‰, <code>5</code>ï¼ˆæ¨ªå‘é¡ºæ—¶é’ˆï¼‰, <code>6</code>ï¼ˆåå‘çºµå‘ï¼‰</td></tr><tr><td style="text-align:left"><code>-o landscape</code></td><td style="text-align:left">æ¨ªå‘æ‰“å°ï¼ˆç®€åŒ–ç‰ˆï¼‰</td><td style="text-align:left">ï¼ˆæ— å€¼ï¼Œç›´æ¥ä½¿ç”¨ï¼‰</td></tr></tbody></table><h4 id="çº¸å¼ ä¸è´¨é‡é€‰é¡¹"><a class="markdownIt-Anchor" href="#çº¸å¼ ä¸è´¨é‡é€‰é¡¹"></a> çº¸å¼ ä¸è´¨é‡é€‰é¡¹</h4><table><thead><tr><th style="text-align:left">é€‰é¡¹</th><th style="text-align:left">è¯´æ˜</th><th style="text-align:left">ç¤ºä¾‹å€¼</th></tr></thead><tbody><tr><td style="text-align:left"><code>-o media=size</code></td><td style="text-align:left">çº¸å¼ å¤§å°</td><td style="text-align:left"><code>A4</code>, <code>Letter</code>, <code>Legal</code></td></tr><tr><td style="text-align:left"><code>-o media=size,type</code></td><td style="text-align:left">çº¸å¼ å¤§å°å’Œç±»å‹</td><td style="text-align:left"><code>A4,Transparency</code>ï¼ˆA4é€æ˜èƒ¶ç‰‡ï¼‰</td></tr><tr><td style="text-align:left"><code>-o media=source</code></td><td style="text-align:left">çº¸ç›’æ¥æº</td><td style="text-align:left"><code>Upper</code>ï¼ˆä¸Šçº¸ç›’ï¼‰, <code>Lower</code>ï¼ˆä¸‹çº¸ç›’ï¼‰, <code>MultiPurpose</code>ï¼ˆå¤šåŠŸèƒ½çº¸ç›’ï¼‰</td></tr><tr><td style="text-align:left"><code>-o print-quality=N</code></td><td style="text-align:left">æ‰“å°è´¨é‡</td><td style="text-align:left"><code>3</code>ï¼ˆè‰ç¨¿ï¼‰, <code>4</code>ï¼ˆæ ‡å‡†ï¼‰, <code>5</code>ï¼ˆæœ€ä½³ï¼‰</td></tr></tbody></table><h4 id="ç¼©æ”¾ä¸é€‚é…é€‰é¡¹"><a class="markdownIt-Anchor" href="#ç¼©æ”¾ä¸é€‚é…é€‰é¡¹"></a> ç¼©æ”¾ä¸é€‚é…é€‰é¡¹</h4><table><thead><tr><th style="text-align:left">é€‰é¡¹</th><th style="text-align:left">è¯´æ˜</th><th style="text-align:left">ç¤ºä¾‹å€¼</th></tr></thead><tbody><tr><td style="text-align:left"><code>-o fit-to-page</code></td><td style="text-align:left">ç¼©æ”¾ä»¥é€‚åˆé¡µé¢</td><td style="text-align:left">ï¼ˆæ— å€¼ï¼Œç›´æ¥ä½¿ç”¨ï¼‰</td></tr><tr><td style="text-align:left"><code>-o scaling=N</code></td><td style="text-align:left">ç¼©æ”¾ç™¾åˆ†æ¯”</td><td style="text-align:left"><code>75</code>ï¼ˆç¼©æ”¾75%ï¼‰</td></tr></tbody></table><h4 id="å…¶ä»–é€‰é¡¹"><a class="markdownIt-Anchor" href="#å…¶ä»–é€‰é¡¹"></a> å…¶ä»–é€‰é¡¹</h4><table><thead><tr><th style="text-align:left">é€‰é¡¹</th><th style="text-align:left">è¯´æ˜</th><th style="text-align:left">ç¤ºä¾‹å€¼</th></tr></thead><tbody><tr><td style="text-align:left"><code>-o collate=true</code></td><td style="text-align:left">é€ä»½æ‰“å°</td><td style="text-align:left"><code>true</code> æˆ– <code>false</code></td></tr><tr><td style="text-align:left"><code>-o job-sheets=name</code></td><td style="text-align:left">æ·»åŠ å°é¢é¡µ</td><td style="text-align:left"><code>standard</code>, <code>classified</code>, <code>confidential</code>, <code>topsecret</code></td></tr><tr><td style="text-align:left"><code>-o page-ranges=page-list</code></td><td style="text-align:left">æŒ‡å®šé¡µç èŒƒå›´</td><td style="text-align:left"><code>1-5</code>, <code>1,3,5-7</code></td></tr><tr><td style="text-align:left"><code>-o job-priority=priority</code></td><td style="text-align:left">ä»»åŠ¡ä¼˜å…ˆçº§</td><td style="text-align:left"><code>1</code>ï¼ˆæœ€ä½ï¼‰åˆ° <code>100</code>ï¼ˆæœ€é«˜ï¼‰</td></tr></tbody></table><h3 id="æŒ‚è½½ç¡¬ç›˜ç›’"><a class="markdownIt-Anchor" href="#æŒ‚è½½ç¡¬ç›˜ç›’"></a> æŒ‚è½½ç¡¬ç›˜ç›’</h3><h4 id="å®‰è£…usbå·¥å…·"><a class="markdownIt-Anchor" href="#å®‰è£…usbå·¥å…·"></a> å®‰è£…USBå·¥å…·</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ›´æ–°è½¯ä»¶æº</span></span><br><span class="line"><span class="built_in">sudo</span> apt update</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®‰è£… USB åŸºç¡€å·¥å…·</span></span><br><span class="line"><span class="built_in">sudo</span> apt install usbutils usb-modeswitch</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®‰è£…æ–‡ä»¶ç³»ç»Ÿæ”¯æŒï¼ˆç”¨äºè¯†åˆ«ç¡¬ç›˜æ ¼å¼ï¼‰</span></span><br><span class="line"><span class="built_in">sudo</span> apt install ntfs-3g exfat-fuse exfat-utils</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œä¸‹é¢ä»£ç ï¼Œä¸æ˜¯æ‰€æœ‰éƒ½é€‚ç”¨</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> &gt; usb_switch.sh &lt;&lt; <span class="string">&#x27;EOF&#x27;</span></span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># USB æ¨¡å¼åˆ‡æ¢è„šæœ¬ - æ”¯æŒ host/gadget åˆ‡æ¢å¹¶è‡ªåŠ¨æŒ‚è½½/å¸è½½ç¡¬ç›˜</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é¢œè‰²å®šä¹‰</span></span><br><span class="line">RED=<span class="string">&#x27;\033[0;31m&#x27;</span></span><br><span class="line">GREEN=<span class="string">&#x27;\033[0;32m&#x27;</span></span><br><span class="line">YELLOW=<span class="string">&#x27;\033[1;33m&#x27;</span></span><br><span class="line">BLUE=<span class="string">&#x27;\033[0;34m&#x27;</span></span><br><span class="line">NC=<span class="string">&#x27;\033[0m&#x27;</span> <span class="comment"># No Color</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é…ç½®</span></span><br><span class="line">MOUNT_POINT=<span class="string">&quot;/mnt/nas&quot;</span></span><br><span class="line">USB_ROLE_FILE=<span class="string">&quot;/sys/kernel/debug/usb/ci_hdrc.0/role&quot;</span></span><br><span class="line">LOG_FILE=<span class="string">&quot;/var/log/usb_switch.log&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¾ç¤ºä½¿ç”¨æ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="title">show_usage</span></span>() &#123;</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;ç”¨æ³•: <span class="variable">$0</span> [host|gadget|status]&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;  host    - åˆ‡æ¢åˆ°ä¸»æœºæ¨¡å¼ï¼ˆè¿æ¥ç¡¬ç›˜ï¼‰å¹¶è‡ªåŠ¨æŒ‚è½½&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;  gadget  - åˆ‡æ¢åˆ°è®¾å¤‡æ¨¡å¼ï¼ˆè¿æ¥ç”µè„‘ï¼‰å¹¶è‡ªåŠ¨å¸è½½ç¡¬ç›˜&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;  status  - æ˜¾ç¤ºå½“å‰çŠ¶æ€&quot;</span></span><br><span class="line">    <span class="built_in">exit</span> 1</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ—¥å¿—å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="title">log</span></span>() &#123;</span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;<span class="subst">$(date &#x27;+%Y-%m-%d %H:%M:%S&#x27;)</span> - <span class="variable">$1</span>&quot;</span> | <span class="built_in">tee</span> -a <span class="string">&quot;<span class="variable">$LOG_FILE</span>&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ£€æŸ¥æ˜¯å¦ root</span></span><br><span class="line"><span class="function"><span class="title">check_root</span></span>() &#123;</span><br><span class="line">    <span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$EUID</span>&quot;</span> -ne 0 ]; <span class="keyword">then</span> </span><br><span class="line">        <span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;RED&#125;</span>è¯·ç”¨ sudo è¿è¡Œæ­¤è„šæœ¬<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">        <span class="built_in">exit</span> 1</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–å½“å‰æ¨¡å¼</span></span><br><span class="line"><span class="function"><span class="title">get_current_mode</span></span>() &#123;</span><br><span class="line">    <span class="keyword">if</span> [ -f <span class="string">&quot;<span class="variable">$USB_ROLE_FILE</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">cat</span> <span class="string">&quot;<span class="variable">$USB_ROLE_FILE</span>&quot;</span> 2&gt;/dev/null</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;unknown&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ£€æŸ¥ç¡¬ç›˜æ˜¯å¦å·²æŒ‚è½½</span></span><br><span class="line"><span class="function"><span class="title">is_mounted</span></span>() &#123;</span><br><span class="line">    mount | grep -q <span class="string">&quot; <span class="variable">$MOUNT_POINT</span> &quot;</span></span><br><span class="line">    <span class="built_in">return</span> $?</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥æ‰¾ç¡¬ç›˜è®¾å¤‡</span></span><br><span class="line"><span class="function"><span class="title">find_hdd</span></span>() &#123;</span><br><span class="line">    <span class="comment"># æŸ¥æ‰¾ sda æˆ– sdb ç­‰è®¾å¤‡</span></span><br><span class="line">    <span class="built_in">local</span> hdd=$(lsblk -o NAME,TYPE | grep -E <span class="string">&quot;sd[a-z][0-9]&quot;</span> | grep -v <span class="string">&quot;0B&quot;</span> | <span class="built_in">head</span> -1 | awk <span class="string">&#x27;&#123;print $1&#125;&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> [ -n <span class="string">&quot;<span class="variable">$hdd</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;/dev/<span class="variable">$hdd</span>&quot;</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŒ‚è½½ç¡¬ç›˜</span></span><br><span class="line"><span class="function"><span class="title">mount_hdd</span></span>() &#123;</span><br><span class="line">    <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;YELLOW&#125;</span>å°è¯•æŒ‚è½½ç¡¬ç›˜...<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># åˆ›å»ºæŒ‚è½½ç‚¹</span></span><br><span class="line">    <span class="built_in">mkdir</span> -p <span class="string">&quot;<span class="variable">$MOUNT_POINT</span>&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># æŸ¥æ‰¾ç¡¬ç›˜</span></span><br><span class="line">    HDD_DEV=$(find_hdd)</span><br><span class="line">    <span class="keyword">if</span> [ -z <span class="string">&quot;<span class="variable">$HDD_DEV</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;RED&#125;</span>æœªæ‰¾åˆ°ç¡¬ç›˜è®¾å¤‡<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">        <span class="built_in">return</span> 1</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">log</span> <span class="string">&quot;æ‰¾åˆ°ç¡¬ç›˜è®¾å¤‡: <span class="variable">$HDD_DEV</span>&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># è·å–æ–‡ä»¶ç³»ç»Ÿç±»å‹</span></span><br><span class="line">    FSTYPE=$(lsblk -o NAME,FSTYPE | grep <span class="string">&quot;<span class="subst">$(basename $HDD_DEV)</span>&quot;</span> | awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span>)</span><br><span class="line">    <span class="built_in">log</span> <span class="string">&quot;æ–‡ä»¶ç³»ç»Ÿç±»å‹: <span class="variable">$&#123;FSTYPE:-æœªçŸ¥&#125;</span>&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># å°è¯•æŒ‚è½½</span></span><br><span class="line">    <span class="keyword">if</span> [ -n <span class="string">&quot;<span class="variable">$FSTYPE</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;<span class="variable">$FSTYPE</span>&quot;</span> <span class="keyword">in</span></span><br><span class="line">            ntfs|NTFS)</span><br><span class="line">                mount -t ntfs-3g <span class="string">&quot;<span class="variable">$HDD_DEV</span>&quot;</span> <span class="string">&quot;<span class="variable">$MOUNT_POINT</span>&quot;</span> 2&gt;/dev/null</span><br><span class="line">                ;;</span><br><span class="line">            exfat|EXFAT)</span><br><span class="line">                mount -t exfat <span class="string">&quot;<span class="variable">$HDD_DEV</span>&quot;</span> <span class="string">&quot;<span class="variable">$MOUNT_POINT</span>&quot;</span> 2&gt;/dev/null</span><br><span class="line">                ;;</span><br><span class="line">            ext4|ext3|ext2)</span><br><span class="line">                mount <span class="string">&quot;<span class="variable">$HDD_DEV</span>&quot;</span> <span class="string">&quot;<span class="variable">$MOUNT_POINT</span>&quot;</span> 2&gt;/dev/null</span><br><span class="line">                ;;</span><br><span class="line">            *)</span><br><span class="line">                mount <span class="string">&quot;<span class="variable">$HDD_DEV</span>&quot;</span> <span class="string">&quot;<span class="variable">$MOUNT_POINT</span>&quot;</span> 2&gt;/dev/null</span><br><span class="line">                ;;</span><br><span class="line">        <span class="keyword">esac</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="comment"># å°è¯•è‡ªåŠ¨æ£€æµ‹</span></span><br><span class="line">        mount <span class="string">&quot;<span class="variable">$HDD_DEV</span>&quot;</span> <span class="string">&quot;<span class="variable">$MOUNT_POINT</span>&quot;</span> 2&gt;/dev/null || \</span><br><span class="line">        mount -t ntfs-3g <span class="string">&quot;<span class="variable">$HDD_DEV</span>&quot;</span> <span class="string">&quot;<span class="variable">$MOUNT_POINT</span>&quot;</span> 2&gt;/dev/null || \</span><br><span class="line">        mount -t exfat <span class="string">&quot;<span class="variable">$HDD_DEV</span>&quot;</span> <span class="string">&quot;<span class="variable">$MOUNT_POINT</span>&quot;</span> 2&gt;/dev/null</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> [ $? -eq 0 ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;GREEN&#125;</span>ç¡¬ç›˜æŒ‚è½½æˆåŠŸåˆ° $MOUNT_POINT<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># è®¾ç½®æƒé™</span></span><br><span class="line">        <span class="built_in">chmod</span> 777 <span class="string">&quot;<span class="variable">$MOUNT_POINT</span>&quot;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># æ˜¾ç¤ºæŒ‚è½½ä¿¡æ¯</span></span><br><span class="line">        <span class="built_in">df</span> -h <span class="string">&quot;<span class="variable">$MOUNT_POINT</span>&quot;</span> | <span class="built_in">tail</span> -1</span><br><span class="line">        <span class="built_in">return</span> 0</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;RED&#125;</span>ç¡¬ç›˜æŒ‚è½½å¤±è´¥<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">        <span class="built_in">return</span> 1</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¸è½½ç¡¬ç›˜</span></span><br><span class="line"><span class="function"><span class="title">umount_hdd</span></span>() &#123;</span><br><span class="line">    <span class="keyword">if</span> is_mounted; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;YELLOW&#125;</span>å¸è½½ç¡¬ç›˜ <span class="variable">$MOUNT_POINT</span>...<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">        umount <span class="string">&quot;<span class="variable">$MOUNT_POINT</span>&quot;</span></span><br><span class="line">        <span class="keyword">if</span> [ $? -eq 0 ]; <span class="keyword">then</span></span><br><span class="line">            <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;GREEN&#125;</span>ç¡¬ç›˜å¸è½½æˆåŠŸ<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;RED&#125;</span>ç¡¬ç›˜å¸è½½å¤±è´¥ï¼Œå¯èƒ½æ­£åœ¨è¢«ä½¿ç”¨<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">            <span class="comment"># å¼ºåˆ¶å¸è½½</span></span><br><span class="line">            <span class="built_in">log</span> <span class="string">&quot;å°è¯•å¼ºåˆ¶å¸è½½...&quot;</span></span><br><span class="line">            umount -l <span class="string">&quot;<span class="variable">$MOUNT_POINT</span>&quot;</span> &amp;&amp; <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;GREEN&#125;</span>å¼ºåˆ¶å¸è½½æˆåŠŸ<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;BLUE&#125;</span>ç¡¬ç›˜æœªæŒ‚è½½<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ‡æ¢åˆ° host æ¨¡å¼</span></span><br><span class="line"><span class="function"><span class="title">switch_to_host</span></span>() &#123;</span><br><span class="line">    <span class="built_in">local</span> current=$(get_current_mode)</span><br><span class="line">    <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;BLUE&#125;</span>å½“å‰æ¨¡å¼: <span class="variable">$current</span> -&gt; ç›®æ ‡æ¨¡å¼: host<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$current</span>&quot;</span> = <span class="string">&quot;host&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;YELLOW&#125;</span>å·²ç»æ˜¯ host æ¨¡å¼<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="comment"># å…ˆå¸è½½å¯èƒ½åŠ è½½çš„ gadget é©±åŠ¨</span></span><br><span class="line">        modprobe -r g_serial g_ether g_mass_storage usb_f_* libcomposite 2&gt;/dev/null</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># åˆ‡æ¢åˆ° host</span></span><br><span class="line">        <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;YELLOW&#125;</span>åˆ‡æ¢åˆ° host æ¨¡å¼...<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;host&quot;</span> &gt; <span class="string">&quot;<span class="variable">$USB_ROLE_FILE</span>&quot;</span></span><br><span class="line">        <span class="built_in">sleep</span> 3</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># é‡æ–°åŠ è½½å­˜å‚¨é©±åŠ¨</span></span><br><span class="line">        modprobe usb-storage</span><br><span class="line">        modprobe uas</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># é‡æ–°æ‰«æ SCSI æ€»çº¿</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;- - -&quot;</span> &gt; /sys/class/scsi_host/host0/scan 2&gt;/dev/null</span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;- - -&quot;</span> &gt; /sys/class/scsi_host/host1/scan 2&gt;/dev/null</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">sleep</span> 2</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">local</span> new=$(get_current_mode)</span><br><span class="line">        <span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$new</span>&quot;</span> = <span class="string">&quot;host&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">            <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;GREEN&#125;</span>åˆ‡æ¢åˆ° host æ¨¡å¼æˆåŠŸ<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;RED&#125;</span>åˆ‡æ¢åˆ° host æ¨¡å¼å¤±è´¥ï¼Œå½“å‰æ¨¡å¼: $new<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">            <span class="built_in">return</span> 1</span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># æŒ‚è½½ç¡¬ç›˜</span></span><br><span class="line">    mount_hdd</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># æ˜¾ç¤ºæœ€ç»ˆçŠ¶æ€</span></span><br><span class="line">    show_status</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ‡æ¢åˆ° gadget æ¨¡å¼</span></span><br><span class="line"><span class="function"><span class="title">switch_to_gadget</span></span>() &#123;</span><br><span class="line">    <span class="built_in">local</span> current=$(get_current_mode)</span><br><span class="line">    <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;BLUE&#125;</span>å½“å‰æ¨¡å¼: <span class="variable">$current</span> -&gt; ç›®æ ‡æ¨¡å¼: gadget<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># å…ˆå¸è½½ç¡¬ç›˜</span></span><br><span class="line">    umount_hdd</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$current</span>&quot;</span> = <span class="string">&quot;gadget&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;YELLOW&#125;</span>å·²ç»æ˜¯ gadget æ¨¡å¼<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="comment"># å¸è½½å­˜å‚¨é©±åŠ¨</span></span><br><span class="line">        modprobe -r usb-storage uas 2&gt;/dev/null</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># åˆ‡æ¢åˆ° gadget</span></span><br><span class="line">        <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;YELLOW&#125;</span>åˆ‡æ¢åˆ° gadget æ¨¡å¼...<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;gadget&quot;</span> &gt; <span class="string">&quot;<span class="variable">$USB_ROLE_FILE</span>&quot;</span></span><br><span class="line">        <span class="built_in">sleep</span> 2</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">local</span> new=$(get_current_mode)</span><br><span class="line">        <span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$new</span>&quot;</span> = <span class="string">&quot;gadget&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">            <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;GREEN&#125;</span>åˆ‡æ¢åˆ° gadget æ¨¡å¼æˆåŠŸ<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">            </span><br><span class="line">            <span class="comment"># åŠ è½½å¸¸ç”¨çš„ gadget åŠŸèƒ½</span></span><br><span class="line">            modprobe g_serial 2&gt;/dev/null  <span class="comment"># USB ä¸²å£</span></span><br><span class="line">            modprobe g_ether 2&gt;/dev/null   <span class="comment"># USB ç½‘ç»œ</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">log</span> <span class="string">&quot;<span class="variable">$&#123;RED&#125;</span>åˆ‡æ¢åˆ° gadget æ¨¡å¼å¤±è´¥ï¼Œå½“å‰æ¨¡å¼: $new<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">            <span class="comment"># å°è¯•å¼ºåˆ¶åˆ‡æ¢</span></span><br><span class="line">            <span class="built_in">log</span> <span class="string">&quot;å°è¯•å¼ºåˆ¶åˆ‡æ¢...&quot;</span></span><br><span class="line">            modprobe -r ci_hdrc 2&gt;/dev/null</span><br><span class="line">            modprobe ci_hdrc</span><br><span class="line">            <span class="built_in">echo</span> <span class="string">&quot;gadget&quot;</span> &gt; <span class="string">&quot;<span class="variable">$USB_ROLE_FILE</span>&quot;</span> 2&gt;/dev/null</span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># æ˜¾ç¤ºæœ€ç»ˆçŠ¶æ€</span></span><br><span class="line">    show_status</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¾ç¤ºçŠ¶æ€</span></span><br><span class="line"><span class="function"><span class="title">show_status</span></span>() &#123;</span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;\n<span class="variable">$&#123;BLUE&#125;</span>=== USB çŠ¶æ€ ===<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># USB è§’è‰²</span></span><br><span class="line">    <span class="built_in">local</span> role=$(get_current_mode)</span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;USB æ¨¡å¼: <span class="variable">$&#123;GREEN&#125;</span>$role<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># ç¡¬ç›˜è®¾å¤‡</span></span><br><span class="line">    <span class="built_in">local</span> hdd=$(lsblk -o NAME,SIZE,MODEL | grep -E <span class="string">&quot;sd[a-z]&quot;</span> | <span class="built_in">head</span> -3)</span><br><span class="line">    <span class="keyword">if</span> [ -n <span class="string">&quot;<span class="variable">$hdd</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> -e <span class="string">&quot;\n<span class="variable">$&#123;BLUE&#125;</span>ç¡¬ç›˜è®¾å¤‡:<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$hdd</span>&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># æŒ‚è½½çŠ¶æ€</span></span><br><span class="line">    <span class="keyword">if</span> is_mounted; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> -e <span class="string">&quot;\n<span class="variable">$&#123;GREEN&#125;</span>ç¡¬ç›˜å·²æŒ‚è½½åˆ° $MOUNT_POINT<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">        <span class="built_in">df</span> -h <span class="string">&quot;<span class="variable">$MOUNT_POINT</span>&quot;</span> | <span class="built_in">tail</span> -1</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> -e <span class="string">&quot;\n<span class="variable">$&#123;YELLOW&#125;</span>ç¡¬ç›˜æœªæŒ‚è½½<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># USB æ§åˆ¶å™¨ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">if</span> [ -d <span class="string">&quot;/sys/kernel/debug/usb/ci_hdrc.0&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> -e <span class="string">&quot;\n<span class="variable">$&#123;BLUE&#125;</span>USB æ§åˆ¶å™¨:<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">        <span class="built_in">ls</span> /sys/kernel/debug/usb/ci_hdrc.0/ 2&gt;/dev/null | <span class="built_in">head</span> -5</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸»å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="title">main</span></span>() &#123;</span><br><span class="line">    check_root</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;<span class="variable">$1</span>&quot;</span> <span class="keyword">in</span></span><br><span class="line">        host)</span><br><span class="line">            switch_to_host</span><br><span class="line">            ;;</span><br><span class="line">        gadget)</span><br><span class="line">            switch_to_gadget</span><br><span class="line">            ;;</span><br><span class="line">        status)</span><br><span class="line">            show_status</span><br><span class="line">            ;;</span><br><span class="line">        *)</span><br><span class="line">            show_usage</span><br><span class="line">            ;;</span><br><span class="line">    <span class="keyword">esac</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰§è¡Œä¸»å‡½æ•°</span></span><br><span class="line">main <span class="string">&quot;<span class="variable">$@</span>&quot;</span></span><br><span class="line">EOF</span><br></pre></td></tr></table></figure><h4 id="ä½¿ç”¨æ–¹å¼"><a class="markdownIt-Anchor" href="#ä½¿ç”¨æ–¹å¼"></a> ğŸ¯ ä½¿ç”¨æ–¹å¼</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç»™è„šæœ¬æ·»åŠ æ‰§è¡Œæƒé™</span></span><br><span class="line"><span class="built_in">chmod</span> +x usb_switch.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ‡æ¢åˆ° host æ¨¡å¼ï¼ˆæ¥ç¡¬ç›˜ï¼‰å¹¶è‡ªåŠ¨æŒ‚è½½</span></span><br><span class="line"><span class="built_in">sudo</span> ./usb_switch.sh host</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ‡æ¢åˆ° gadget æ¨¡å¼ï¼ˆæ¥ç”µè„‘ï¼‰å¹¶è‡ªåŠ¨å¸è½½</span></span><br><span class="line"><span class="built_in">sudo</span> ./usb_switch.sh gadget</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹å½“å‰çŠ¶æ€</span></span><br><span class="line"><span class="built_in">sudo</span> ./usb_switch.sh status</span><br></pre></td></tr></table></figure><h4 id="å®‰è£…åˆ°ç³»ç»Ÿè·¯å¾„æ–¹ä¾¿ä½¿ç”¨"><a class="markdownIt-Anchor" href="#å®‰è£…åˆ°ç³»ç»Ÿè·¯å¾„æ–¹ä¾¿ä½¿ç”¨"></a> ğŸš€ å®‰è£…åˆ°ç³»ç»Ÿè·¯å¾„ï¼ˆæ–¹ä¾¿ä½¿ç”¨ï¼‰</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¤åˆ¶åˆ°ç³»ç»Ÿè·¯å¾„</span></span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">cp</span> usb_switch.sh /usr/local/bin/usb-switch</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç»™æ‰€æœ‰äººæ‰§è¡Œæƒé™</span></span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">chmod</span> +x /usr/local/bin/usb-switch</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç°åœ¨å¯ä»¥ç›´æ¥è¿è¡Œäº†</span></span><br><span class="line"><span class="comment"># 1. åˆ‡æ¢åˆ° host æ¨¡å¼ï¼ˆæ¥ç¡¬ç›˜ï¼‰å¹¶è‡ªåŠ¨æŒ‚è½½</span></span><br><span class="line"><span class="built_in">sudo</span> usb-switch host</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. åˆ‡æ¢åˆ° gadget æ¨¡å¼ï¼ˆæ¥ç”µè„‘ï¼‰å¹¶è‡ªåŠ¨å¸è½½</span></span><br><span class="line"><span class="built_in">sudo</span> usb-switch gadget</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. æŸ¥çœ‹å½“å‰çŠ¶æ€</span></span><br><span class="line"><span class="built_in">sudo</span> usb-switch status</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4. åªæŒ‚è½½ç¡¬ç›˜ï¼ˆä¸åˆ‡æ¢æ¨¡å¼ï¼‰- å¦‚æœç¡¬ç›˜æ²¡æŒ‚ä¸Šæ—¶ç”¨</span></span><br><span class="line"><span class="built_in">sudo</span> usb-switch mount</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5. åªå¸è½½ç¡¬ç›˜ï¼ˆä¸åˆ‡æ¢æ¨¡å¼ï¼‰- æƒ³æ‰‹åŠ¨å¸è½½æ—¶ç”¨</span></span><br><span class="line"><span class="built_in">sudo</span> usb-switch umount</span><br></pre></td></tr></table></figure><h4 id="è„šæœ¬åŠŸèƒ½è¯´æ˜"><a class="markdownIt-Anchor" href="#è„šæœ¬åŠŸèƒ½è¯´æ˜"></a> ğŸ“‹ è„šæœ¬åŠŸèƒ½è¯´æ˜</h4><p>è¿™ä¸ªè„šæœ¬ä¼šè‡ªåŠ¨ï¼š</p><ol><li><strong>åˆ‡æ¢æ¨¡å¼æ—¶</strong>ï¼š<ul><li>æ£€æŸ¥å½“å‰æ¨¡å¼</li><li>å¸è½½/åŠ è½½å¿…è¦çš„é©±åŠ¨</li><li>æ‰§è¡Œæ¨¡å¼åˆ‡æ¢</li></ul></li><li><strong>host æ¨¡å¼ä¸‹</strong>ï¼š<ul><li>è‡ªåŠ¨æ‰«æå¹¶è¯†åˆ«ç¡¬ç›˜</li><li>è‡ªåŠ¨æŒ‚è½½åˆ° <code>/mnt/nas</code></li><li>è®¾ç½®é€‚å½“çš„æƒé™</li></ul></li><li><strong>gadget æ¨¡å¼ä¸‹</strong>ï¼š<ul><li>è‡ªåŠ¨å¸è½½ç¡¬ç›˜</li><li>åŠ è½½å¸¸ç”¨çš„ gadget åŠŸèƒ½ï¼ˆä¸²å£ã€ç½‘ç»œï¼‰</li></ul></li><li><strong>çŠ¶æ€æ˜¾ç¤º</strong>ï¼š<ul><li>æ˜¾ç¤ºå½“å‰ USB æ¨¡å¼</li><li>æ˜¾ç¤ºç¡¬ç›˜è®¾å¤‡ä¿¡æ¯</li><li>æ˜¾ç¤ºæŒ‚è½½çŠ¶æ€</li></ul></li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹æŒ‚è½½ç¡¬ç›˜</span></span><br><span class="line">lsblk</span><br></pre></td></tr></table></figure><h3 id=""><a class="markdownIt-Anchor" href="#"></a> </h3>]]>
    </content>
    <id>https://imouyo.github.io/2026/02/22/%E9%9A%8F%E8%BA%ABwifi%E5%88%B7linux/</id>
    <link href="https://imouyo.github.io/2026/02/22/%E9%9A%8F%E8%BA%ABwifi%E5%88%B7linux/"/>
    <published>2026-02-22T14:45:13.000Z</published>
    <summary>
      <![CDATA[<p>æ¨èé˜…è¯»ï¼š</p>
<p><a href="https://blog.iamsjy.com/2023/12/11/snapdragon-410-portable-wifi-hotspot-flash-debian-and-optimize/#%E6%89%80%E9%9C%]]>
    </summary>
    <title>éšèº«wifiåˆ·linux</title>
    <updated>2026-02-24T18:16:02.750Z</updated>
  </entry>
  <entry>
    <author>
      <name>John Doe</name>
    </author>
    <category term="Question" scheme="https://imouyo.github.io/tags/Question/"/>
    <content>
      <![CDATA[<h3 id="å¦‚ä½•è§£å†³cssæ ·å¼é»˜è®¤htmlæœ‰å†…å¤–è¾¹è·é—®é¢˜"><a class="markdownIt-Anchor" href="#å¦‚ä½•è§£å†³cssæ ·å¼é»˜è®¤htmlæœ‰å†…å¤–è¾¹è·é—®é¢˜"></a> å¦‚ä½•è§£å†³cssæ ·å¼é»˜è®¤htmlæœ‰å†…å¤–è¾¹è·é—®é¢˜</h3><p>ä½¿ç”¨cssé‡ç½®</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">html</span> &#123;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;<span class="comment">/* ä»¥å¤–è¾¹è·é™åˆ¶ç›’å­å°ºå¯¸ */</span></span><br><span class="line">&#125;</span><br><span class="line">*,</span><br><span class="line">*<span class="selector-pseudo">::before</span>,</span><br><span class="line">*<span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">    <span class="attribute">box-sizing</span>: inherit;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç½‘é¡µå­—ä½“å•ä½px-em-rem-pt-vm-vhä»‹ç»"><a class="markdownIt-Anchor" href="#ç½‘é¡µå­—ä½“å•ä½px-em-rem-pt-vm-vhä»‹ç»"></a> ç½‘é¡µå­—ä½“å•ä½pxã€emã€%ã€remã€ptã€vmã€vhä»‹ç»</h3><table><thead><tr><th>å•ä½</th><th>ä»‹ç»</th></tr></thead><tbody><tr><td>px</td><td>1åƒç´ </td></tr><tr><td>em</td><td>å­—ç¬¦å®½åº¦çš„å€æ•°,é€šå¸¸1em=16px</td></tr><tr><td>%</td><td>ç™¾åˆ†ä¸â€œemâ€ç±»ä¼¼ï¼Œ1em=100%ã€‚å½“å‰çš„å­—ä½“å¤§å°ç­‰äº100%,å­—ä½“å¤§å°ä¹Ÿæ˜¯å—çˆ¶ç±»å½±å“</td></tr><tr><td>rem</td><td>åªç›¸å¯¹æ ¹ç›®å½•å³HTMLå…ƒç´ ä¸­å­—ä½“å¤§å°çš„ç›¸å¯¹é•¿åº¦å•ä½</td></tr><tr><td>pt</td><td>ç£…ï¼Œpx = pt * DPI / 72ï¼ˆä¸€èˆ¬ç”µè„‘å±å¹•çš„æ‰“å°ç²¾åº¦æ˜¯96dpiï¼‰</td></tr></tbody></table><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dufs --allow-all --render-try-index --port 5000 --log-file /root/printbox/dufs.log</span><br><span class="line"><span class="built_in">cat</span> <span class="string">&quot;./options/æ–°å»º Microsoft Word æ–‡æ¡£.docx.json&quot;</span> | jq</span><br><span class="line">scp ./tupian.pdf root@192.168.2.189:/root/printbox/uploads</span><br></pre></td></tr></table></figure><h3 id="æŸ¥çœ‹debianç³»ç»Ÿæ¶æ„"><a class="markdownIt-Anchor" href="#æŸ¥çœ‹debianç³»ç»Ÿæ¶æ„"></a> æŸ¥çœ‹debianç³»ç»Ÿæ¶æ„</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">uname</span> -m<span class="comment"># æˆ–è€… arch</span></span><br></pre></td></tr></table></figure><table><thead><tr><th><strong>X64</strong></th><th><code>x86_64</code></th><th>æ™®é€šç”µè„‘ã€æœåŠ¡å™¨ã€ç¬”è®°æœ¬</th></tr></thead><tbody><tr><td><strong>Armv7</strong></td><td><code>armv7l</code></td><td>æ ‘è“æ´¾2/3ã€æ—§æ‰‹æœºã€ç”µè§†ç›’å­</td></tr><tr><td><strong>Arm64</strong></td><td><code>aarch64</code></td><td>æ ‘è“æ´¾3B+/4/5ã€æ–°æ‰‹æœºã€Mac M1ã€ä½ çš„ OpenStick</td></tr></tbody></table><h3 id="debianç³»ç»Ÿæµ‹è¯•ç½‘ç»œé€Ÿç‡"><a class="markdownIt-Anchor" href="#debianç³»ç»Ÿæµ‹è¯•ç½‘ç»œé€Ÿç‡"></a> debianç³»ç»Ÿæµ‹è¯•ç½‘ç»œé€Ÿç‡</h3><h4 id="æµ‹è¯•å¤–ç½‘é€Ÿåº¦äº’è”ç½‘è¿æ¥"><a class="markdownIt-Anchor" href="#æµ‹è¯•å¤–ç½‘é€Ÿåº¦äº’è”ç½‘è¿æ¥"></a> ğŸ“¶ æµ‹è¯•å¤–ç½‘é€Ÿåº¦ï¼ˆäº’è”ç½‘è¿æ¥ï¼‰</h4><p>å¦‚æœä½ åªæ˜¯æƒ³çœ‹çœ‹è®¾å¤‡è®¿é—®äº’è”ç½‘çš„å¿«æ…¢ï¼Œç”¨ <code>speedtest-cli</code> æœ€æ–¹ä¾¿ã€‚</p><ol><li><p><strong>å®‰è£…</strong>ï¼š</p> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt update</span><br><span class="line"><span class="built_in">sudo</span> apt install speedtest-cli -y</span><br></pre></td></tr></table></figure></li><li><p><strong>è¿è¡Œæµ‹è¯•</strong>ï¼š</p> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">speedtest-cli</span><br></pre></td></tr></table></figure><p>å®ƒä¼šè‡ªåŠ¨æ‰¾åˆ°æœ€è¿‘çš„æœåŠ¡å™¨ï¼Œæµ‹è¯•åæ˜¾ç¤ºä½ çš„ä¸‹è½½å’Œä¸Šä¼ é€Ÿåº¦ï¼ˆé»˜è®¤ä¸ºæ¯”ç‰¹æ¯ç§’ï¼‰ã€‚å¦‚æœæƒ³çœ‹ç®€æ´ç‰ˆç»“æœï¼Œå¯ä»¥åŠ ä¸Š <code>--simple</code> å‚æ•°ã€‚</p></li></ol><h4 id="æµ‹è¯•å±€åŸŸç½‘é€Ÿåº¦å†…ç½‘ä¼ è¾“"><a class="markdownIt-Anchor" href="#æµ‹è¯•å±€åŸŸç½‘é€Ÿåº¦å†…ç½‘ä¼ è¾“"></a> ğŸŒ æµ‹è¯•å±€åŸŸç½‘é€Ÿåº¦ï¼ˆå†…ç½‘ä¼ è¾“ï¼‰</h4><p>è¿™ä¸ªæ–¹æ³•èƒ½æ›´çº¯ç²¹åœ°åæ˜ ä½ çš„è®¾å¤‡ã€ç½‘çº¿ã€äº¤æ¢æœºå’Œå¦ä¸€å°è®¾å¤‡ä¹‹é—´çš„æœ€å¤§ä¼ è¾“èƒ½åŠ›ï¼Œä¸å—äº’è”ç½‘æ³¢åŠ¨å½±å“ã€‚ä½ éœ€è¦<strong>ä¸¤å°è®¾å¤‡</strong>ï¼šä¸€å°å½“æœåŠ¡å™¨ï¼ˆä½ çš„ Debian è®¾å¤‡ï¼‰ï¼Œå¦ä¸€å°å½“å®¢æˆ·ç«¯ï¼ˆæ¯”å¦‚ä½ çš„ç”µè„‘ï¼‰ã€‚æ¨èä½¿ç”¨ <code>iperf3</code>ã€‚</p><h5 id="åœ¨ä½ çš„-debian-è®¾å¤‡ä¸Šä½œä¸ºæœåŠ¡ç«¯"><a class="markdownIt-Anchor" href="#åœ¨ä½ çš„-debian-è®¾å¤‡ä¸Šä½œä¸ºæœåŠ¡ç«¯"></a> åœ¨ä½ çš„ Debian è®¾å¤‡ä¸Šï¼ˆä½œä¸ºæœåŠ¡ç«¯ï¼‰ï¼š</h5><ol><li><p><strong>å®‰è£… <code>iperf3</code></strong>ï¼š</p> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt install iperf3 -y</span><br></pre></td></tr></table></figure></li><li><p><strong>å¯åŠ¨æœåŠ¡ç«¯</strong>ï¼š</p> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iperf3 -s</span><br></pre></td></tr></table></figure><p>è¿™ä¼šå¼€å¯ <code>iperf3</code> çš„æœåŠ¡æ¨¡å¼ï¼Œé»˜è®¤åœ¨ 5201 ç«¯å£ç›‘å¬å®¢æˆ·ç«¯çš„è¿æ¥ã€‚</p></li></ol><h5 id="åœ¨ä½ çš„ç”µè„‘ä¸Šä½œä¸ºå®¢æˆ·ç«¯å‡è®¾-ip-æ˜¯-1921681100"><a class="markdownIt-Anchor" href="#åœ¨ä½ çš„ç”µè„‘ä¸Šä½œä¸ºå®¢æˆ·ç«¯å‡è®¾-ip-æ˜¯-1921681100"></a> åœ¨ä½ çš„ç”µè„‘ä¸Šï¼ˆä½œä¸ºå®¢æˆ·ç«¯ï¼Œå‡è®¾ IP æ˜¯ 192.168.1.100ï¼‰ï¼š</h5><ol><li><p><strong>ä¹Ÿå®‰è£… <code>iperf3</code></strong> (Windows å¯ä¸‹è½½ exeï¼ŒmacOS ç”¨ <code>brew install iperf3</code>)ã€‚</p></li><li><p><strong>è¿è¡Œå®¢æˆ·ç«¯æµ‹è¯•</strong>ï¼š</p> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iperf3 -c 192.168.1.100</span><br></pre></td></tr></table></figure><p>æµ‹è¯•é»˜è®¤è¿›è¡Œ 10 ç§’ï¼Œç»“æŸåä¼šæ˜¾ç¤ºå¸¦å®½ã€ä¼ è¾“æ•°æ®é‡ç­‰å…³é”®ä¿¡æ¯ã€‚</p><p><code>iperf3</code>å¸¸ç”¨å‘½ä»¤</p></li></ol><table><thead><tr><th>TCP ä¸‹è½½</th><th><code>iperf3.exe -c &lt;server&gt; -P 10 -4 -R</code></th></tr></thead><tbody><tr><td>TCP ä¸Šä¼ </td><td><code>iperf3.exe -c &lt;server&gt; -P 10 -4</code></td></tr><tr><td>UDP ä¸‹è½½</td><td><code>iperf3.exe -c &lt;server&gt; -u -P 10 -4 -R</code></td></tr><tr><td>UDP ä¸Šä¼ </td><td><code>iperf3.exe -c &lt;server&gt; -u -P 10 -4</code></td></tr></tbody></table><h3 id="dockerå‘½ä»¤"><a class="markdownIt-Anchor" href="#dockerå‘½ä»¤"></a> dockerå‘½ä»¤</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ¸…ç†å¤±è´¥çš„æ‹‰å–</span></span><br><span class="line">docker system prune -a -f</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4. çœ‹ Docker ä¿¡æ¯ grepä¸ºæœç´¢æŒ‡å®šæ–‡æœ¬æ‰€åœ¨è¡Œ</span></span><br><span class="line">docker info | grep <span class="string">&quot;Docker Root Dir&quot;</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 1. æŸ¥çœ‹ Docker æ•´ä½“ç£ç›˜ä½¿ç”¨</span></span><br><span class="line">docker system <span class="built_in">df</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. æŸ¥çœ‹è¯¦ç»†ç©ºé—´å ç”¨</span></span><br><span class="line">docker system <span class="built_in">df</span> -v</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. æŸ¥çœ‹å®é™…æ–‡ä»¶å ç”¨çš„ç£ç›˜ç©ºé—´</span></span><br><span class="line"><span class="built_in">du</span> -sh /var/lib/docker</span><br><span class="line"><span class="built_in">du</span> -sh /var/lib/containerd</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4. æŸ¥çœ‹æ‰€æœ‰é•œåƒå¤§å°</span></span><br><span class="line">docker images</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5. æŸ¥çœ‹è¿è¡Œä¸­å®¹å™¨çš„èµ„æºå ç”¨</span></span><br><span class="line">docker stats --no-stream</span><br></pre></td></tr></table></figure><h3 id="dockeré…ç½®é•œåƒæº"><a class="markdownIt-Anchor" href="#dockeré…ç½®é•œåƒæº"></a> dockeré…ç½®é•œåƒæº</h3><p><strong>ç¬¬ä¸€æ­¥ï¼šåˆ›å»º/ç¼–è¾‘ daemon.json é…ç½®æ–‡ä»¶</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> <span class="built_in">mkdir</span> -p /etc/docker</span><br><span class="line"><span class="built_in">sudo</span> nano /etc/docker/daemon.json</span><br></pre></td></tr></table></figure><p><strong>ç¬¬äºŒæ­¥ï¼šæ·»åŠ é•œåƒåŠ é€Ÿå™¨åœ°å€</strong></p><p>å°†ä»¥ä¸‹å†…å®¹å¤åˆ¶ç²˜è´´è¿›å»ï¼ˆæ¨èä½¿ç”¨å¤šä¸ªé•œåƒæºä½œä¸ºå¤‡é€‰ï¼‰ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;registry-mirrors&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="string">&quot;https://hub-mirror.c.163.com&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;https://docker.mirrors.ustc.edu.cn&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;https://registry.docker-cn.com&quot;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><strong>ç¬¬ä¸‰æ­¥ï¼šé‡å¯docker</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl daemon-reload</span><br><span class="line"><span class="built_in">sudo</span> systemctl restart docker</span><br></pre></td></tr></table></figure><h3 id="linuxå‘½ä»¤"><a class="markdownIt-Anchor" href="#linuxå‘½ä»¤"></a> linuxå‘½ä»¤</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹æœåŠ¡çŠ¶æ€</span></span><br><span class="line"><span class="built_in">sudo</span> systemctl status &lt;æœåŠ¡åç§°&gt;</span><br><span class="line"><span class="comment"># å¯åŠ¨æœåŠ¡</span></span><br><span class="line"><span class="built_in">sudo</span> systemctl start &lt;æœåŠ¡åç§°&gt;</span><br></pre></td></tr></table></figure>]]>
    </content>
    <id>https://imouyo.github.io/2026/02/22/Questions/</id>
    <link href="https://imouyo.github.io/2026/02/22/Questions/"/>
    <published>2026-02-22T09:16:57.000Z</published>
    <summary>
      <![CDATA[<h3 id="å¦‚ä½•è§£å†³cssæ ·å¼é»˜è®¤htmlæœ‰å†…å¤–è¾¹è·é—®é¢˜"><a class="markdownIt-Anchor" href="#å¦‚ä½•è§£å†³cssæ ·å¼é»˜è®¤htmlæœ‰å†…å¤–è¾¹è·é—®é¢˜"></a> å¦‚ä½•è§£å†³cssæ ·å¼é»˜è®¤htmlæœ‰å†…å¤–è¾¹è·é—®é¢˜</h3>
<p>ä½¿ç”¨cssé‡ç½®</p>]]>
    </summary>
    <title>Questions</title>
    <updated>2026-02-24T18:22:39.818Z</updated>
  </entry>
  <entry>
    <author>
      <name>John Doe</name>
    </author>
    <category term="å­¦ä¹ " scheme="https://imouyo.github.io/tags/%E5%AD%A6%E4%B9%A0/"/>
    <content>
      <![CDATA[<h3 id="å·¥ä½œæµç¨‹"><a class="markdownIt-Anchor" href="#å·¥ä½œæµç¨‹"></a> å·¥ä½œæµç¨‹</h3><p><img src="electron%E5%AD%A6%E4%B9%A0/image-20260221215237301.png" alt="image-20260221215237301" /></p><h3 id="1-åˆå§‹åŒ–-npm-é¡¹ç›®"><a class="markdownIt-Anchor" href="#1-åˆå§‹åŒ–-npm-é¡¹ç›®"></a> 1. åˆå§‹åŒ– npm é¡¹ç›®</h3><p>Electron åº”ç”¨åŸºäº npm æ­å»ºï¼Œä»¥ package.json æ–‡ä»¶ä½œä¸ºå…¥å£ç‚¹ã€‚ é¦–å…ˆåˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œç„¶ååœ¨å…¶ä¸­æ‰§è¡Œ <code>npm init</code> åˆå§‹åŒ–é¡¹ç›®ã€‚</p><ul><li>npm</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> my-electron-app &amp;&amp; <span class="built_in">cd</span> my-electron-app</span><br><span class="line">npm init</span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œå°† Electron å®‰è£…ä¸ºæ‚¨é¡¹ç›®çš„ <strong>devDependencies</strong>ï¼Œå³ä»…åœ¨å¼€å‘ç¯å¢ƒéœ€è¦çš„é¢å¤–ä¾èµ–ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install electron --save-dev</span><br></pre></td></tr></table></figure><p>è¯¥å‘½ä»¤ç»å¸¸è¿è¡Œå‡ºé”™ï¼Œå¯ä»¥é‡‡ç”¨cnpmå®‰è£…</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install -g cnpm --registry=https://registry.npmmirror.com</span><br><span class="line">cnpm install --save-dev electron</span><br></pre></td></tr></table></figure><h3 id="2-æ·»åŠ -gitignore-æ–‡ä»¶"><a class="markdownIt-Anchor" href="#2-æ·»åŠ -gitignore-æ–‡ä»¶"></a> 2. æ·»åŠ  .gitignore æ–‡ä»¶</h3><p><a href="https://git-scm.com/docs/gitignore"><code>.gitignore</code></a> æ–‡ä»¶å¯ä»¥æŒ‡å®šå“ªäº›æ–‡ä»¶å’Œç›®å½•åº”è¯¥åœ¨Gitä¸­ä¸è¢«è·Ÿè¸ªã€‚ å»ºè®®æ‚¨å¤åˆ¶ä¸€ä»½ <a href="https://github.com/github/gitignore/blob/main/Node.gitignore">GitHub çš„ Node.js gitignore æ¨¡æ¿</a> åˆ°æ‚¨é¡¹ç›®çš„æ ¹ç›®å½•ï¼Œä»¥é¿å…å°† <code>node_modules</code> æ–‡ä»¶å¤¹æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿä¸­ã€‚</p><h3 id="3-è¿è¡Œ-electron-åº”ç”¨"><a class="markdownIt-Anchor" href="#3-è¿è¡Œ-electron-åº”ç”¨"></a> 3. è¿è¡Œ Electron åº”ç”¨</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run start</span><br></pre></td></tr></table></figure><h3 id="mainjsæ¨¡æ¿"><a class="markdownIt-Anchor" href="#mainjsæ¨¡æ¿"></a> main.jsæ¨¡æ¿</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; app, <span class="title class_">BrowserWindow</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;electron&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å®ä¾‹åŒ–çª—å£å‡½æ•°</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">createWindow</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> win = <span class="keyword">new</span> <span class="title class_">BrowserWindow</span>(&#123;</span><br><span class="line">        <span class="attr">width</span>: <span class="number">800</span>,</span><br><span class="line">        <span class="attr">height</span>: <span class="number">600</span>,</span><br><span class="line">        <span class="attr">webPreferences</span>: &#123;</span><br><span class="line">            <span class="attr">nodeIntegration</span>: <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">// åŠ è½½é¡µé¢æ–‡ä»¶</span></span><br><span class="line">    win.<span class="title function_">loadFile</span>(<span class="string">&#x27;./src/index.html&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å½“app,å‡†å¤‡å°±ç»ªæ—¶,åˆ›å»ºçª—å£</span></span><br><span class="line">app.<span class="title function_">on</span>(<span class="string">&#x27;ready&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">createWindow</span>()</span><br><span class="line">    <span class="comment">// é’ˆå¯¹macOSç³»ç»Ÿ,å½“æ²¡æœ‰çª—å£æ—¶,ç‚¹å‡» dock å›¾æ ‡æ—¶,é‡æ–°åˆ›å»ºä¸€ä¸ªçª—å£</span></span><br><span class="line">    app.<span class="title function_">on</span>(<span class="string">&#x27;activate&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="title class_">BrowserWindow</span>.<span class="title function_">getAllWindows</span>().<span class="property">length</span> === <span class="number">0</span>) <span class="title function_">createWindow</span>()</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// é’ˆå¯¹windowsç³»ç»Ÿ,å½“æ‰€æœ‰çª—å£å…³é—­æ—¶,é€€å‡ºapp</span></span><br><span class="line">app.<span class="title function_">on</span>(<span class="string">&#x27;window-all-closed&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (process.<span class="property">platform</span> !== <span class="string">&#x27;darwin&#x27;</span>) app.<span class="title function_">quit</span>()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="preload-è„šæœ¬"><a class="markdownIt-Anchor" href="#preload-è„šæœ¬"></a> Preload è„šæœ¬</h3><p>â€‹é¢„åŠ è½½ï¼ˆPreloadï¼‰è„šæœ¬æ˜¯è¿â¾åœ¨æ¸²æŸ“è¿›ç¨‹ä¸­çš„ï¼Œ ä½†å®ƒæ˜¯åœ¨â½¹â»šå†…å®¹åŠ è½½ä¹‹å‰æ‰§â¾çš„ï¼Œè¿™æ„å‘³ç€å®ƒ å…·æœ‰â½æ™®é€šæ¸²æŸ“å™¨ä»£ç æ›´â¾¼çš„æƒé™ï¼Œå¯ä»¥è®¿é—® Node.js çš„ APIï¼ŒåŒæ—¶â¼œå¯ä»¥ä¸â½¹â»šå†…å®¹è¿›â¾å®‰å…¨ çš„äº¤äº’ã€‚ ç®€å•è¯´ï¼šå®ƒæ˜¯ Node.js å’Œ Web API çš„æ¡¥æ¢ï¼ŒPreload è„šæœ¬å¯ä»¥å®‰å…¨åœ°å°†éƒ¨åˆ† Node.js åŠŸèƒ½æš´éœ² ç»™â½¹â»šï¼Œä»â½½å‡å°‘å®‰å…¨â»›é™©ã€‚</p><ul><li>[ ] <strong>éœ€æ±‚ï¼šç‚¹å‡»æŒ‰é’®åï¼Œåœ¨â»šâ¾¯å‘ˆç°å½“å‰çš„ Node ç‰ˆæœ¬ã€‚</strong></li></ul><ol><li><p>åˆ›å»ºé¢„åŠ è½½è„šæœ¬ preload.js ï¼Œå†…å®¹å¦‚ä¸‹</p> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123;contextBridge&#125; = <span class="built_in">require</span>(<span class="string">&#x27;electron&#x27;</span>)</span><br><span class="line"><span class="comment">// æš´éœ²æ•°æ®ç»™æ¸²æŸ“è¿›ç¨‹</span></span><br><span class="line">contextBridge.<span class="title function_">exposeInMainWorld</span>(<span class="string">&#x27;myAPI&#x27;</span>,&#123;</span><br><span class="line"> <span class="attr">version</span>: process.<span class="property">version</span><span class="comment">//  &lt;--</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>åœ¨ä¸»çº¿ç¨‹ä¸­å¼•â¼Š preload.js</p> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> win = <span class="keyword">new</span> <span class="title class_">BrowserWindow</span>(&#123;</span><br><span class="line"> <span class="comment">/*******/</span></span><br><span class="line"> <span class="attr">webPreferences</span>:&#123;</span><br><span class="line"> <span class="attr">preload</span>:path.<span class="title function_">resolve</span>(__dirname,<span class="string">&#x27;./preload.js&#x27;</span>)<span class="comment">//  &lt;--</span></span><br><span class="line"> &#125;</span><br><span class="line"> <span class="comment">/*******/</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>åœ¨ html â»šâ¾¯ä¸­ç¼–å†™ç›¸å¯¹åº”çš„æŒ‰é’®ï¼Œåˆ›å»ºä¸“â»”ç¼–å†™â½¹â»šè„šæœ¬çš„ render.jsï¼Œå¹¶è¿›è¡Œäº‹ä»¶ç»‘å®šï¼Œéšåå¼•â¼Šhtmlã€‚</p> <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">h1</span>&gt;</span>ä½ å¥½å•Šï¼<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;btn&quot;</span>&gt;</span>åœ¨â½¤æˆ·çš„Dç›˜åˆ›å»ºâ¼€ä¸ªhello.txt<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;./render.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>åœ¨æ¸²æŸ“è¿›ç¨‹ä¸­ä½¿â½¤ version</p> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">btn.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>,<span class="function">()=&gt;</span>&#123;</span><br><span class="line"> <span class="variable language_">console</span>.<span class="title function_">log</span>(myAPI.<span class="property">version</span>)</span><br><span class="line"> <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">innerHTML</span> += <span class="string">`&lt;h2&gt;<span class="subst">$&#123;myAPI.version&#125;</span>&lt;/h2&gt;`</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li></ol><h3 id="ipc"><a class="markdownIt-Anchor" href="#ipc"></a> IPC</h3><blockquote><p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼š ä¸Šâ½‚ä¸­çš„ preload.js ï¼Œâ½†æ³•ä½¿â½¤å…¨éƒ¨ Node çš„ API ï¼Œâ½å¦‚ï¼šä¸èƒ½ä½¿â½¤ Node ä¸­çš„ fs æ¨¡ å—ï¼Œä½†ä¸»è¿›ç¨‹ï¼ˆ main.js ï¼‰æ˜¯å¯ä»¥çš„ï¼Œè¿™æ—¶å°±éœ€è¦è¿›ç¨‹é€šä¿¡äº†ã€‚ç®€å•è¯´ï¼šè¦ è®© preload.js é€šçŸ¥ main.js å»è°ƒâ½¤ fs æ¨¡å—å»â¼²æ´»ã€‚</p></blockquote><h4 id="1-æ¸²æŸ“è¿›ç¨‹ä¸»è¿›ç¨‹å•å‘"><a class="markdownIt-Anchor" href="#1-æ¸²æŸ“è¿›ç¨‹ä¸»è¿›ç¨‹å•å‘"></a> 1. æ¸²æŸ“è¿›ç¨‹â†’ä¸»è¿›ç¨‹ï¼ˆå•å‘ï¼‰</h4><p>æ¦‚è¿°ï¼šåœ¨æ¸²æŸ“å™¨è¿›ç¨‹ä¸­<a href="https://www.electronjs.org/zh/docs/latest/api/ipc-renderer">ipcRenderer.send</a>å‘é€æ¶ˆæ¯ï¼Œåœ¨ä¸»è¿›ç¨‹ä¸­ä½¿â½¤ ipcMain.on æ¥æ”¶æ¶ˆæ¯ã€‚</p><p>å¸¸â½¤äºï¼šåœ¨webä¸­è°ƒç”¨ä¸»è¿›ç¨‹çš„API</p><p><strong>éœ€æ±‚ï¼šç‚¹å‡»æŒ‰é’®åï¼Œåœ¨â½¤æˆ·çš„ D ç›˜åˆ›å»ºâ¼€ä¸ª hello.txt â½‚ä»¶ï¼Œâ½‚ä»¶å†…å®¹æ¥â¾ƒäºâ½¤æˆ·è¾“â¼Šã€‚</strong></p><ol><li>htmlâ»šâ¾¯ä¸­æ·»åŠ ç›¸å…³å…ƒç´ ï¼Œ</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;content&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;btn&quot;</span>&gt;</span>åœ¨â½¤æˆ·çš„Dç›˜åˆ›å»ºâ¼€ä¸ªhello.txt<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><pre><code>render.js ä¸­æ·»åŠ å¯¹åº”è„šæœ¬</code></pre><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> btn = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;btn&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> content = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;content&#x27;</span>)</span><br><span class="line">btn.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>,<span class="function">()=&gt;</span>&#123;</span><br><span class="line"> <span class="variable language_">console</span>.<span class="title function_">log</span>(content.<span class="property">value</span>)</span><br><span class="line"> myAPI.<span class="title function_">saveFile</span>(content.<span class="property">value</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ol start="2"><li>preload.js ä¸­ä½¿â½¤ <code>ipcRenderer.send('ä¿¡é“',å‚æ•°) </code>å‘é€æ¶ˆæ¯ï¼Œä¸ä¸»è¿›ç¨‹é€šä¿¡ã€‚</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123;contextBridge,ipcRenderer&#125; = <span class="built_in">require</span>(<span class="string">&#x27;electron&#x27;</span>)</span><br><span class="line">contextBridge.<span class="title function_">exposeInMainWorld</span>(<span class="string">&#x27;myAPI&#x27;</span>,&#123;</span><br><span class="line"> <span class="comment">/*******/</span></span><br><span class="line"> <span class="title function_">saveFile</span>(<span class="params">str</span>)&#123;</span><br><span class="line"> <span class="comment">// æ¸²æŸ“è¿›ç¨‹ç»™ä¸»è¿›ç¨‹å‘é€â¼€ä¸ªæ¶ˆæ¯</span></span><br><span class="line"> ipcRenderer.<span class="title function_">send</span>(<span class="string">&#x27;create-file&#x27;</span>,str)<span class="comment">//  &lt;--</span></span><br><span class="line"> &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ol start="3"><li>ä¸»è¿›ç¨‹ä¸­ï¼Œåœ¨åŠ è½½â»šâ¾¯ä¹‹å‰ï¼Œä½¿â½¤ <code>ipcMain.on('ä¿¡é“',å›è°ƒ)</code> é…ç½®å¯¹åº”å›è°ƒå‡½æ•°ï¼Œæ¥æ”¶æ¶ˆæ¯ã€‚</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// â½¤äºåˆ›å»ºçª—â¼</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createWindow</span>(<span class="params"></span>) &#123;</span><br><span class="line"> <span class="comment">/**********/</span></span><br><span class="line"> <span class="comment">// ä¸»è¿›ç¨‹æ³¨å†Œå¯¹åº”å›è°ƒ</span></span><br><span class="line"> ipcMain.<span class="title function_">on</span>(<span class="string">&#x27;create-file&#x27;</span>,<span class="title function_">createFile</span>())<span class="comment">//  &lt;--</span></span><br><span class="line"> <span class="comment">// åŠ è½½â¼€ä¸ªæœ¬åœ°â»šâ¾¯</span></span><br><span class="line"> win.<span class="title function_">loadFile</span>(path.<span class="title function_">resolve</span>(__dirname,<span class="string">&#x27;./pages/index.html&#x27;</span>))</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//åˆ›å»ºâ½‚ä»¶</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createFile</span>(<span class="params">event,data</span>)&#123;</span><br><span class="line"> fs.<span class="title function_">writeFileSync</span>(<span class="string">&#x27;D:/hello.txt&#x27;</span>,data)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-æ¸²æŸ“è¿›ç¨‹ä¸»è¿›ç¨‹åŒå‘"><a class="markdownIt-Anchor" href="#2-æ¸²æŸ“è¿›ç¨‹ä¸»è¿›ç¨‹åŒå‘"></a> 2. æ¸²æŸ“è¿›ç¨‹â†”ä¸»è¿›ç¨‹ï¼ˆåŒå‘ï¼‰</h4><p>æ¦‚è¿°ï¼šæ¸²æŸ“è¿›ç¨‹é€šè¿‡<code>ipcRenderer.invoke</code>å‘é€æ¶ˆæ¯ï¼Œä¸»è¿›ç¨‹ä½¿â½¤<code>ipcMain.handle</code>æ¥æ”¶å¹¶å¤„ç†æ¶ˆ æ¯ã€‚</p><p>å¤‡æ³¨ï¼š ipcRender.invoke çš„è¿”å›å€¼æ˜¯ Promise å®ä¾‹ã€‚å¯ä»¥è°ƒç”¨.toString()è·å–æºæ•°æ®.</p><p><strong>éœ€æ±‚ï¼šç‚¹å‡»æŒ‰é’®ä» D ç›˜è¯»å– hello.txt ä¸­çš„å†…å®¹ï¼Œå¹¶å°†ç»“æœå‘ˆç°åœ¨â»šâ¾¯ä¸Š</strong></p><ol><li>htmlâ»šâ¾¯ä¸­æ·»åŠ ç›¸å…³å…ƒç´ ï¼Œ</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;btn&quot;</span>&gt;</span>è¯»å–â½¤æˆ·Dç›˜çš„hello.txt<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><p>â€‹render.js ä¸­æ·»åŠ å¯¹åº”è„šæœ¬</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> btn = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;btn&#x27;</span>)</span><br><span class="line">btn.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>,<span class="title function_">async</span>()=&gt;&#123;</span><br><span class="line"> <span class="keyword">let</span> data =</span><br><span class="line"> <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">innerHTML</span> += <span class="string">`&lt;h2&gt;<span class="subst">$&#123;data&#125;</span>&lt;/h2&gt;`</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ol start="2"><li>preload.js ä¸­ä½¿â½¤ ipcRenderer.invoke(â€˜ä¿¡é“â€™,å‚æ•°) å‘é€æ¶ˆæ¯ï¼Œä¸ä¸»è¿›ç¨‹é€šä¿¡ã€‚</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123;contextBridge,ipcRenderer&#125; = <span class="built_in">require</span>(<span class="string">&#x27;electron&#x27;</span>)</span><br><span class="line">contextBridge.<span class="title function_">exposeInMainWorld</span>(<span class="string">&#x27;myAPI&#x27;</span>,&#123;</span><br><span class="line"> <span class="comment">/*******/</span></span><br><span class="line"> <span class="title function_">readFile</span> (path)&#123;</span><br><span class="line"> <span class="keyword">return</span> ipcRenderer.<span class="title function_">invoke</span>(<span class="string">&#x27;read-file&#x27;</span>)</span><br><span class="line"> &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ol start="3"><li>ä¸»è¿›ç¨‹ä¸­ï¼Œåœ¨åŠ è½½â»šâ¾¯ä¹‹å‰ï¼Œä½¿â½¤ ipcMain.handle(â€˜ä¿¡é“â€™,å›è°ƒ) æ¥æ”¶æ¶ˆæ¯ï¼Œå¹¶é…ç½®å› è°ƒå‡½æ•°ã€‚</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// â½¤äºåˆ›å»ºçª—â¼</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createWindow</span>(<span class="params"></span>) &#123;</span><br><span class="line"> <span class="comment">/**********/</span></span><br><span class="line"> <span class="comment">// ä¸»è¿›ç¨‹æ³¨å†Œå¯¹åº”å›è°ƒ</span></span><br><span class="line"> ipcMain.<span class="title function_">handle</span>(<span class="string">&#x27;read-file&#x27;</span>,readFile)</span><br><span class="line"> <span class="comment">// åŠ è½½â¼€ä¸ªæœ¬åœ°â»šâ¾¯</span></span><br><span class="line"> win.<span class="title function_">loadFile</span>(path.<span class="title function_">resolve</span>(__dirname,<span class="string">&#x27;./pages/index.html&#x27;</span>))</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è¯»å–â½‚ä»¶</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">readFile</span>(<span class="params">event,path</span>)&#123;</span><br><span class="line"> <span class="keyword">return</span> fs.<span class="title function_">readFileSync</span>(path).<span class="title function_">toString</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3-ä¸»è¿›ç¨‹åˆ°æ¸²æŸ“è¿›ç¨‹"><a class="markdownIt-Anchor" href="#3-ä¸»è¿›ç¨‹åˆ°æ¸²æŸ“è¿›ç¨‹"></a> 3. ä¸»è¿›ç¨‹åˆ°â†’æ¸²æŸ“è¿›ç¨‹</h4><p>æ¦‚è¿°ï¼šä¸»è¿›ç¨‹ä½¿â½¤ win.webContents.send å‘é€æ¶ˆæ¯ï¼Œæ¸²æŸ“è¿›ç¨‹é€šè¿‡ipcRenderer.on å¤„ç†æ¶ˆæ¯ï¼Œ å¸¸â½¤äºï¼šä»ä¸»è¿›ç¨‹ä¸»åŠ¨å‘æ¶ˆæ¯ç»™æ¸²æŸ“è¿›ç¨‹ï¼Œä¾‹å¦‚ä¸‹â¾¯çš„è¿™ä¸ªéœ€æ±‚ï¼š</p><p><strong>éœ€æ±‚ï¼šåº”â½¤åŠ è½½ 6 ç§’é’Ÿåï¼Œä¸»åŠ¨ç»™æ¸²æŸ“è¿›ç¨‹å‘é€â¼€ä¸ªæ¶ˆæ¯ï¼Œå†…å®¹æ˜¯ï¼šä½ å¥½å•Šï¼</strong></p><ol><li>â»šâ¾¯ä¸­æ·»åŠ ç›¸å…³å…ƒç´ ï¼Œrender.js ä¸­æ·»åŠ å¯¹åº”è„šæœ¬</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="property">onload</span> = <span class="function">()=&gt;</span>&#123;</span><br><span class="line"> myAPI.<span class="title function_">getMessage</span>(logMessage)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">logMessage</span>(<span class="params">event,str</span>)&#123;</span><br><span class="line"> <span class="variable language_">console</span>.<span class="title function_">log</span>(event,str)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li><code>preload.js</code>ä¸­ä½¿â½¤<code>ipcRenderer.on ('ä¿¡é“',å›è°ƒ)</code>æ¥æ”¶æ¶ˆæ¯ï¼Œå¹¶é…ç½®å›è°ƒå‡½æ•°ã€‚</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123;contextBridge,ipcRenderer&#125; = <span class="built_in">require</span>(<span class="string">&#x27;electron&#x27;</span>)</span><br><span class="line">contextBridge.<span class="title function_">exposeInMainWorld</span>(<span class="string">&#x27;myAPI&#x27;</span>,&#123;</span><br><span class="line"> <span class="comment">/*******/</span></span><br><span class="line"> <span class="attr">getMessage</span>: <span class="function">(<span class="params">callback</span>) =&gt;</span> &#123;</span><br><span class="line"> <span class="keyword">return</span> ipcRenderer.<span class="title function_">on</span>(<span class="string">&#x27;message&#x27;</span>, callback);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ol start="3"><li>ä¸»è¿›ç¨‹ä¸­ï¼Œåœ¨åˆé€‚çš„æ—¶å€™ï¼Œä½¿â½¤<code>win.webContents.send('ä¿¡é“',æ•°æ®)</code>å‘é€æ¶ˆæ¯ã€‚</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// â½¤äºåˆ›å»ºçª—â¼</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createWindow</span>(<span class="params"></span>) &#123;</span><br><span class="line"> <span class="comment">/**********/</span></span><br><span class="line"> <span class="comment">// åŠ è½½â¼€ä¸ªæœ¬åœ°â»šâ¾¯</span></span><br><span class="line"> win.<span class="title function_">loadFile</span>(path.<span class="title function_">resolve</span>(__dirname,<span class="string">&#x27;./pages/index.html&#x27;</span>))</span><br><span class="line"> <span class="comment">// åˆ›å»ºâ¼€ä¸ªå®šæ—¶å™¨</span></span><br><span class="line"> <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line"> win.<span class="property">webContents</span>.<span class="title function_">send</span>(<span class="string">&#x27;message&#x27;</span>,<span class="string">&#x27;ä½ å¥½å•Šï¼&#x27;</span>)</span><br><span class="line"> &#125;, <span class="number">6000</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ‰“åŒ…åº”ç”¨"><a class="markdownIt-Anchor" href="#æ‰“åŒ…åº”ç”¨"></a> æ‰“åŒ…åº”ç”¨</h3><p>ä½¿â½¤ electron-builder æ‰“åŒ…åº”â½¤</p><ol><li>å®‰è£… <code>electron-builder </code></li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install electron-builder -D</span><br></pre></td></tr></table></figure><ol start="2"><li>åœ¨ package.json ä¸­è¿›â¾ç›¸å…³é…ç½®ï¼Œå…·ä½“é…ç½®å¦‚ä¸‹</li></ol><blockquote><p>å¤‡æ³¨ï¼šjson â½‚ä»¶ä¸â½€æŒæ³¨é‡Šï¼Œä½¿â½¤æ—¶è¯·å»æ‰æ‰€æœ‰æ³¨é‡Šã€‚</p></blockquote><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;video-tools&quot;</span><span class="punctuation">,</span> <span class="comment">// åº”â½¤ç¨‹åºçš„åç§°</span></span><br><span class="line">  <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1.0.0&quot;</span><span class="punctuation">,</span> <span class="comment">// åº”â½¤ç¨‹åºçš„ç‰ˆæœ¬</span></span><br><span class="line">  <span class="attr">&quot;main&quot;</span><span class="punctuation">:</span> <span class="string">&quot;main.js&quot;</span><span class="punctuation">,</span> <span class="comment">// åº”â½¤ç¨‹åºçš„â¼Šâ¼â½‚ä»¶</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;start&quot;</span><span class="punctuation">:</span> <span class="string">&quot;electron .&quot;</span><span class="punctuation">,</span> <span class="comment">// ä½¿â½¤ `electron .` å‘½ä»¤å¯åŠ¨åº”â½¤ç¨‹åº</span></span><br><span class="line">    <span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="string">&quot;electron-builder&quot;</span> <span class="comment">// ä½¿â½¤ `electron-builder` æ‰“åŒ…åº”â½¤ç¨‹åºï¼Œâ½£æˆå®‰è£…åŒ…&lt;--å¿…é¡»</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//&lt;--ä»¥ä¸‹å¿…é¡»--&gt;</span></span><br><span class="line">  <span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;appId&quot;</span><span class="punctuation">:</span> <span class="string">&quot;com.atguigu.video&quot;</span><span class="punctuation">,</span> <span class="comment">// åº”â½¤ç¨‹åºçš„å”¯â¼€æ ‡è¯†ç¬¦</span></span><br><span class="line">    <span class="comment">// æ‰“åŒ…windowså¹³å°å®‰è£…åŒ…çš„å…·ä½“é…ç½®</span></span><br><span class="line">    <span class="attr">&quot;win&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;icon&quot;</span><span class="punctuation">:</span> <span class="string">&quot;./logo.ico&quot;</span><span class="punctuation">,</span> <span class="comment">//åº”â½¤å›¾æ ‡</span></span><br><span class="line">      <span class="attr">&quot;target&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;target&quot;</span><span class="punctuation">:</span> <span class="string">&quot;nsis&quot;</span><span class="punctuation">,</span> <span class="comment">// æŒ‡å®šä½¿â½¤ NSIS ä½œä¸ºå®‰è£…ç¨‹åºæ ¼å¼</span></span><br><span class="line">          <span class="attr">&quot;arch&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">            <span class="string">&quot;x64&quot;</span></span><br><span class="line">          <span class="punctuation">]</span> <span class="comment">// â½£æˆ 64 ä½å®‰è£…åŒ…</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">      <span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;nsis&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;oneClick&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span> <span class="comment">// è®¾ç½®ä¸º `false` ä½¿å®‰è£…ç¨‹åºæ˜¾ç¤ºå®‰è£…å‘å¯¼ç•Œâ¾¯ï¼Œâ½½ä¸æ˜¯â¼€é”®å®‰è£…</span></span><br><span class="line"> <span class="attr">&quot;perMachine&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span> <span class="comment">// å…è®¸æ¯å°æœºå™¨å®‰è£…â¼€æ¬¡ï¼Œâ½½ä¸æ˜¯æ¯ä¸ªâ½¤æˆ·éƒ½å®‰è£…</span></span><br><span class="line">      <span class="attr">&quot;allowToChangeInstallationDirectory&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span> <span class="comment">// å…è®¸â½¤æˆ·åœ¨å®‰è£…è¿‡ç¨‹ä¸­é€‰æ‹©å®‰è£…â½¬å½•</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="comment">//&lt;-------&gt;</span></span><br><span class="line">    </span><br><span class="line">  <span class="attr">&quot;devDependencies&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;electron&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^30.0.0&quot;</span><span class="punctuation">,</span> <span class="comment">// å¼€å‘ä¾èµ–ä¸­çš„ Electron ç‰ˆæœ¬</span></span><br><span class="line">    <span class="attr">&quot;electron-builder&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^24.13.3&quot;</span> <span class="comment">// å¼€å‘ä¾èµ–ä¸­çš„ `electron-builder` ç‰ˆæœ¬</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;author&quot;</span><span class="punctuation">:</span> <span class="string">&quot;tianyu&quot;</span><span class="punctuation">,</span> <span class="comment">// ä½œè€…ä¿¡æ¯</span></span><br><span class="line">  <span class="attr">&quot;license&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ISC&quot;</span><span class="punctuation">,</span> <span class="comment">// è®¸å¯è¯ä¿¡æ¯</span></span><br><span class="line">  <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;A video processing program based on Electron&quot;</span> <span class="comment">// åº”â½¤ç¨‹åºçš„æè¿°</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><ol start="3"><li>æ‰§â¾æ‰“åŒ…å‘½ä»¤</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run build</span><br></pre></td></tr></table></figure><h3 id="question"><a class="markdownIt-Anchor" href="#question"></a> Question</h3><p><strong>1. ä½¿ç”¨ç®­å¤´å‡½æ•°</strong></p><p>â€‹ä½¿ç”¨ç®­å¤´å‡½æ•° <code>() =&gt; {}</code> æ›¿ä»£ä¼ ç»Ÿçš„å‡½æ•°è¡¨è¾¾å¼ï¼Œç®€åŒ–å‡½æ•°å®šä¹‰ã€‚</p><p>â€‹ä¼ ç»Ÿå‡½æ•°è¡¨è¾¾å¼ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>â€‹ç®­å¤´å‡½æ•°ç®€åŒ–å®šä¹‰ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">add</span> = (<span class="params">a, b</span>) =&gt; a + b;</span><br></pre></td></tr></table></figure><p>â€‹é€šè¿‡ä½¿ç”¨ç®­å¤´å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥å°†å‡½æ•°å®šä¹‰çš„è¯­æ³•æ›´ç®€æ´åœ°è¡¨ç¤ºå‡ºæ¥ï¼Œçœç•¥äº† <code>function</code> å…³é”®å­—å’Œ <code>return</code> è¯­å¥ã€‚ç®­å¤´å‡½æ•°çš„ç‰¹ç‚¹æ˜¯è‡ªåŠ¨ç»‘å®šäº†å½“å‰ä½œç”¨åŸŸçš„ <code>this</code> å€¼ï¼Œå› æ­¤åœ¨ä¸€äº›å›è°ƒæˆ–é«˜é˜¶å‡½æ•°ä¸­ä½¿ç”¨ä¼šæ›´åŠ æ–¹ä¾¿å’Œç®€æ´ã€‚è¯·è®°ä½ï¼Œç®­å¤´å‡½æ•°ä¸ä¼ ç»Ÿå‡½æ•°è¡¨è¾¾å¼åœ¨è¯­ä¹‰å’Œä½œç”¨åŸŸç»‘å®šæ–¹é¢å­˜åœ¨ä¸€äº›å·®å¼‚ï¼Œåœ¨ä½¿ç”¨æ—¶è¦æ³¨æ„è¿™äº›å·®å¼‚ã€‚</p><p><strong>2ã€å¦‚ä½•electronæ¶ˆé™¤å·¥å…·æ </strong></p><p>â€‹å…³äº BrowserWindow çš„æ›´å¤šé…ç½®é¡¹ï¼Œè¯·å‚è€ƒï¼š<a href="https://www.electronjs.org/zh/docs/latest/api/base-window#%E5%AE%9E%E4%BE%8B%E5%B1%9E%E6%80%A7">BrowserWindowå®ä¾‹å±æ€§</a></p><p><strong>3ã€å¦‚ä½•é€‚é…ä¸åŒç¼©æ”¾çš„å±å¹•</strong></p><p>â€‹è·å–å½“å‰å±å¹•ç¼©æ”¾å€¼ï¼Œå¹¶<code>Math.round(800 / scaleFactor)</code>å…¶ä¸­800æ˜¯ä½ çš„ç›®æ ‡å°ºå¯¸</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> scaleFactor = screen.<span class="title function_">getPrimaryDisplay</span>().<span class="property">scaleFactor</span><span class="comment">//è·å–å½“å‰å±å¹•çš„ç¼©æ”¾å€¼</span></span><br></pre></td></tr></table></figure><p><strong>4ã€ä¸ºä»€ä¹ˆåœ¨package.jsonä¸­å¼•å…¥äº†&quot;type&quot;: â€œmoduleâ€ï¼Œè¿˜ä¼šæœ‰æŠ¥é”™Uncaught SyntaxError: Cannot use import statement outside a module</strong></p><p>â€‹å› ä¸º<code>package.json</code> çš„ <code>&quot;type&quot;: &quot;module&quot;</code> <strong>åªå¯¹ Node.js ç¯å¢ƒæœ‰æ•ˆ</strong>ï¼Œå¯¹æµè§ˆå™¨<strong>æ— æ•ˆ</strong>ï¼Œæ‰€ä»¥åœ¨æ¸²æŸ“è¿›ç¨‹ä¸­çš„jséœ€è¦åœ¨å¼•å…¥jsçš„æ ‡ç­¾ä¸­æ·»åŠ <code>type=&quot;module&quot;</code></p><p><strong>5ã€æ€ä¹ˆå®ç°æ— çª—å£æ¨¡å¼ä¸‹å¯ä»¥æ‹–æ‹½</strong></p>]]>
    </content>
    <id>https://imouyo.github.io/2026/02/21/electron%E5%AD%A6%E4%B9%A0/</id>
    <link href="https://imouyo.github.io/2026/02/21/electron%E5%AD%A6%E4%B9%A0/"/>
    <published>2026-02-21T13:40:37.000Z</published>
    <summary>
      <![CDATA[<h3 id="å·¥ä½œæµç¨‹"><a class="markdownIt-Anchor" href="#å·¥ä½œæµç¨‹"></a> å·¥ä½œæµç¨‹</h3>
<p><img src="electron%E5%AD%A6%E4%B9%A0/image-20260221215237301.png"]]>
    </summary>
    <title>electronå­¦ä¹ </title>
    <updated>2026-02-23T16:11:41.885Z</updated>
  </entry>
  <entry>
    <author>
      <name>John Doe</name>
    </author>
    <id>https://imouyo.github.io/2026/02/19/%E6%96%B0%E5%B9%B4%E5%BF%AB%E4%B9%90/</id>
    <link href="https://imouyo.github.io/2026/02/19/%E6%96%B0%E5%B9%B4%E5%BF%AB%E4%B9%90/"/>
    <published>2026-02-19T10:22:27.436Z</published>
    <updated>2026-02-19T10:28:51.548Z</updated>
  </entry>
  <entry>
    <author>
      <name>John Doe</name>
    </author>
    <content>
      <![CDATA[<h2 id="ejs"><a class="markdownIt-Anchor" href="#ejs"></a> Ejs</h2><table><thead><tr><th style="text-align:left">æ ‡ç­¾</th><th style="text-align:left">å«ä¹‰</th></tr></thead><tbody><tr><td style="text-align:left">&lt;%</td><td style="text-align:left">è„šæœ¬æ ‡ç­¾ï¼Œç”¨äºæµç¨‹æ§åˆ¶</td></tr><tr><td style="text-align:left">&lt;%_</td><td style="text-align:left">åˆ é™¤å‰é¢çš„ç©ºæ ¼ç¬¦</td></tr><tr><td style="text-align:left">&lt;%=</td><td style="text-align:left">è¾“å‡ºæ•°æ®åˆ°æ¨¡æ¿</td></tr><tr><td style="text-align:left">&lt;%-</td><td style="text-align:left">è¾“å‡ºéè½¬ä¹‰æ•°æ®åˆ°æ¨¡æ¿</td></tr><tr><td style="text-align:left">&lt;%#</td><td style="text-align:left">æ³¨é‡Š</td></tr><tr><td style="text-align:left">&lt;%%</td><td style="text-align:left">è¾“å‡ºå­—ç¬¦ä¸²ã€&lt;%ã€</td></tr><tr><td style="text-align:left">&gt;%</td><td style="text-align:left">è„šæœ¬ç»“æŸæ ‡ç­¾</td></tr><tr><td style="text-align:left">-%&gt;</td><td style="text-align:left">ç»“æŸæ—¶ï¼Œåˆ é™¤æ¢è¡Œç¬¦</td></tr><tr><td style="text-align:left">_%&gt;</td><td style="text-align:left">ç»“æŸæ—¶ï¼Œåˆ é™¤ç©ºæ ¼ç¬¦</td></tr><tr><td style="text-align:left">&lt;%- include(â€œindex.ejsâ€) %&gt;</td><td style="text-align:left">å¼•å…¥å…¶ä»–æ¨¡æ¿</td></tr></tbody></table><h2 id="hexo"><a class="markdownIt-Anchor" href="#hexo"></a> Hexo</h2><table><thead><tr><th style="text-align:left">å˜é‡</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left">site</td><td style="text-align:left">æ€»ä½“å˜é‡ï¼Œå‡ ä¹éƒ½æ˜¯ä»è¿™é‡Œå¼€å§‹çš„</td></tr><tr><td style="text-align:left">site.posts</td><td style="text-align:left">æ‰€æœ‰æ–‡ç« </td></tr><tr><td style="text-align:left">site.posts[0].path</td><td style="text-align:left">æ–‡ç« è·¯å¾„ï¼Œå¸¦æ—¥æœŸçš„</td></tr><tr><td style="text-align:left">site.posts[0].slug</td><td style="text-align:left">æ–‡ç« è·¯å¾„ï¼Œæ ¹æ®é¡¹ç›®æ–‡ä»¶å¤¹çš„è·¯å¾„æ¥çš„</td></tr><tr><td style="text-align:left">site.posts[0]._id</td><td style="text-align:left">æ–‡ç« çš„å”¯ä¸€ idï¼Œåé¢ä¼šç”¨äº active å¯¹æ¯”</td></tr><tr><td style="text-align:left">site.posts[0].title</td><td style="text-align:left">æ–‡ç« çš„æ ‡é¢˜</td></tr><tr><td style="text-align:left">site.posts[0].date</td><td style="text-align:left">æ–‡ç« çš„æ—¶é—´</td></tr><tr><td style="text-align:left">page.date</td><td style="text-align:left">åœ¨ç›´æ¥è®¿é—®æ–‡ç« è·¯å¾„ä¸‹ï¼Œæ–‡ç« çš„æ—¶é—´</td></tr><tr><td style="text-align:left">page.title</td><td style="text-align:left">åœ¨ç›´æ¥è®¿é—®æ–‡ç« è·¯å¾„ä¸‹ï¼Œæ–‡ç« çš„æ ‡é¢˜</td></tr><tr><td style="text-align:left">page._id</td><td style="text-align:left">åœ¨ç›´æ¥è®¿é—®æ–‡ç« è·¯å¾„ä¸‹ï¼Œæ–‡ç« çš„çš„å”¯ä¸€ idï¼Œåé¢ä¼šç”¨äº active å¯¹æ¯”</td></tr><tr><td style="text-align:left">page.content</td><td style="text-align:left">å¼•å…¥å¯¹åº”æ–‡ç« çš„æ­£æ–‡</td></tr><tr><td style="text-align:left"><a href="http://config.xxx">config.xxx</a></td><td style="text-align:left">æ€»ä½“é…ç½®æ–‡ä»¶çš„å¼•ç”¨ _config.yml</td></tr><tr><td style="text-align:left"><a href="http://theme.xxx">theme.xxx</a></td><td style="text-align:left">ä¸»é¢˜é…ç½®æ–‡ä»¶ theme._config.yml</td></tr><tr><td style="text-align:left">&lt;%- body %&gt;</td><td style="text-align:left">åŒæ—¶å¼•å…¥ post.ejs å’Œ index.ejs</td></tr><tr><td style="text-align:left">&lt;%- css(path, â€¦) %&gt;</td><td style="text-align:left">å¼•å…¥ css æ–‡ä»¶</td></tr><tr><td style="text-align:left">&lt;%- js(path, â€¦) %&gt;</td><td style="text-align:left">å¼•å…¥ js æ–‡ä»¶</td></tr></tbody></table>]]>
    </content>
    <id>https://imouyo.github.io/2026/02/15/EJS/</id>
    <link href="https://imouyo.github.io/2026/02/15/EJS/"/>
    <published>2026-02-15T11:06:50.000Z</published>
    <summary>
      <![CDATA[<h2 id="ejs"><a class="markdownIt-Anchor" href="#ejs"></a> Ejs</h2>
<table>
<thead>
<tr>
<th style="text-align:left">æ ‡ç­¾</th>
<th style="text]]>
    </summary>
    <title>EJS</title>
    <updated>2026-02-15T11:07:42.149Z</updated>
  </entry>
  <entry>
    <author>
      <name>John Doe</name>
    </author>
    <content>
      <![CDATA[<p><img src="Hexo%E7%9A%84%E6%B5%8B%E8%AF%95/avatar.gif" alt="avatar" /></p>]]>
    </content>
    <id>https://imouyo.github.io/2026/02/13/Hexo%E7%9A%84%E6%B5%8B%E8%AF%95/</id>
    <link href="https://imouyo.github.io/2026/02/13/Hexo%E7%9A%84%E6%B5%8B%E8%AF%95/"/>
    <published>2026-02-13T13:11:22.000Z</published>
    <summary>
      <![CDATA[<p><img src="Hexo%E7%9A%84%E6%B5%8B%E8%AF%95/avatar.gif" alt="avatar" /></p>]]>
    </summary>
    <title>Hexoçš„æµ‹è¯•</title>
    <updated>2026-02-13T13:11:45.715Z</updated>
  </entry>
  <entry>
    <author>
      <name>John Doe</name>
    </author>
    <category term="issue" scheme="https://imouyo.github.io/tags/issue/"/>
    <content>
      <![CDATA[<p>éœ€è¦çš„å·¥å…·Typoraï¼ŒVScode(è®°äº‹æœ¬ä¹Ÿå¯ä»¥)</p><p>é…ç½®ç¯å¢ƒï¼šhexo: 8.1.1ï¼Œhexo-cli: 4.3.2ï¼Œnode: 20.19.5ï¼Œos: win32 10.0.19045 undefined</p><hr /><h3 id="å‰è¨€"><a class="markdownIt-Anchor" href="#å‰è¨€"></a> å‰è¨€</h3><p>åœ¨ä½¿ç”¨Hexoç¼–å†™åšå®¢æ—¶ï¼Œä¼šé‡åˆ°æ’å…¥å›¾ç‰‡è¦ä¹ˆæœ¬åœ°ç«¯å¯ä»¥é¢„è§ˆå¯ä»¥ï¼Œä½†ä¸Šä¼ åˆ°githubç«¯ï¼Œå°±æ— æ³•æ˜¾ç¤ºï¼Œæˆ–è€…æ˜¯åè¿‡æ¥çš„æƒ…å†µï¼Œè¿™ä»¤äººéå¸¸éš¾å—ã€‚Hexoå®˜æ–¹æä¾›äº†ä¸¤ç§å­˜å‚¨å›¾ç‰‡çš„ç­–ç•¥ï¼Œåˆ†åˆ«æ˜¯ä½¿ç”¨<a href="https://hexo.io/zh-cn/docs/asset-folders">å…¨å±€èµ„æºæ–‡ä»¶å¤¹å’Œæ–‡ç« èµ„æºæ–‡ä»¶å¤¹</a>ï¼Œ</p><p>å¯¹äºä½¿ç”¨å…¨å±€èµ„æºæ–‡ä»¶å¤¹ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå›¾ç‰‡å…¨éƒ½æ”¾åœ¨ï¼Œ<code>åšå®¢æ ¹ç›®å½•ä¸‹çš„/source/images</code>æ–‡ä»¶å¤¹å†…ï¼Œå¹¶åœ¨ç¼–å†™åšå®¢æ—¶ä½¿ç”¨<code>![](../images/photo.jpg)</code>å³å¯è§£å†³å›¾ç‰‡æœ¬åœ°ç«¯é¢„è§ˆä¸æ˜¾ç¤ºé—®é¢˜ï¼Œå¹¶ä¸”ä¸Šä¼ åˆ°githubç«¯ä¹Ÿå¯ä»¥æ˜¾ç¤ºã€‚</p><p>ä½†æ˜¯å¯èƒ½æ˜¯hexoç‰ˆæœ¬çš„é—®é¢˜æˆ–è€…æ˜¯å®‰è£…çš„ä¸»é¢˜é—®é¢˜ï¼Œåœ¨æˆ‘æ–°åˆ›å»º<code>hexo 8.1.1</code>ç‰ˆæœ¬ä¸‹ä½¿ç”¨ä¸Šè¿°çš„æ–¹æ³•ï¼Œå¯ä»¥è§£å†³å›¾ç‰‡ä¸¤ç«¯é¢„è§ˆåŒæ­¥æ˜¾ç¤ºçš„é—®é¢˜ï¼Œä½†åœ¨ä¹‹å‰çš„ç‰ˆæœ¬å›¾ç‰‡å´åªèƒ½åœ¨æœ¬åœ°ç«¯é¢„è§ˆï¼Œæ— æ³•åœ¨githubç«¯æ˜¾ç¤ºã€‚</p><p>å¯¹äºä½¿ç”¨æ–‡ç« èµ„æºæ–‡ä»¶å¤¹ï¼Œæ˜¯æ— æ³•é€šè¿‡ç±»ä¼¼çš„æ–¹æ³•è§£å†³ä¸¤ç«¯å›¾ç‰‡æ˜¾ç¤ºçš„é—®é¢˜ï¼Œé™¤éå®‰è£…æ’ä»¶ä¹‹ç±»çš„ã€‚è™½è¯´å®˜æ–¹æä¾›äº†ä½¿ç”¨ç›¸å¯¹è·¯å¾„å¼•ç”¨çš„æ ‡ç­¾æ’ä»¶æ¥è§£å†³ï¼Œä½†æ˜¯æ’ä»¶æ’å…¥å›¾ç‰‡ä¹¦å†™æ ¼å¼ä¸ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% asset_path slug %&#125;</span><br><span class="line">&#123;% asset_img slug [title] %&#125;</span><br><span class="line">&#123;% asset_link slug [title] %&#125;</span><br></pre></td></tr></table></figure><p>æœ¬äººè§‰å¾—ååˆ†éº»çƒ¦ï¼Œä»…ä»£è¡¨ä¸ªäººæ„è§</p><p>ç»¼ä¸Šæ‰€è¿°ï¼Œæœ¬æ–‡æä¾›ä¸€ç§åŸºäºjsçš„è§£å†³åŠæ³•ã€‚</p><hr /><h3 id="åŸç†"><a class="markdownIt-Anchor" href="#åŸç†"></a> åŸç†</h3><p>åœ¨æ‰§è¡Œhexo gä¹‹åï¼Œä¼šå°†æ–‡ç« ç¼–è¯‘æˆhtmlæ–‡ä»¶ï¼Œå¦‚æœä¸ºæ¯ç¯‡æ–‡ç« éƒ½æ’å…¥ä¸€æ®µjsä»£ç ï¼Œä»£ç çš„ä½œç”¨æ˜¯ä¿®æ”¹è¯¥æ–‡ç« ä¸­çš„å›¾ç‰‡çš„srcè·¯å¾„ï¼Œä»£ç å¦‚ä¸‹ï¼Œé‚£ä¹ˆç†è®ºä¸Šå°±å¯ä»¥å®ç°åœ¨æœ¬åœ°çš„ç¼–è¾‘markdownæ–‡æœ¬æ—¶ä½¿ç”¨ä¸€ä¸ªæ–‡ä»¶å¤¹å­˜æ”¾å›¾ç‰‡ï¼Œåœ¨æ‰§è¡Œå®Œhexo gå¹¶è¿è¡Œåä¼šä½¿å¾—æ¯ç¯‡æ–‡ç« ä¸­çš„æ¯ä¸ªå›¾ç‰‡çš„scrè·¯å¾„é‡æ–°å®šä½ï¼Œä½¿å…¶æŒ‡å‘æ­£ç¡®çš„å›¾ç‰‡å­˜æ”¾ä½ç½®ï¼Œè¿™æ ·å°±å®ç°äº†æœ¬åœ°ç¼–è¾‘æ—¶å’Œè¿è¡Œåéƒ½å¯ä»¥çœ‹åˆ°æ’å…¥çš„å›¾ç‰‡ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- ç”±deepseekç”Ÿæˆï¼Œä¸ä¿è¯æ¯äººéƒ½é€‚ç”¨ï¼Œ(ä½†æˆ‘å‡ ä¸ªæœ‹å‹çš„ç»™æˆ‘è¯´æ²¡é—®é¢˜ï¼Œèƒ½æ­£å¸¸è¿è¡Œ) --&gt;</span><br><span class="line">&lt;!-- æµ‹è¯•æ ‡è®°ï¼šçœ‹è¿™ä¸ªä¼šä¸ä¼šå‡ºç°åœ¨ç”Ÿæˆçš„<span class="variable constant_">HTML</span>ä¸­ --&gt;</span><br><span class="line">&lt;!-- <span class="variable constant_">PARTIAL_IMAGE_FIXER_START</span> --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    (<span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// é…ç½®é€‰é¡¹</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> config = &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// éœ€è¦æ›¿æ¢çš„è·¯å¾„è§„åˆ™</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">rules</span>: [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">pattern</span>: <span class="string">&#x27;^&lt;%- page.title %&gt;/&#x27;</span>,           <span class="comment">// åŒ¹é…ä»¥ /images/ å¼€å¤´çš„è·¯å¾„</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">replace</span>: <span class="string">&#x27;&#x27;</span>       <span class="comment">// æ›¿æ¢ä¸º /assets/images/</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">pattern</span>: <span class="string">&#x27;^&lt;%- encodeURIComponent(page.title) %&gt;/&#x27;</span>,   <span class="comment">//è§£å†³ä¸­æ–‡é—®é¢˜</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">replace</span>: <span class="string">&#x27;&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    ],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// æ’é™¤å¤–éƒ¨é“¾æ¥</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">excludeExternal</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// æ˜¯å¦æ˜¾ç¤ºè°ƒè¯•ä¿¡æ¯</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">debug</span>: <span class="literal">true</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// æ‰§è¡Œä¿®æ”¹</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">function</span> <span class="title function_">fixImagePaths</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">const</span> images = <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;img&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">for</span> (<span class="keyword">let</span> img <span class="keyword">of</span> images) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">let</span> src = img.<span class="title function_">getAttribute</span>(<span class="string">&#x27;src&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">// è·³è¿‡ç©ºå€¼</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">if</span> (!src) <span class="keyword">continue</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">// è·³è¿‡å¤–éƒ¨é“¾æ¥ï¼ˆå¦‚æœé…ç½®æ’é™¤ï¼‰</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">if</span> (config.<span class="property">excludeExternal</span> &amp;&amp; src.<span class="title function_">match</span>(<span class="regexp">/^(https?:)?\/\//</span>)) <span class="keyword">continue</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">let</span> originalSrc = src;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">// åº”ç”¨æ‰€æœ‰æ›¿æ¢è§„åˆ™</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">for</span> (<span class="keyword">let</span> rule <span class="keyword">of</span> config.<span class="property">rules</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">const</span> regex = <span class="keyword">new</span> <span class="title class_">RegExp</span>(rule.<span class="property">pattern</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">if</span> (regex.<span class="title function_">test</span>(src)) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          src = src.<span class="title function_">replace</span>(regex, rule.<span class="property">replace</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">// å¦‚æœè·¯å¾„æ”¹å˜äº†ï¼Œæ›´æ–°å›¾ç‰‡ src</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">if</span> (src !== originalSrc) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        img.<span class="property">src</span> = src;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">if</span> (config.<span class="property">debug</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;âœ… å›¾ç‰‡è·¯å¾„å·²ä¿®æ”¹:&#x27;</span>, originalSrc, <span class="string">&#x27;â†’&#x27;</span>, src);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// åœ¨å¤šä¸ªæ—¶æœºæ‰§è¡Œï¼Œç¡®ä¿ä¿®æ”¹ç”Ÿæ•ˆ</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="property">readyState</span> === <span class="string">&#x27;loading&#x27;</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;DOMContentLoaded&#x27;</span>, fixImagePaths);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125; <span class="keyword">else</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">fixImagePaths</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// å¦‚æœæ˜¯ SPA æˆ–æœ‰åŠ¨æ€åŠ è½½çš„å†…å®¹ï¼Œå¯ä»¥ç›‘å¬ DOM å˜åŒ–</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> observer = <span class="keyword">new</span> <span class="title class_">MutationObserver</span>(<span class="keyword">function</span>(<span class="params">mutations</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    mutations.<span class="title function_">forEach</span>(<span class="keyword">function</span>(<span class="params">mutation</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">if</span> (mutation.<span class="property">addedNodes</span>.<span class="property">length</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="title function_">fixImagePaths</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  observer.<span class="title function_">observe</span>(<span class="variable language_">document</span>.<span class="property">body</span>, &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">childList</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">subtree</span>: <span class="literal">true</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;)();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;!-- <span class="variable constant_">PARTIAL_IMAGE_FIXER_END</span> --&gt;</span><br></pre></td></tr></table></figure><hr /><h3 id="hexoç›®å½•å‚è€ƒ"><a class="markdownIt-Anchor" href="#hexoç›®å½•å‚è€ƒ"></a> Hexoç›®å½•å‚è€ƒï¼š</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">â”œâ”€â”€ _config.yml                 </span><br><span class="line">â”œâ”€â”€ node_modules                </span><br><span class="line">â”œâ”€â”€ package-lock.json        </span><br><span class="line">â”œâ”€â”€ package.json                </span><br><span class="line">â”œâ”€â”€ scaffolds                        </span><br><span class="line">â”œâ”€â”€ source                            </span><br><span class="line">â””â”€â”€ themes                            </span><br><span class="line">    â”œâ”€â”€ landscape</span><br><span class="line">    â””â”€â”€ pure                // è‡ªå»ºçš„ä¸»é¢˜ç›®å½•</span><br><span class="line">        â”œâ”€â”€ _config.yml     // ä¸»é¢˜é…ç½®æ–‡ä»¶</span><br><span class="line">        â”œâ”€â”€ layout          // ä¸»è¦æ„é€  html çš„æ¨¡æ¿</span><br><span class="line">        â”‚   â”œâ”€â”€ index.ejs   // ä¸»é¡µæ¨¡æ¿</span><br><span class="line">        â”‚   â”œâ”€â”€ layout.ejs  // å¸ƒå±€æ¨¡æ¿</span><br><span class="line">        â”‚   â”œâ”€â”€ post.ejs    // md ç¼–è¯‘æˆ html åçš„æ–‡ä»¶æ¨¡æ¿</span><br><span class="line">        â”‚   â””â”€â”€ _script</span><br><span class="line">        â”‚       â””â”€â”€image-fixer.ejs//ä¿®æ”¹å›¾ç‰‡å®šä½</span><br><span class="line">        â””â”€â”€ source          // é™æ€èµ„æºæ–‡ä»¶ç›®å½•</span><br><span class="line">            â”œâ”€â”€ css         // css æ ·å¼ç›®å½•</span><br><span class="line">            â””â”€â”€ js          // JavaScript è„šæœ¬ç›®å½•</span><br><span class="line">            </span><br></pre></td></tr></table></figure><hr /><h3 id="ä»£ç ä¸­configè§£é‡Š"><a class="markdownIt-Anchor" href="#ä»£ç ä¸­configè§£é‡Š"></a> ä»£ç ä¸­configè§£é‡Š</h3><p>â€‹ä»…éœ€è¦è€ƒè™‘è¿™ä¸€éƒ¨åˆ†ä»£ç å³å¯</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// é…ç½®é€‰é¡¹</span></span><br><span class="line">  <span class="keyword">const</span> config = &#123;</span><br><span class="line">    <span class="comment">// éœ€è¦æ›¿æ¢çš„è·¯å¾„è§„åˆ™</span></span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="comment">// è¯¥è¡Œä»£ç è¡¨ç¤ºè¦åŒ¹é…çš„å›¾ç‰‡srcè·¯å¾„â†---------------çœ‹è¿™é‡Œ</span></span><br><span class="line">        <span class="attr">pattern</span>: <span class="string">&#x27;^&lt;%- page.title %&gt;/&#x27;</span>,           <span class="comment">// åŒ¹é…ä»¥ images/ å¼€å¤´çš„è·¯å¾„</span></span><br><span class="line">        <span class="comment">// è¡¨ç¤ºè¦å°†ä¸Šé¢åŒ¹é…åˆ°çš„è·¯å¾„ä¿®æ”¹  â†---------------çœ‹è¿™é‡Œ</span></span><br><span class="line">        <span class="attr">replace</span>: <span class="string">&#x27;&#x27;</span>       <span class="comment">//æ›¿æ¢ä¸º &#x27;&#x27;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">pattern</span>: <span class="string">&#x27;^&lt;%- encodeURIComponent(page.title) %&gt;/&#x27;</span>,   <span class="comment">//è§£å†³ä¸­æ–‡é—®é¢˜</span></span><br><span class="line">        <span class="attr">replace</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="comment">// æ’é™¤å¤–éƒ¨é“¾æ¥ï¼ŒæŒ‡æ˜¯å¦æ’é™¤markdownåŠ å…¥çš„ç½‘ç»œå›¾ç‰‡â†---------------çœ‹è¿™é‡Œ</span></span><br><span class="line">    <span class="attr">excludeExternal</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="comment">// æ˜¯å¦æ˜¾ç¤ºè°ƒè¯•ä¿¡æ¯ï¼ŒæŒ‡æ˜¯å¦åœ¨æ§åˆ¶å°æ‰“å°æŠ¥å‘Š      â†---------------çœ‹è¿™é‡Œ</span></span><br><span class="line">    <span class="attr">debug</span>: <span class="literal">true</span></span><br><span class="line">  &#125;;</span><br></pre></td></tr></table></figure><p>è¿™æ˜¯ä¸Šé¢debugå¼€å¯çš„è¾“å‡ºï¼Œå…³é—­åˆ™ä¸ä¼šè¾“å‡ºç»“æœ</p><p><img src="%E8%A7%A3%E5%86%B3Hexo%E6%8F%92%E5%85%A5%E5%9B%BE%E7%89%87%E6%9C%AC%E5%9C%B0%E9%A2%84%E8%A7%88%E4%B8%8D%E6%98%BE%E7%A4%BA/image-20260213205157781.png" alt="image-20260213205157781" /></p><hr /><h3 id="ä½¿ç”¨æ–‡ç« èµ„æºæ–‡ä»¶å¤¹è§£å†³"><a class="markdownIt-Anchor" href="#ä½¿ç”¨æ–‡ç« èµ„æºæ–‡ä»¶å¤¹è§£å†³"></a> ä½¿ç”¨æ–‡ç« èµ„æºæ–‡ä»¶å¤¹è§£å†³</h3><p><a href="https://hexo.io/zh-cn/docs/asset-folders">ç‚¹æˆ‘æŸ¥çœ‹å®˜æ–¹è§£é‡Š</a></p><h4 id="åŸç†-2"><a class="markdownIt-Anchor" href="#åŸç†-2"></a> åŸç†</h4><p>â€‹åœ¨è®¾ç½®åšå®¢æ ¹ç›®å½•ä¸‹<code>_config.yml</code>ä¸­<code>post_asset_folder</code>å­—æ®µè®¾ç½®ä¸º<code>true</code>ä¹‹åï¼ŒHexoå°†ä¼šåœ¨ä½ æ¯ä¸€æ¬¡é€šè¿‡ <code>hexo new [layout] &lt;title&gt;</code> å‘½ä»¤åˆ›å»ºæ–°æ–‡ç« æ—¶è‡ªåŠ¨åˆ›å»ºä¸€ä¸ªèµ„æºæ–‡ä»¶å¤¹ã€‚ è¿™ä¸ªèµ„æºæ–‡ä»¶å¤¹å°†ä¼šæœ‰ä¸è¿™ä¸ªæ–‡ç« æ–‡ä»¶ä¸€æ ·çš„åå­—ã€‚ å°†æ‰€æœ‰ä¸ä½ çš„æ–‡ç« æœ‰å…³çš„èµ„æºæ”¾åœ¨è¿™ä¸ªå…³è”æ–‡ä»¶å¤¹ä¸­ä¹‹åï¼Œä½ å¯ä»¥é€šè¿‡ç›¸å¯¹è·¯å¾„æ¥å¼•ç”¨å®ƒä»¬ã€‚å¹¶ä¸”åœ¨æ‰§è¡Œ<code>hexo g</code>å‘½ä»¤åèµ„æºæ–‡ä»¶å¤¹ä¸­çš„å†…å®¹å°†ä¼šå¤åˆ¶åˆ°ä¸æ–‡ç« ç›¸åŒçš„ç›®å½•ä¸‹ï¼Œæ¯”å¦‚ï¼Œè¿™æ˜¯hexoç”Ÿæˆå‰å­˜æ”¾æ–‡ç« çš„ç›®å½•</p><p><img src="%E8%A7%A3%E5%86%B3Hexo%E6%8F%92%E5%85%A5%E5%9B%BE%E7%89%87%E6%9C%AC%E5%9C%B0%E9%A2%84%E8%A7%88%E4%B8%8D%E6%98%BE%E7%A4%BA/image-20260213212015668.png" alt="image-20260213212015668" /></p><p>åœ¨æ‰§è¡Œhexo gåè¿™é‡Œçš„æ–‡ç« å°†ä¼šç”Ÿæˆåˆ°publicæ–‡ä»¶å¤¹ä¸­ï¼Œä¾‹å¦‚</p><p><img src="%E8%A7%A3%E5%86%B3Hexo%E6%8F%92%E5%85%A5%E5%9B%BE%E7%89%87%E6%9C%AC%E5%9C%B0%E9%A2%84%E8%A7%88%E4%B8%8D%E6%98%BE%E7%A4%BA/image-20260213212213760.png" alt="image-20260213212213760" /></p><p><strong>å¯ä»¥å¯¹æ¯”ä¸‹å›¾ä¸Šçš„è·¯å¾„</strong></p><p><strong>æˆ‘ä»¬å¯ä»¥æŠŠmarkdownä¸­å›¾ç‰‡çš„ç›¸å¯¹è·¯å¾„ä¿®æ”¹ä¸€ä¸‹ï¼Œä½¿å›¾ç‰‡æŒ‡å‘æ­£ç¡®çš„è·¯å¾„</strong></p><p>1ã€å°†åšå®¢æ ¹ç›®å½•ä¸‹<code>_config.yml</code>ä¸­<code>post_asset_folder</code>å­—æ®µè®¾ç½®ä¸º<code>true</code></p><p>2ã€åˆ›å»ºæ–‡ä»¶ï¼Œä½äº<code>themes/ä½ å½“å‰ä½¿ç”¨çš„ä¸»é¢˜/layout/_script/image-fixer.ejs</code>ï¼Œå¹¶å°†ä¸Šè¿°ä»£ç æ‹·è´å…¶ä¸­</p><p>Psï¼šå¦‚æœåœ¨<code>themes</code>ä¸‹æ— ä¸»é¢˜æ–‡ä»¶å¤¹ï¼Œå¯å‰å¾€<code>node_modules/hexo-theme-ä½ å½“å‰ä½¿ç”¨çš„ä¸»é¢˜å/layout/_script/image-fixer.ejs</code>åˆ›å»º</p><p>3ã€åœ¨<code>å½“å‰ä½¿ç”¨çš„ä¸»é¢˜/layout</code>ä¸‹<code>post.ejs</code>ä¸­å¯¼å…¥è¯¥æ–‡ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%- partial(&#x27;_script/image-fixer&#x27;) %&gt;</span><br></pre></td></tr></table></figure><p>4ã€æ‰¾åˆ°Typoraä¸­çš„è®¾ç½®â€“&gt;åå¥½è®¾ç½®â€“&gt;å›¾åƒï¼ŒæŒ‰ç…§ä¸‹å›¾ä¿®æ”¹ï¼Œå…¶ä¸­3å¼ºçƒˆå»ºè®®å‹¾é€‰ï¼Œè¿™æ ·ä¼šèŠ‚çœä½ å¾ˆå¤šæ—¶é—´</p><p><img src="%E8%A7%A3%E5%86%B3Hexo%E6%8F%92%E5%85%A5%E5%9B%BE%E7%89%87%E6%9C%AC%E5%9C%B0%E9%A2%84%E8%A7%88%E4%B8%8D%E6%98%BE%E7%A4%BA/image-20260213212841806.png" alt="image-20260213212841806" /></p><h4 id="ä¼˜ç¼ºç‚¹"><a class="markdownIt-Anchor" href="#ä¼˜ç¼ºç‚¹"></a> <strong>ä¼˜ç¼ºç‚¹</strong></h4><p>1ã€<strong>å¯ä»¥ä½¿æ–‡ç« ä¸å…¶ä½¿ç”¨èµ„æºåˆ†ç±»æ›´æ˜ç¡®</strong></p><p>2ã€<strong>è‹¥å¤šç¯‡æ–‡ç« å¼•ç”¨åŒä¸€ä¸ªå›¾ç‰‡ï¼Œåˆ™ä¼šå æ®å¤šä»½å­˜å‚¨ç©ºé—´</strong></p><hr /><h3 id="ä½¿ç”¨å…¨å±€èµ„æºæ–‡ä»¶å¤¹è§£å†³"><a class="markdownIt-Anchor" href="#ä½¿ç”¨å…¨å±€èµ„æºæ–‡ä»¶å¤¹è§£å†³"></a> ä½¿ç”¨å…¨å±€èµ„æºæ–‡ä»¶å¤¹è§£å†³</h3><p><a href="https://hexo.io/zh-cn/docs/asset-folders">ç‚¹æˆ‘æŸ¥çœ‹å®˜æ–¹è§£é‡Š</a></p><h4 id="åŸç†-3"><a class="markdownIt-Anchor" href="#åŸç†-3"></a> åŸç†</h4><p><code>Hexo</code>æ¯æ¬¡<code>generate</code>æ—¶éƒ½ä¼šå°†åšå®¢æ ¹ç›®å½•çš„<code>source</code>å’Œä¸»é¢˜ç›®å½•ä¸‹çš„<code>source</code>ä¸­çš„å†…å®¹éƒ½æ·»åŠ ç”Ÿæˆï¼Œæ¯”å¦‚</p><p><img src="%E8%A7%A3%E5%86%B3Hexo%E6%8F%92%E5%85%A5%E5%9B%BE%E7%89%87%E6%9C%AC%E5%9C%B0%E9%A2%84%E8%A7%88%E4%B8%8D%E6%98%BE%E7%A4%BA/image-20260213214052307.png" alt="image-20260213214052307" /></p><p>åœ¨æ‰§è¡Œ<code>hexo g</code>å‘½ä»¤ä¹‹åè¿™ä¸¤ä¸ªæ–‡ä»¶å¤¹ä¸‹çš„å†…å®¹éƒ½ä¼šç”Ÿæˆåˆ°<code>public</code>æ–‡ä»¶å¤¹ä¸­ï¼Œæ¯”å¦‚ï¼š</p><p><img src="%E8%A7%A3%E5%86%B3Hexo%E6%8F%92%E5%85%A5%E5%9B%BE%E7%89%87%E6%9C%AC%E5%9C%B0%E9%A2%84%E8%A7%88%E4%B8%8D%E6%98%BE%E7%A4%BA/image-20260213215009207.png" alt="image-20260213215009207" /></p><p>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä¿®æ”¹ä»£ç ä¸­çš„<code>config</code>å†…çš„å€¼æ¥è¾¾åˆ°æˆ‘ä»¬çš„ç›®çš„</p><hr /><p>! ! ! æ³¨æ„ï¼šå¦‚æœimagesæ–‡ä»¶å¤¹ä¸‹æ²¡æœ‰å†…å®¹ï¼Œåˆ™åœ¨publicä¸­ä¸ä¼šç”Ÿæˆè¯¥æ–‡ä»¶å¤¹</p><hr /><h4 id="æ–¹æ³•ä¸€"><a class="markdownIt-Anchor" href="#æ–¹æ³•ä¸€"></a> æ–¹æ³•ä¸€</h4><hr /><p>æˆ‘ä»¬ç›´æ¥å°†æ‰€æœ‰çš„å›¾ç‰‡å‡å­˜å‚¨åˆ°ï¼Œ<code>åšå®¢æ ¹ç›®å½•/source/images</code>ï¼Œæ–‡ä»¶å¤¹ä¸­ï¼Œé‚£ä¹ˆåœ¨markdownä¸­ä½¿ç”¨ç›¸å¯¹è·¯å¾„è®¿é—®å›¾ç‰‡åº”è¯¥ç±»ä¼¼å†™ä¸º<code>../images/photo.jpg</code>ï¼Œç„¶åå°±å¯ä»¥è§£å†³äº†ï¼Œåœ¨<code>hexo g</code>ç”Ÿæˆä¹‹åä¼šè‡ªåŠ¨æ‰¾åˆ°æ­£ç¡®è·¯å¾„</p><p>å¦‚æœè¯¥æ–¹æ³•æ²¡æœ‰è§£å†³é—®é¢˜ï¼Œè¯·çœ‹åŠæ³•äºŒ</p><hr /><h4 id="æ–¹æ³•äºŒ"><a class="markdownIt-Anchor" href="#æ–¹æ³•äºŒ"></a> æ–¹æ³•äºŒ</h4><p>åŒæ ·ï¼Œæˆ‘ä»¬å°†æ‰€æœ‰çš„å›¾ç‰‡å‡å­˜å‚¨åˆ°imagesæ–‡ä»¶å¤¹ä¸­ï¼Œé‚£ä¹ˆåœ¨markdownä¸­ä½¿ç”¨ç›¸å¯¹è·¯å¾„è®¿é—®å›¾ç‰‡åº”è¯¥ç±»ä¼¼å†™ä¸º<code>../images/photo.jpg</code></p><p>ä½†hexo gä¹‹åçš„æ–‡ç« å°†ä¼šå˜ä¸ºhtmlå­˜æ”¾åœ¨publicçš„å­æ–‡ä»¶å¤¹ä¸­ï¼Œæ¯”å¦‚ï¼š</p><p><img src="%E8%A7%A3%E5%86%B3Hexo%E6%8F%92%E5%85%A5%E5%9B%BE%E7%89%87%E6%9C%AC%E5%9C%B0%E9%A2%84%E8%A7%88%E4%B8%8D%E6%98%BE%E7%A4%BA/image-20260213214616353.png" alt="image-20260213214616353" /></p><p>æ‰€ä»¥æˆ‘ä»¬è¦æŠŠå›¾ç‰‡çš„è®¿é—®è·¯å¾„ä¿®æ”¹ä¸ºâ€¦/â€¦/â€¦/â€¦/images/photo.jpgï¼Œè¯¥è·¯å¾„çš„æ„æ€æ˜¯ï¼ŒåŸºäºä¸Šå›¾ä¸­çš„index.htmlæ‰€åœ¨çš„æ–‡ä»¶å¤¹ï¼Œé€æ¸å‘å¤–æŸ¥æ‰¾4å±‚åˆ°è¾¾publicæ–‡ä»¶å¤¹ï¼Œç„¶åå†æŸ¥æ‰¾publicæ–‡ä»¶å¤¹ä¸‹çš„imagesæ–‡ä»¶å¤¹ä¸­çš„photo.jpg</p><p><strong>ä»£ç ä¿®æ”¹</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">rules</span>: [</span><br><span class="line">     &#123;</span><br><span class="line">       <span class="attr">pattern</span>: <span class="string">&#x27;^images/&#x27;</span>,           <span class="comment">// åŒ¹é…ä»¥ images/ å¼€å¤´çš„è·¯å¾„</span></span><br><span class="line">       <span class="attr">replace</span>: <span class="string">&#x27;../../../../images/&#x27;</span>       <span class="comment">// æ›¿æ¢ä¸º ../../../../images/</span></span><br><span class="line">     &#125;</span><br><span class="line">    &lt;!-- è¿™ä¸€æ®µä»£ç å¯ä»¥ç›´æ¥åˆ é™¤äº†</span><br><span class="line">     &#123;</span><br><span class="line">       <span class="attr">pattern</span>: <span class="string">&#x27;^&lt;%- encodeURIComponent(page.title) %&gt;/&#x27;</span>,   <span class="comment">//è§£å†³ä¸­æ–‡é—®é¢˜</span></span><br><span class="line">       <span class="attr">replace</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">     &#125; --&gt;     </span><br></pre></td></tr></table></figure><h4 id="ä¼˜ç¼ºç‚¹-2"><a class="markdownIt-Anchor" href="#ä¼˜ç¼ºç‚¹-2"></a> ä¼˜ç¼ºç‚¹</h4><p>1ã€<strong>æ–‡ç« ä¸å…¶ä½¿ç”¨èµ„æºåˆ†ç±»ä¸æ˜ç¡®</strong></p><p>2ã€<strong>è‹¥å¤šç¯‡æ–‡ç« å¼•ç”¨åŒä¸€ä¸ªå›¾ç‰‡ï¼Œåˆ™è¯¥å›¾ç‰‡ä»…ä¼šä¿å­˜ä¸€ä»½</strong></p><hr /><hr /><h3 id="ç»¼åˆæ–¹æ³•"><a class="markdownIt-Anchor" href="#ç»¼åˆæ–¹æ³•"></a> ç»¼åˆæ–¹æ³•</h3><h4 id="æ–¹æ³•ä¸€-2"><a class="markdownIt-Anchor" href="#æ–¹æ³•ä¸€-2"></a> æ–¹æ³•ä¸€</h4><p>å¦‚æœä½ å³æƒ³è¦èµ„æºåˆ†ç±»æ˜ç¡®ï¼Œè¿˜ä¸æƒ³å­˜å‚¨å¤šä»½å›¾ç‰‡ï¼Œé‚£ä¹ˆä½ å¯ä»¥åœ¨ä½¿ç”¨å…¨å±€èµ„æºæ–‡ä»¶å¤¹è§£å†³ä¸­çš„æ–¹æ³•ä¸€çš„åŸºç¡€ä¸Šï¼Œåœ¨imagesæ–‡ä»¶å¤¹å†…éƒ¨åˆ›å»ºä»¥å„æ–‡ç« æ ‡é¢˜çš„æ–‡ä»¶å¤¹æ¯”å¦‚æœ‰ç¯‡æ–‡ç« åå­—ä¸ºdemoï¼Œæ¯”å¦‚åˆ›å»ºä»¥ä¸‹æ–‡ä»¶å¤¹ï¼Œç„¶åå°†å…¬å…±çš„å›¾ç‰‡å­˜æ”¾åœ¨imagesä¸­ï¼Œå„æ–‡ç« çš„å›¾ç‰‡å­˜æ”¾åœ¨imagesä¸‹çš„å­æ–‡ä»¶å¤¹ä¸­å³å¯</p><p><img src="%E8%A7%A3%E5%86%B3Hexo%E6%8F%92%E5%85%A5%E5%9B%BE%E7%89%87%E6%9C%AC%E5%9C%B0%E9%A2%84%E8%A7%88%E4%B8%8D%E6%98%BE%E7%A4%BA/image-20260214004426816.png" alt="image-20260214004426816" /></p><p>å¦‚æœè¯¥æ–¹æ³•ä¸è¡Œï¼Œåˆ™åœ¨è¯¥æ–¹æ³•åŸºç¡€ä¸ŠåŠ å…¥æ–¹æ³•äºŒå³å¯ï¼Œä¹Ÿå°±æ˜¯åœ¨ä¸Šè¿°çš„ç»¼åˆæ–¹æ³•çš„åŸºç¡€ä¸Šï¼Œç»§ç»­æ·»åŠ ä½¿ç”¨å…¨å±€èµ„æºæ–‡ä»¶å¤¹ä¸­çš„æ–¹æ³•äºŒï¼Œå› ä¸ºå¦‚æœä½¿ç”¨ç»¼åˆæ–¹æ³•ï¼Œé‚£ä¹ˆåœ¨æ–‡ç« ä¸­æœ¬åœ°å›¾ç‰‡çš„è·¯å¾„æœ‰ä¸¤ç§<code>../images/avatar.gif</code>å’Œ<code>../images/demo/bf8c5664.png</code>æ‰€ä»¥ç»è¿‡å…¨å±€èµ„æºæ–‡ä»¶å¤¹è§£å†³ä¸­çš„æ–¹æ³•äºŒçš„jsè½¬æ¢åä¾ç„¶èƒ½å¤Ÿå®šä½åˆ°æ­£ç¡®çš„è·¯å¾„</p><p>é‡‡ç”¨è¯¥æ–¹æ³•è¿˜éœ€è¦é…ç½®Typora</p><p><img src="%E8%A7%A3%E5%86%B3Hexo%E6%8F%92%E5%85%A5%E5%9B%BE%E7%89%87%E6%9C%AC%E5%9C%B0%E9%A2%84%E8%A7%88%E4%B8%8D%E6%98%BE%E7%A4%BA/image-20260214011333698.png" alt="image-20260214011333698" /></p><hr /><h3 id="ç»¼ä¸Šæ‰€è¿°"><a class="markdownIt-Anchor" href="#ç»¼ä¸Šæ‰€è¿°"></a> ç»¼ä¸Šæ‰€è¿°</h3><p>ä½¿ç”¨å…¨å±€èµ„æºæ–‡ä»¶å¤¹å’Œæ–‡ç« èµ„æºæ–‡ä»¶å¤¹ï¼Œå„æœ‰ä¼˜åŠ£ï¼Œå¯ä»¥ä¾é è‡ªå·±çš„éœ€æ±‚è¿›è¡Œå–èˆã€‚</p><hr /><h3 id="é‡åˆ°çš„é—®é¢˜"><a class="markdownIt-Anchor" href="#é‡åˆ°çš„é—®é¢˜"></a> é‡åˆ°çš„é—®é¢˜</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1ã€Failed to connect to github.com port 443 after 21085 ms: Could not connect to server</span><br></pre></td></tr></table></figure><p>â€‹<strong>æˆ‘é‡‡ç”¨çš„æ˜¯sshè¿æ¥github</strong></p><p>â€‹1ã€æ‰“å¼€githubçœ‹èƒ½ä¸èƒ½è¿æ¥ä¸Šï¼Œå¯ä»¥è¿æ¥ä¸Šç»§ç»­ä¸‹ä¸€æ­¥</p><p>â€‹2ã€æµ‹è¯•ssh -T git@æ˜¯å¦èƒ½é€šï¼Œèƒ½é€šç»§ç»­ä¸‹ä¸€æ­¥</p><p>â€‹3ã€ä¸Šä¼ çš„å›¾ç‰‡å¤ªå¤šäº†ï¼Œæ€»æ•°æ®é‡å¤§ï¼Œåˆ é™¤ç‚¹å›¾ç‰‡</p><p>â€‹4ã€å¦‚æœè¿˜ä¸è¡Œï¼Œé‚£å°±çš„å¤š<code>hexo d</code>å‡ æ¬¡ï¼Œä¼°è®¡æ˜¯ç½‘ç»œé—®é¢˜</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2ã€ssh: connect to host github.com port 22[443]: Connection refused</span><br></pre></td></tr></table></figure><p>â€‹æŠŠ<code>steamcommunity</code>å…³æ‰</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">3ã€å¦‚æœä¿®æ”¹è¿‡markdownå†…éƒ¨æ ‡é¢˜ï¼Œæ¯”å¦‚ï¼šè¿™é‡Œçš„title</span><br></pre></td></tr></table></figure><p><img src="%E8%A7%A3%E5%86%B3Hexo%E6%8F%92%E5%85%A5%E5%9B%BE%E7%89%87%E6%9C%AC%E5%9C%B0%E9%A2%84%E8%A7%88%E4%B8%8D%E6%98%BE%E7%A4%BA/image-20260213235730583.png" alt="image-20260213235730583" /></p><p>â€‹åˆ™éœ€è¦ä¿è¯ä¸‹å›¾æ‰€æ¡†é€‰çš„æ–‡å­—éœ€è¦ä¿æŒä¸€è‡´ï¼Œæ³¨æ„ï¼šå›¾ç‰‡æœ‰å¯èƒ½ä¸æ­¢ä¸€å¼ </p><p><img src="%E8%A7%A3%E5%86%B3Hexo%E6%8F%92%E5%85%A5%E5%9B%BE%E7%89%87%E6%9C%AC%E5%9C%B0%E9%A2%84%E8%A7%88%E4%B8%8D%E6%98%BE%E7%A4%BA/image-20260214000017704.jpg" alt="image-20260214000017704" /></p>]]>
    </content>
    <id>https://imouyo.github.io/2026/02/13/%E8%A7%A3%E5%86%B3Hexo%E6%8F%92%E5%85%A5%E5%9B%BE%E7%89%87%E6%9C%AC%E5%9C%B0%E9%A2%84%E8%A7%88%E4%B8%8D%E6%98%BE%E7%A4%BA/</id>
    <link href="https://imouyo.github.io/2026/02/13/%E8%A7%A3%E5%86%B3Hexo%E6%8F%92%E5%85%A5%E5%9B%BE%E7%89%87%E6%9C%AC%E5%9C%B0%E9%A2%84%E8%A7%88%E4%B8%8D%E6%98%BE%E7%A4%BA/"/>
    <published>2026-02-13T11:33:32.000Z</published>
    <summary>
      <![CDATA[<p>éœ€è¦çš„å·¥å…·Typoraï¼ŒVScode(è®°äº‹æœ¬ä¹Ÿå¯ä»¥)</p>
<p>é…ç½®ç¯å¢ƒï¼šhexo: 8.1.1ï¼Œhexo-cli: 4.3.2ï¼Œnode: 20.19.5ï¼Œos: win32 10.0.19045 undefined</p>
<hr />
<h3 id="å‰è¨€"><a]]>
    </summary>
    <title>è§£å†³Hexoæ’å…¥å›¾ç‰‡æœ¬åœ°é¢„è§ˆä¸æ˜¾ç¤º</title>
    <updated>2026-02-13T17:59:14.793Z</updated>
  </entry>
  <entry>
    <author>
      <name>John Doe</name>
    </author>
    <content>
      <![CDATA[<h2 id="aop"><a class="markdownIt-Anchor" href="#aop"></a> AOP</h2><p><strong>1ã€æ¡ˆä¾‹ï¼šç»Ÿè®¡éƒ¨é—¨ç®¡ç†å„ä¸ªä¸šåŠ¡å±‚æ–¹æ³•æ‰§è¡Œè€—æ—¶ã€‚</strong></p><p>1). å¯¼å…¥ä¾èµ–ï¼šåœ¨ pom.xml æ–‡ä»¶ä¸­å¯¼å…¥ AOP çš„ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-aop<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>2). ç¼–å†™AOPç¨‹åºï¼šé’ˆå¯¹äºç‰¹å®šæ–¹æ³•æ ¹æ®ä¸šåŠ¡éœ€è¦è¿›è¡Œç¼–ç¨‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span><span class="comment">//è¿›è¡ŒIOCç®¡ç†</span></span><br><span class="line"><span class="meta">@Aspect</span> <span class="comment">//å½“å‰ç±»ä¸ºåˆ‡é¢ç±»</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RecordTimeAspect</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Around(&quot;execution(* com.itheima.service.impl.DeptServiceImpl.*(..))&quot;)</span><span class="comment">//è¡¨æ˜åº”ç”¨äºé‚£äº›æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">recordTime</span><span class="params">(ProceedingJoinPoint pjp)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        <span class="comment">//è®°å½•æ–¹æ³•æ‰§è¡Œå¼€å§‹æ—¶é—´</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">begin</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ‰§è¡ŒåŸå§‹æ–¹æ³•</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">result</span> <span class="operator">=</span> pjp.proceed();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è®°å½•æ–¹æ³•æ‰§è¡Œç»“æŸæ—¶é—´</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">end</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è®¡ç®—æ–¹æ³•æ‰§è¡Œè€—æ—¶getSignatureæ–¹æ³•å¯ä»¥è·å–å½“å‰è¿è¡Œçš„æ–¹æ³•å</span></span><br><span class="line">        log.info(<span class="string">&quot;æ–¹æ³•&#123;&#125;æ‰§è¡Œè€—æ—¶: &#123;&#125;æ¯«ç§’&quot;</span>,pjp.getSignature,end-begin);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="é€šçŸ¥"><a class="markdownIt-Anchor" href="#é€šçŸ¥"></a> é€šçŸ¥</h3><table><thead><tr><th><strong>Spring AOP é€šçŸ¥ç±»å‹</strong></th><th></th></tr></thead><tbody><tr><td>@Around</td><td>ç¯ç»•é€šçŸ¥ï¼Œæ­¤æ³¨è§£æ ‡æ³¨çš„é€šçŸ¥æ–¹æ³•åœ¨ç›®æ ‡æ–¹æ³•å‰ã€åéƒ½è¢«æ‰§è¡Œ</td></tr><tr><td>@Before</td><td>å‰ç½®é€šçŸ¥ï¼Œæ­¤æ³¨è§£æ ‡æ³¨çš„é€šçŸ¥æ–¹æ³•åœ¨ç›®æ ‡æ–¹æ³•å‰è¢«æ‰§è¡Œ</td></tr><tr><td>@After</td><td>åç½®é€šçŸ¥ï¼Œæ­¤æ³¨è§£æ ‡æ³¨çš„é€šçŸ¥æ–¹æ³•åœ¨ç›®æ ‡æ–¹æ³•åè¢«æ‰§è¡Œï¼Œæ— è®ºæ˜¯å¦æœ‰å¼‚å¸¸éƒ½ä¼šæ‰§è¡Œ</td></tr><tr><td>@AfterReturning</td><td>è¿”å›åé€šçŸ¥ï¼Œæ­¤æ³¨è§£æ ‡æ³¨çš„é€šçŸ¥æ–¹æ³•åœ¨ç›®æ ‡æ–¹æ³•åè¢«æ‰§è¡Œï¼Œæœ‰å¼‚å¸¸ä¸ä¼šæ‰§è¡Œ</td></tr><tr><td>@AfterThrowing</td><td>å¼‚å¸¸åé€šçŸ¥ï¼Œæ­¤æ³¨è§£æ ‡æ³¨çš„é€šçŸ¥æ–¹æ³•å‘ç”Ÿå¼‚å¸¸åæ‰§è¡Œ</td></tr></tbody></table><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAspect1</span> &#123;</span><br><span class="line">    <span class="comment">//å‰ç½®é€šçŸ¥</span></span><br><span class="line">    <span class="meta">@Before(&quot;execution(* com.itheima.service.*.*(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">(JoinPoint joinPoint)</span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;before ...&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç¯ç»•é€šçŸ¥</span></span><br><span class="line">    <span class="meta">@Around(&quot;execution(* com.itheima.service.*.*(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">around</span><span class="params">(ProceedingJoinPoint proceedingJoinPoint)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        log.info(<span class="string">&quot;around before ...&quot;</span>);<span class="comment">//è¿™éƒ¨åˆ†æ˜¯åŸå§‹æ–¹æ³•ä¹‹å‰</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//è°ƒç”¨ç›®æ ‡å¯¹è±¡çš„åŸå§‹æ–¹æ³•æ‰§è¡Œ</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">result</span> <span class="operator">=</span> proceedingJoinPoint.proceed();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//åŸå§‹æ–¹æ³•å¦‚æœæ‰§è¡Œæ—¶æœ‰å¼‚å¸¸ï¼Œç¯ç»•é€šçŸ¥ä¸­çš„åç½®ä»£ç ä¸ä¼šåœ¨æ‰§è¡Œäº†</span></span><br><span class="line">        </span><br><span class="line">        log.info(<span class="string">&quot;around after ...&quot;</span>);<span class="comment">//è¿™éƒ¨åˆ†æ˜¯åŸå§‹æ–¹æ³•ä¹‹å</span></span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åç½®é€šçŸ¥</span></span><br><span class="line">    <span class="meta">@After(&quot;execution(* com.itheima.service.*.*(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">after</span><span class="params">(JoinPoint joinPoint)</span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;after ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è¿”å›åé€šçŸ¥ï¼ˆç¨‹åºåœ¨æ­£å¸¸æ‰§è¡Œçš„æƒ…å†µä¸‹ï¼Œä¼šæ‰§è¡Œçš„åç½®é€šçŸ¥ï¼‰</span></span><br><span class="line">    <span class="meta">@AfterReturning(&quot;execution(* com.itheima.service.*.*(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterReturning</span><span class="params">(JoinPoint joinPoint)</span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;afterReturning ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å¼‚å¸¸é€šçŸ¥ï¼ˆç¨‹åºåœ¨å‡ºç°å¼‚å¸¸çš„æƒ…å†µä¸‹ï¼Œæ‰§è¡Œçš„åç½®é€šçŸ¥ï¼‰</span></span><br><span class="line">    <span class="meta">@AfterThrowing(&quot;execution(* com.itheima.service.*.*(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterThrowing</span><span class="params">(JoinPoint joinPoint)</span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;afterThrowing ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ³¨è§£pointcut"><a class="markdownIt-Anchor" href="#æ³¨è§£pointcut"></a> æ³¨è§£<code>@PointCut</code></h4><p>è¯¥æ³¨è§£çš„ä½œç”¨æ˜¯å°†å…¬å…±çš„åˆ‡å…¥ç‚¹è¡¨è¾¾å¼æŠ½å–å‡ºæ¥ï¼Œéœ€è¦ç”¨åˆ°æ—¶å¼•ç”¨è¯¥åˆ‡å…¥ç‚¹è¡¨è¾¾å¼å³å¯ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAspect1</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ‡å…¥ç‚¹æ–¹æ³•ï¼ˆå…¬å…±çš„åˆ‡å…¥ç‚¹è¡¨è¾¾å¼ï¼‰</span></span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(* com.itheima.service.*.*(..))&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">pt</span><span class="params">()</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å‰ç½®é€šçŸ¥ï¼ˆå¼•ç”¨åˆ‡å…¥ç‚¹ï¼‰</span></span><br><span class="line">    <span class="meta">@Before(&quot;pt()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">(JoinPoint joinPoint)</span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;before ...&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç¯ç»•é€šçŸ¥</span></span><br><span class="line">    <span class="meta">@Around(&quot;pt()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">around</span><span class="params">(ProceedingJoinPoint proceedingJoinPoint)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">........</span><br><span class="line">        </span><br><span class="line">    .........</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="åœ¨ä½¿ç”¨é€šçŸ¥æ—¶çš„æ³¨æ„äº‹é¡¹"><a class="markdownIt-Anchor" href="#åœ¨ä½¿ç”¨é€šçŸ¥æ—¶çš„æ³¨æ„äº‹é¡¹"></a> åœ¨ä½¿ç”¨é€šçŸ¥æ—¶çš„æ³¨æ„äº‹é¡¹ï¼š</h4><ul><li>@Aroundç¯ç»•é€šçŸ¥éœ€è¦è‡ªå·±è°ƒç”¨ ProceedingJoinPoint.proceed() æ¥è®©åŸå§‹æ–¹æ³•æ‰§è¡Œï¼Œå…¶ä»–é€šçŸ¥ä¸éœ€è¦è€ƒè™‘ç›®æ ‡æ–¹æ³•æ‰§è¡Œ</li><li>@Aroundç¯ç»•é€šçŸ¥æ–¹æ³•çš„è¿”å›å€¼ï¼Œå¿…é¡»æŒ‡å®šä¸ºObjectï¼Œæ¥æ¥æ”¶åŸå§‹æ–¹æ³•çš„è¿”å›å€¼ï¼Œå¦åˆ™åŸå§‹æ–¹æ³•æ‰§è¡Œå®Œæ¯•ï¼Œæ˜¯è·å–ä¸åˆ°è¿”å›å€¼çš„ã€‚</li></ul><h4 id="é€šçŸ¥é¡ºåº"><a class="markdownIt-Anchor" href="#é€šçŸ¥é¡ºåº"></a> é€šçŸ¥é¡ºåº</h4><p>å½“åœ¨é¡¹ç›®å¼€å‘å½“ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†å¤šä¸ªåˆ‡é¢ç±»ï¼Œè€Œå¤šä¸ªåˆ‡é¢ç±»ä¸­å¤šä¸ªåˆ‡å…¥ç‚¹éƒ½åŒ¹é…åˆ°äº†åŒä¸€ä¸ªç›®æ ‡æ–¹æ³•ã€‚æ­¤æ—¶å½“ç›®æ ‡æ–¹æ³•åœ¨è¿è¡Œçš„æ—¶å€™ï¼Œè¿™å¤šä¸ªåˆ‡é¢ç±»å½“ä¸­çš„è¿™äº›é€šçŸ¥æ–¹æ³•éƒ½ä¼šè¿è¡Œã€‚</p><p>ä¾‹å¦‚ï¼š</p><p><img src="AOP/image-20260201193519951.png" alt="image-20260201193519951" /></p><ul><li>åœ¨ä¸åŒåˆ‡é¢ç±»ä¸­ï¼Œé»˜è®¤æŒ‰ç…§åˆ‡é¢ç±»çš„ç±»åå­—æ¯æ’åºï¼š<ul><li>ç›®æ ‡æ–¹æ³•å‰çš„é€šçŸ¥æ–¹æ³•ï¼šå­—æ¯æ’åé å‰çš„å…ˆæ‰§è¡Œ</li><li>ç›®æ ‡æ–¹æ³•åçš„é€šçŸ¥æ–¹æ³•ï¼šå­—æ¯æ’åé å‰çš„åæ‰§è¡Œ</li></ul></li></ul><p>å¦‚æœæˆ‘ä»¬æƒ³æ§åˆ¶é€šçŸ¥çš„æ‰§è¡Œé¡ºåºæœ‰ä¸¤ç§æ–¹å¼ï¼š</p><ol><li>ä¿®æ”¹åˆ‡é¢ç±»çš„ç±»åï¼ˆè¿™ç§æ–¹å¼éå¸¸ç¹çã€è€Œä¸”ä¸ä¾¿ç®¡ç†ï¼‰</li><li>ä½¿ç”¨Springæä¾›çš„<code>@Order</code>æ³¨è§£</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="meta">@Order(2)</span>  <span class="comment">//åˆ‡é¢ç±»çš„æ‰§è¡Œé¡ºåºï¼ˆå‰ç½®é€šçŸ¥ï¼šæ•°å­—è¶Šå°å…ˆæ‰§è¡Œ; åç½®é€šçŸ¥ï¼šæ•°å­—è¶Šå°è¶Šåæ‰§è¡Œï¼‰</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAspect2</span> &#123;...&#125;</span><br></pre></td></tr></table></figure><hr /><h4 id="åˆ‡å…¥ç‚¹è¡¨è¾¾å¼"><a class="markdownIt-Anchor" href="#åˆ‡å…¥ç‚¹è¡¨è¾¾å¼"></a> åˆ‡å…¥ç‚¹è¡¨è¾¾å¼</h4><hr /><p><img src="AOP/image-20260201194215406.png" alt="image-20260201194215406" /></p><hr /><h5 id="execution"><a class="markdownIt-Anchor" href="#execution"></a> execution</h5><p>executionä¸»è¦æ ¹æ®æ–¹æ³•çš„è¿”å›å€¼ã€åŒ…åã€ç±»åã€æ–¹æ³•åã€æ–¹æ³•å‚æ•°ç­‰ä¿¡æ¯æ¥åŒ¹é…ï¼Œè¯­æ³•ä¸ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">execution(è®¿é—®ä¿®é¥°ç¬¦?  è¿”å›å€¼  åŒ…å.ç±»å.?æ–¹æ³•å(æ–¹æ³•å‚æ•°) <span class="keyword">throws</span> å¼‚å¸¸?)</span><br></pre></td></tr></table></figure><p>å…¶ä¸­å¸¦<code>?</code>çš„è¡¨ç¤ºå¯ä»¥çœç•¥çš„éƒ¨åˆ†</p><ul><li>è®¿é—®ä¿®é¥°ç¬¦ï¼šå¯çœç•¥ï¼ˆæ¯”å¦‚: publicã€protectedï¼‰</li><li>åŒ…å.ç±»åï¼š å¯çœç•¥   å¯ä»¥ç›´æ¥å†™æ–¹æ³•åï¼Œä¸æ¨èçœç•¥</li><li>throws å¼‚å¸¸ï¼šå¯çœç•¥ï¼ˆæ³¨æ„æ˜¯æ–¹æ³•ä¸Šå£°æ˜æŠ›å‡ºçš„å¼‚å¸¸ï¼Œä¸æ˜¯å®é™…æŠ›å‡ºçš„å¼‚å¸¸ï¼‰</li></ul><p>ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Before(&quot;execution(void com.itheima.service.impl.DeptServiceImpl.delete(java.lang.Integer))&quot;)</span></span><br></pre></td></tr></table></figure><p>å¯ä»¥ä½¿ç”¨é€šé…ç¬¦æè¿°åˆ‡å…¥ç‚¹</p><ul><li><code>*</code> ï¼šå•ä¸ªç‹¬ç«‹çš„ä»»æ„ç¬¦å·ï¼Œå¯ä»¥é€šé…ä»»æ„è¿”å›å€¼ã€åŒ…åã€ç±»åã€æ–¹æ³•åã€ä»»æ„ç±»å‹çš„ä¸€ä¸ªå‚æ•°ï¼Œä¹Ÿå¯ä»¥é€šé…åŒ…ã€ç±»ã€æ–¹æ³•åçš„ä¸€éƒ¨åˆ†</li><li><code>..</code> ï¼šå¤šä¸ªè¿ç»­çš„ä»»æ„ç¬¦å·ï¼Œå¯ä»¥é€šé…ä»»æ„å±‚çº§çš„åŒ…ï¼Œæˆ–ä»»æ„ç±»å‹ã€ä»»æ„ä¸ªæ•°çš„å‚æ•°</li></ul><h5 id="åˆ‡å…¥ç‚¹è¡¨è¾¾å¼çš„è¯­æ³•è§„åˆ™"><a class="markdownIt-Anchor" href="#åˆ‡å…¥ç‚¹è¡¨è¾¾å¼çš„è¯­æ³•è§„åˆ™"></a> åˆ‡å…¥ç‚¹è¡¨è¾¾å¼çš„è¯­æ³•è§„åˆ™ï¼š</h5><ol><li>æ–¹æ³•çš„è®¿é—®ä¿®é¥°ç¬¦å¯ä»¥çœç•¥</li><li>è¿”å›å€¼å¯ä»¥ä½¿ç”¨<code>*</code>å·ä»£æ›¿ï¼ˆä»»æ„è¿”å›å€¼ç±»å‹ï¼‰</li><li>åŒ…åå¯ä»¥ä½¿ç”¨<code>*</code>å·ä»£æ›¿ï¼Œä»£è¡¨ä»»æ„åŒ…ï¼ˆä¸€å±‚åŒ…ä½¿ç”¨ä¸€ä¸ª<code>*</code>ï¼‰</li><li>ä½¿ç”¨<code>..</code>é…ç½®åŒ…åï¼Œæ ‡è¯†æ­¤åŒ…ä»¥åŠæ­¤åŒ…ä¸‹çš„æ‰€æœ‰å­åŒ…</li><li>ç±»åå¯ä»¥ä½¿ç”¨<code>*</code>å·ä»£æ›¿ï¼Œæ ‡è¯†ä»»æ„ç±»</li><li>æ–¹æ³•åå¯ä»¥ä½¿ç”¨<code>*</code>å·ä»£æ›¿ï¼Œè¡¨ç¤ºä»»æ„æ–¹æ³•ï¼Œå¹¶ä¸”æ–¹æ³•ä¸€éƒ¨åˆ†+<code>*</code>è¡¨ç¤ºæ–¹æ³•åä¸­éœ€è¦åŒ…æ‹¬è¿™ä¸€éƒ¨åˆ†çš„æ–¹æ³•</li><li>å¯ä»¥ä½¿ç”¨ <code>*</code>  é…ç½®å‚æ•°ï¼Œä¸€ä¸ªä»»æ„ç±»å‹çš„å‚æ•°</li><li>å¯ä»¥ä½¿ç”¨<code>..</code> é…ç½®å‚æ•°ï¼Œä»»æ„ä¸ªä»»æ„ç±»å‹çš„å‚æ•°</li></ol><h5 id="åˆ‡å…¥ç‚¹è¡¨è¾¾å¼ç¤ºä¾‹"><a class="markdownIt-Anchor" href="#åˆ‡å…¥ç‚¹è¡¨è¾¾å¼ç¤ºä¾‹"></a> <strong>åˆ‡å…¥ç‚¹è¡¨è¾¾å¼ç¤ºä¾‹</strong></h5><ul><li>çœç•¥æ–¹æ³•çš„ä¿®é¥°ç¬¦å·</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">execution(<span class="keyword">void</span> com.itheima.service.impl.DeptServiceImpl.delete(java.lang.Integer))</span><br></pre></td></tr></table></figure><ul><li>ä½¿ç”¨<code>*</code>ä»£æ›¿è¿”å›å€¼ç±»å‹</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">execution(* com.itheima.service.impl.DeptServiceImpl.delete(java.lang.Integer))</span><br></pre></td></tr></table></figure><ul><li>ä½¿ç”¨<code>*</code>ä»£æ›¿åŒ…åï¼ˆä¸€å±‚åŒ…ä½¿ç”¨ä¸€ä¸ª<code>*</code>ï¼‰</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">execution(* com.itheima.*.*.DeptServiceImpl.delete(java.lang.Integer))</span><br></pre></td></tr></table></figure><ul><li>ä½¿ç”¨<code>..</code>çœç•¥åŒ…å</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">execution(* com..DeptServiceImpl.delete(java.lang.Integer))  </span><br></pre></td></tr></table></figure><ul><li>ä½¿ç”¨<code>*</code>ä»£æ›¿ç±»å</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">execution(* com..*.delete(java.lang.Integer))</span><br></pre></td></tr></table></figure><ul><li>ä½¿ç”¨<code>*</code>ä»£æ›¿æ–¹æ³•å</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">execution(* com..*.*(java.lang.Integer))</span><br></pre></td></tr></table></figure><ul><li>ä½¿ç”¨ <code>*</code> ä»£æ›¿å‚æ•°</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">execution(* com.itheima.service.impl.DeptServiceImpl.delete(*))</span><br></pre></td></tr></table></figure><ul><li>ä½¿ç”¨<code>..</code>çœç•¥å‚æ•°</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">execution(* com..*.*(..))</span><br></pre></td></tr></table></figure><p>â€‹</p><h5 id="æ³¨æ„äº‹é¡¹"><a class="markdownIt-Anchor" href="#æ³¨æ„äº‹é¡¹"></a> <strong>æ³¨æ„äº‹é¡¹ï¼š</strong></h5><ul><li>æ ¹æ®ä¸šåŠ¡éœ€è¦ï¼Œå¯ä»¥ä½¿ç”¨ ä¸”ï¼ˆ&amp;&amp;ï¼‰ã€æˆ–ï¼ˆ||ï¼‰ã€éï¼ˆ!ï¼‰ æ¥ç»„åˆæ¯”è¾ƒå¤æ‚çš„åˆ‡å…¥ç‚¹è¡¨è¾¾å¼ã€‚</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">execution(* com.itheima.service.DeptService.list(..)) || execution(* com.itheima.service.DeptService.delete(..))</span><br></pre></td></tr></table></figure><h5 id="åˆ‡å…¥ç‚¹è¡¨è¾¾å¼ä¹¦å†™å»ºè®®"><a class="markdownIt-Anchor" href="#åˆ‡å…¥ç‚¹è¡¨è¾¾å¼ä¹¦å†™å»ºè®®"></a> <strong>åˆ‡å…¥ç‚¹è¡¨è¾¾å¼ä¹¦å†™å»ºè®®ï¼š</strong></h5><ul><li>æ‰€æœ‰ä¸šåŠ¡æ–¹æ³•ååœ¨å‘½åæ—¶å°½é‡è§„èŒƒï¼Œæ–¹ä¾¿åˆ‡å…¥ç‚¹è¡¨è¾¾å¼å¿«é€ŸåŒ¹é…ã€‚å¦‚ï¼šfindXxxï¼ŒupdateXxxã€‚</li><li>æè¿°åˆ‡å…¥ç‚¹æ–¹æ³•é€šå¸¸åŸºäºæ¥å£æè¿°ï¼Œè€Œä¸æ˜¯ç›´æ¥æè¿°å®ç°ç±»ï¼Œå¢å¼ºæ‹“å±•æ€§ã€‚</li><li>åœ¨æ»¡è¶³ä¸šåŠ¡éœ€è¦çš„å‰æä¸‹ï¼Œå°½é‡ç¼©å°åˆ‡å…¥ç‚¹çš„åŒ¹é…èŒƒå›´ã€‚å¦‚ï¼šåŒ…åå°½é‡ä¸ä½¿ç”¨â€¦ï¼Œä½¿ç”¨ <code>*</code> åŒ¹é…å•ä¸ªåŒ…ã€‚</li></ul><hr /><h3 id="joinpoint"><a class="markdownIt-Anchor" href="#joinpoint"></a> JoinPoint</h3><p>åœ¨Springä¸­ç”¨JoinPointæŠ½è±¡äº†è¿æ¥ç‚¹ï¼Œç”¨å®ƒå¯ä»¥è·å¾—æ–¹æ³•æ‰§è¡Œæ—¶çš„ç›¸å…³ä¿¡æ¯ï¼Œå¦‚ç›®æ ‡ç±»åã€æ–¹æ³•åã€æ–¹æ³•å‚æ•°ç­‰ã€‚</p><h3 id="threadlocal"><a class="markdownIt-Anchor" href="#threadlocal"></a> ThreadLocal</h3><ul><li>ThreadLocal å¹¶ä¸æ˜¯ä¸€ä¸ªThreadï¼Œè€Œæ˜¯Threadçš„å±€éƒ¨å˜é‡ã€‚</li><li>ThreadLocalä¸ºæ¯ä¸ªçº¿ç¨‹æä¾›ä¸€ä»½å•ç‹¬çš„å­˜å‚¨ç©ºé—´ï¼Œå…·æœ‰çº¿ç¨‹éš”ç¦»çš„æ•ˆæœï¼Œä¸åŒçš„çº¿ç¨‹ä¹‹é—´ä¸ä¼šç›¸äº’å¹²æ‰°ã€‚</li></ul><p><img src="AOP/4f079457-a3e6-451d-ba6a-c0f78e805a9a.png" alt="é£ä¹¦æ–‡æ¡£ - å›¾ç‰‡" /></p><ul><li>å¸¸è§æ–¹æ³•ï¼š<ul><li><code>public void set(T value)`` </code>  è®¾ç½®å½“å‰çº¿ç¨‹çš„çº¿ç¨‹å±€éƒ¨å˜é‡çš„å€¼</li><li><code>public T get()`` </code>                    è¿”å›å½“å‰çº¿ç¨‹æ‰€å¯¹åº”çš„çº¿ç¨‹å±€éƒ¨å˜é‡çš„å€¼</li><li><code>public void remove()`` </code>         ç§»é™¤å½“å‰çº¿ç¨‹çš„çº¿ç¨‹å±€éƒ¨å˜é‡</li></ul></li></ul><p><strong>åœ¨åŒä¸€ä¸ªçº¿ç¨‹ä¸­å®ç°ä¸åŒç±»ä¹‹é—´çš„æ•°æ®å…±äº«</strong></p><p><img src="AOP/59f30a17-eb7f-486a-85cd-9426d467862c-17709763055312-17709818727601.png" alt="" /></p><p><strong>æ¡ˆä¾‹ï¼šè®°å½•å½“å‰ç™»å½•å‘˜å·¥</strong></p><p>1ã€å®šä¹‰ThreadLocalæ“ä½œçš„å·¥å…·ç±»ï¼Œç”¨äºæ“ä½œå½“å‰ç™»å½•å‘˜å·¥IDã€‚åè€…ä¸ç”¨å®šä¹‰ï¼Œç›´æ¥ç”¨å½“å‰çº¿ç¨‹çš„TreadLocalä¹Ÿå¯ä»¥ã€‚</p><p>åœ¨ <code>com.itheima.utils</code> å¼•å…¥å·¥å…·ç±» <code>CurrentHolder</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CurrentHolder</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> ThreadLocal&lt;Integer&gt; CURRENT_LOCAL = <span class="keyword">new</span> <span class="title class_">ThreadLocal</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">setCurrentId</span><span class="params">(Integer employeeId)</span> &#123;</span><br><span class="line">        CURRENT_LOCAL.set(employeeId);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Integer <span class="title function_">getCurrentId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> CURRENT_LOCAL.get();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">remove</span><span class="params">()</span> &#123;</span><br><span class="line">        CURRENT_LOCAL.remove();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2ã€åœ¨<code>TokenFilter</code>ä¸­ï¼Œè§£æå®Œå½“å‰ç™»å½•å‘˜å·¥IDï¼Œå°†å…¶å­˜å…¥ThreadLocalï¼ˆç”¨å®Œä¹‹åéœ€å°†å…¶åˆ é™¤ï¼‰ã€‚</p><p>3ã€åœ¨AOPç¨‹åºä¸­ï¼Œä»ThreadLocalä¸­è·å–å½“å‰ç™»å½•å‘˜å·¥çš„IDã€‚</p><hr /><h2 id=""><a class="markdownIt-Anchor" href="#"></a> </h2>]]>
    </content>
    <id>https://imouyo.github.io/2026/02/13/AOP/</id>
    <link href="https://imouyo.github.io/2026/02/13/AOP/"/>
    <published>2026-02-13T09:09:03.000Z</published>
    <summary>
      <![CDATA[<h2 id="aop"><a class="markdownIt-Anchor" href="#aop"></a> AOP</h2>
<p><strong>1ã€æ¡ˆä¾‹ï¼šç»Ÿè®¡éƒ¨é—¨ç®¡ç†å„ä¸ªä¸šåŠ¡å±‚æ–¹æ³•æ‰§è¡Œè€—æ—¶ã€‚</strong></p>
<p>1). å¯¼å…¥ä¾èµ–ï¼šåœ¨ pom.xml æ–‡ä»¶]]>
    </summary>
    <title>AOP</title>
    <updated>2026-02-13T11:24:38.990Z</updated>
  </entry>
  <entry>
    <author>
      <name>John Doe</name>
    </author>
    <category term="æ•°æ®åº“" scheme="https://imouyo.github.io/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    <category term="æ•°æ®åº“æŸ¥è¯¢" scheme="https://imouyo.github.io/tags/%E6%95%B0%E6%8D%AE%E5%BA%93%E6%9F%A5%E8%AF%A2/"/>
    <content>
      <![CDATA[<h2 id="mybatis"><a class="markdownIt-Anchor" href="#mybatis"></a> MyBatis</h2><hr /><h3 id="å‡†å¤‡å·¥ä½œ"><a class="markdownIt-Anchor" href="#å‡†å¤‡å·¥ä½œ"></a> å‡†å¤‡å·¥ä½œ</h3><ol><li><p>åˆ›å»ºspringbootæ—¶æ·»åŠ MySQL Driverå’ŒMyBatis Frameworkçš„ä¾èµ–</p></li><li><p>åˆ›å»ºéœ€è¦æ¥å—æ•°æ®çš„å®ä½“ç±»Userï¼Œç±»ä¸­çš„å±æ€§åå¿…é¡»å’Œå­—æ®µåä¸€ä¸€å¯¹åº”ï¼Œé¡ºåºå¯ä»¥ä¸åŒå®ä½“ç±»æ”¾åœ¨ <code>com.itheima.pojo</code> åŒ…ä¸‹ã€‚</p></li><li><p>åœ¨ <code>application.properties</code> ä¸­é…ç½®æ•°æ®åº“çš„è¿æ¥ä¿¡æ¯ã€‚</p> <figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æ•°æ®åº“è®¿é—®çš„urlåœ°å€</span></span><br><span class="line"><span class="attr">spring.datasource.url</span>=<span class="string">jdbc:mysql://localhost:3306/web</span></span><br><span class="line"><span class="comment">#æ•°æ®åº“é©±åŠ¨ç±»ç±»å</span></span><br><span class="line"><span class="attr">spring.datasource.driver-class-name</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="comment">#è®¿é—®æ•°æ®åº“-ç”¨æˆ·å</span></span><br><span class="line"><span class="attr">spring.datasource.username</span>=<span class="string">root</span></span><br><span class="line"><span class="comment">#è®¿é—®æ•°æ®åº“-å¯†ç </span></span><br><span class="line"><span class="attr">spring.datasource.password</span>=<span class="string">root@1234</span></span><br></pre></td></tr></table></figure></li><li><p><strong>ç¼–å†™Mybatisç¨‹åºï¼šç¼–å†™Mybatisçš„æŒä¹…å±‚æ¥å£ï¼Œå®šä¹‰SQLè¯­å¥ï¼ˆæ³¨è§£ï¼‰</strong></p><p>åœ¨åˆ›å»ºå‡ºæ¥çš„springbootå·¥ç¨‹ä¸­ï¼Œåœ¨å¼•å¯¼ç±»æ‰€åœ¨åŒ…ä¸‹ï¼Œåœ¨åˆ›å»ºä¸€ä¸ªåŒ… <code>mapper</code> ã€‚åœ¨ <code>mapper</code> åŒ…ä¸‹åˆ›å»ºä¸€ä¸ªæ¥å£ <code>UserMapper</code> ï¼Œè¿™æ˜¯ä¸€ä¸ªæŒä¹…å±‚æ¥å£ï¼ˆMybatisçš„æŒä¹…å±‚æ¥å£è§„èŒƒä¸€èˆ¬éƒ½å« XxxMapperï¼‰ã€‚</p><p>UserMapperæ¥å£çš„å†…å®¹å¦‚ä¸‹ï¼š</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.itheima.pojo.User;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Mapper;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Select;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥è¯¢å…¨éƒ¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Select(&quot;select * from user&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">findAll</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ³¨è§£è¯´æ˜ï¼š</strong></p><ul><li>@Mapperæ³¨è§£ï¼šè¡¨ç¤ºæ˜¯mybatisä¸­çš„Mapperæ¥å£</li></ul><p>ç¨‹åºè¿è¡Œæ—¶ï¼Œæ¡†æ¶ä¼šè‡ªåŠ¨ç”Ÿæˆæ¥å£çš„å®ç°ç±»å¯¹è±¡(ä»£ç†å¯¹è±¡)ï¼Œå¹¶ç»™äº¤Springçš„IOCå®¹å™¨ç®¡ç†</p><ul><li>@Selectæ³¨è§£ï¼šä»£è¡¨çš„å°±æ˜¯selectæŸ¥è¯¢ï¼Œç”¨äºä¹¦å†™selectæŸ¥è¯¢è¯­å¥</li></ul></li></ol><hr /><h3 id="åˆ é™¤"><a class="markdownIt-Anchor" href="#åˆ é™¤"></a> åˆ é™¤</h3><ul><li><p>æ±‚ï¼šæ ¹æ®IDåˆ é™¤ç”¨æˆ·ä¿¡æ¯</p></li><li><p>SQLï¼šdelete from user where id = 5;</p></li><li><p>Mapperæ¥å£æ–¹æ³•ï¼š</p>  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ ¹æ®idåˆ é™¤</span></span><br><span class="line"><span class="comment"> * åœ¨Mybatisä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å‚æ•°å ä½ç¬¦å· #&#123;...&#125; æ¥å ä½ï¼Œåœ¨è°ƒç”¨deleteByIdæ–¹æ³•æ—¶ï¼Œä¼ é€’çš„å‚æ•°å€¼ï¼Œæœ€ç»ˆä¼šæ›¿æ¢å ä½ç¬¦ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Delete(&quot;delete from user where id = #&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteById</span><span class="params">(Integer id)</span>;</span><br></pre></td></tr></table></figure></li><li><p>Mybatisçš„æä¾›çš„ç¬¦å·ï¼Œæœ‰ä¸¤ä¸ªï¼Œä¸€ä¸ªæ˜¯ <code>#{...}</code>ï¼Œå¦ä¸€ä¸ªæ˜¯ <code>${...}</code>ï¼ŒåŒºåˆ«å¦‚ä¸‹ï¼š</p></li></ul><table><thead><tr><th style="text-align:left">ç¬¦å·</th><th>è¯´æ˜</th><th>åœºæ™¯</th><th>ä¼˜ç¼ºç‚¹</th></tr></thead><tbody><tr><td style="text-align:left">#{â€¦}</td><td>å ä½ç¬¦ã€‚æ‰§è¡Œæ—¶ï¼Œä¼šå°†#{â€¦}æ›¿æ¢ä¸º?ï¼Œç”Ÿæˆé¢„ç¼–è¯‘SQL</td><td>å‚æ•°å€¼ä¼ é€’</td><td>å®‰å…¨ã€æ€§èƒ½é«˜ ï¼ˆæ¨èï¼‰</td></tr><tr><td style="text-align:left">${â€¦}</td><td>æ‹¼æ¥ç¬¦ã€‚ç›´æ¥å°†å‚æ•°æ‹¼æ¥åœ¨SQLè¯­å¥ä¸­ï¼Œå­˜åœ¨SQLæ³¨å…¥é—®é¢˜</td><td>è¡¨åã€å­—æ®µååŠ¨æ€è®¾ç½®æ—¶ä½¿ç”¨</td><td>ä¸å®‰å…¨ã€æ€§èƒ½ä½</td></tr></tbody></table><hr /><h3 id="æ·»åŠ "><a class="markdownIt-Anchor" href="#æ·»åŠ "></a> æ·»åŠ </h3><ul><li>éœ€æ±‚ï¼šæ·»åŠ ä¸€ä¸ªç”¨æˆ·</li><li>SQLï¼šinsert into user(username,password,name,age) values(â€˜zhouyuâ€™,â€˜123456â€™,â€˜å‘¨ç‘œâ€™,20);</li><li>Mapperæ¥å£ï¼š</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ·»åŠ ç”¨æˆ·</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Insert(&quot;insert into user (username,password,name,age) values (#&#123;username&#125;,#&#123;password&#125;,#&#123;name&#125;,#&#123;age&#125;)&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insert</span><span class="params">(User user)</span>;</span><br></pre></td></tr></table></figure><p>å¦‚æœåœ¨SQLè¯­å¥ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ä¼ é€’å¤šä¸ªå‚æ•°ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå¤šä¸ªå‚æ•°å°è£…åˆ°ä¸€ä¸ªå¯¹è±¡ä¸­ï¼Œåªéœ€è¦è¯¥å¯¹è±¡ä¸­çš„å±æ€§å€¼åŒ…æ‹¬è¿™å‡ ä¸ªå‚æ•°å°±å¯ä»¥ã€‚ç„¶ååœ¨SQLè¯­å¥ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡<code>#{å¯¹è±¡``å±æ€§``å}</code>çš„æ–¹å¼ï¼Œè·å–åˆ°å¯¹è±¡ä¸­å°è£…çš„å±æ€§å€¼ã€‚</p><hr /><h3 id="ä¿®æ”¹"><a class="markdownIt-Anchor" href="#ä¿®æ”¹"></a> ä¿®æ”¹</h3><ul><li>éœ€æ±‚ï¼šæ ¹æ®IDæ›´æ–°ç”¨æˆ·ä¿¡æ¯</li><li>SQLï¼šupdate user set username = â€˜zhouyuâ€™, password = â€˜123456â€™, name = â€˜å‘¨ç‘œâ€™, age = 20 where id = 1ï¼›</li><li>Mapperæ¥å£æ–¹æ³•ï¼š</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ ¹æ®idæ›´æ–°ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Update(&quot;update user set username = #&#123;username&#125;,password = #&#123;password&#125;,name = #&#123;name&#125;,age = #&#123;age&#125; where id = #&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(User user)</span>;</span><br></pre></td></tr></table></figure><hr /><h3 id="æŸ¥è¯¢"><a class="markdownIt-Anchor" href="#æŸ¥è¯¢"></a> æŸ¥è¯¢</h3><ul><li>éœ€æ±‚ï¼šæ ¹æ®ç”¨æˆ·åå’Œå¯†ç æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯</li><li>SQLï¼šselect* fromuser whereusername = â€˜zhouyuâ€™ and password = â€˜123456â€™</li><li>Mapperæ¥å£æ–¹æ³•ï¼š</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ ¹æ®ç”¨æˆ·åå’Œå¯†ç æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Select(&quot;select * from user where username = #&#123;username&#125; and password = #&#123;password&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> User <span class="title function_">findByUsernameAndPassword</span><span class="params">(<span class="meta">@Param(&quot;username&quot;)</span> String username, <span class="meta">@Param(&quot;password&quot;)</span> String password)</span>;</span><br></pre></td></tr></table></figure><p>@paramæ³¨è§£çš„ä½œç”¨æ˜¯ä¸ºæ¥å£çš„æ–¹æ³•å½¢å‚èµ·åå­—çš„ã€‚ï¼ˆç”±äºç”¨æˆ·åå”¯ä¸€çš„ï¼Œæ‰€ä»¥æŸ¥è¯¢è¿”å›çš„ç»“æœæœ€å¤šåªæœ‰ä¸€ä¸ªï¼Œå¯ä»¥ç›´æ¥å°è£…åˆ°ä¸€ä¸ªå¯¹è±¡ä¸­ï¼‰</p><hr /><h3 id="xmlæ˜ å°„é…ç½®"><a class="markdownIt-Anchor" href="#xmlæ˜ å°„é…ç½®"></a> XMLæ˜ å°„é…ç½®</h3><p>Mybatisçš„å¼€å‘æœ‰ä¸¤ç§æ–¹å¼ï¼š</p><ol><li>æ³¨è§£</li><li>XML</li></ol><h4 id="xmlé…ç½®æ–‡ä»¶è§„èŒƒ"><a class="markdownIt-Anchor" href="#xmlé…ç½®æ–‡ä»¶è§„èŒƒ"></a> XMLé…ç½®æ–‡ä»¶è§„èŒƒ</h4><p>ä½¿ç”¨Mybatisçš„æ³¨è§£æ–¹å¼ï¼Œä¸»è¦æ˜¯æ¥å®Œæˆä¸€äº›ç®€å•çš„å¢åˆ æ”¹æŸ¥åŠŸèƒ½ã€‚å¦‚æœéœ€è¦å®ç°å¤æ‚çš„SQLåŠŸèƒ½ï¼Œå»ºè®®ä½¿ç”¨XMLæ¥é…ç½®æ˜ å°„è¯­å¥ï¼Œä¹Ÿå°±æ˜¯å°†SQLè¯­å¥å†™åœ¨XMLé…ç½®æ–‡ä»¶ä¸­ã€‚</p><p><strong>åœ¨Mybatisä¸­ä½¿ç”¨XMLæ˜ å°„æ–‡ä»¶æ–¹å¼å¼€å‘ï¼Œéœ€è¦ç¬¦åˆä¸€å®šçš„è§„èŒƒï¼š</strong></p><ol><li>XMLæ˜ å°„æ–‡ä»¶çš„åç§°ä¸Mapperæ¥å£åç§°ä¸€è‡´ï¼Œå¹¶ä¸”å°†XMLæ˜ å°„æ–‡ä»¶å’ŒMapperæ¥å£æ”¾ç½®åœ¨ç›¸åŒåŒ…ä¸‹ï¼ˆåŒåŒ…åŒåï¼‰</li><li>XMLæ˜ å°„æ–‡ä»¶çš„namespaceå±æ€§ä¸ºMapperæ¥å£å…¨é™å®šåä¸€è‡´</li><li>XMLæ˜ å°„æ–‡ä»¶ä¸­sqlè¯­å¥çš„idä¸Mapperæ¥å£ä¸­çš„æ–¹æ³•åä¸€è‡´ï¼Œå¹¶ä¿æŒè¿”å›ç±»å‹ä¸€è‡´ã€‚</li></ol><p><strong>ç¬¬1æ­¥ï¼š åˆ›å»ºXMLæ˜ å°„æ–‡ä»¶</strong></p><p>å‚è€ƒä¸Šè¾¹ä¸‰ç‚¹åˆ›å»º</p><p><strong>ç¬¬2æ­¥ï¼šç¼–å†™XMLæ˜ å°„æ–‡ä»¶</strong></p><blockquote><p>xmlæ˜ å°„æ–‡ä»¶ä¸­çš„dtdçº¦æŸï¼Œç›´æ¥ä»mybatiså®˜ç½‘å¤åˆ¶å³å¯; æˆ–è€…ç›´æ¥AIç”Ÿæˆã€‚</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">  <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">  <span class="string">&quot;https://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>ç¬¬3æ­¥ï¼šé…ç½®</strong></p><p><strong>a. XMLæ˜ å°„æ–‡ä»¶çš„namespaceå±æ€§ä¸ºMapperæ¥å£å…¨é™å®šå</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;https://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.itheima.mapper.UserMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>b. XMLæ˜ å°„æ–‡ä»¶ä¸­sqlè¯­å¥çš„idä¸Mapperæ¥å£ä¸­çš„æ–¹æ³•åä¸€è‡´ï¼Œå¹¶ä¿æŒè¿”å›ç±»å‹ä¸€è‡´</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;https://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.itheima.mapper.EmpMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--æŸ¥è¯¢æ“ä½œ--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findAll&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.itheima.pojo.User&quot;</span>&gt;</span></span><br><span class="line">        select * from user</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><p>resultType å±æ€§çš„å€¼ï¼Œä¸æŸ¥è¯¢è¿”å›çš„å•æ¡è®°å½•å°è£…çš„ç±»å‹ä¸€è‡´ã€‚</p><h4 id="xmlæ˜ å°„æ–‡ä»¶è¾…åŠ©é…ç½®"><a class="markdownIt-Anchor" href="#xmlæ˜ å°„æ–‡ä»¶è¾…åŠ©é…ç½®"></a> XMLæ˜ å°„æ–‡ä»¶è¾…åŠ©é…ç½®</h4><p>å¯ä»¥åœ¨application.propertiesä¸­é…ç½®</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#æŒ‡å®šXMLæ˜ å°„é…ç½®æ–‡ä»¶çš„ä½ç½®</span><br><span class="line">mybatis.mapper-locations=classpath:mapper/*.xml</span><br></pre></td></tr></table></figure><p>å¯ä»¥ä¸éµå¾ªåŒåŒ…è¿™ä¸€é™åˆ¶æ¡ä»¶</p>]]>
    </content>
    <id>https://imouyo.github.io/2026/02/11/MyBatis/</id>
    <link href="https://imouyo.github.io/2026/02/11/MyBatis/"/>
    <published>2026-02-11T14:27:37.000Z</published>
    <summary>
      <![CDATA[<h2 id="mybatis"><a class="markdownIt-Anchor" href="#mybatis"></a> MyBatis</h2>
<hr />
<h3 id="å‡†å¤‡å·¥ä½œ"><a class="markdownIt-Anchor" href="#å‡†å¤‡å·¥]]>
    </summary>
    <title>MyBatiså­¦ä¹ </title>
    <updated>2026-02-12T06:24:03.182Z</updated>
  </entry>
  <entry>
    <author>
      <name>John Doe</name>
    </author>
    <category term="æ•°æ®åº“" scheme="https://imouyo.github.io/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    <category term="MySQL" scheme="https://imouyo.github.io/tags/MySQL/"/>
    <content>
      <![CDATA[<h2 id="mysql"><a class="markdownIt-Anchor" href="#mysql"></a> MySQL</h2><h2 id="å¯åŠ¨mysqlæœåŠ¡"><a class="markdownIt-Anchor" href="#å¯åŠ¨mysqlæœåŠ¡"></a> å¯åŠ¨MySQLæœåŠ¡</h2><p>åœ¨é»‘æ¡†é‡Œæ•²å…¥<code>net start mysql</code>ï¼Œå›è½¦ã€‚</p><p>åœ¨é»‘æ¡†é‡Œæ•²å…¥<code>net stop mysql</code>ï¼Œå›è½¦ã€‚</p><hr /><h3 id="ä¿®æ”¹é»˜è®¤è´¦æˆ·å¯†ç "><a class="markdownIt-Anchor" href="#ä¿®æ”¹é»˜è®¤è´¦æˆ·å¯†ç "></a> ä¿®æ”¹é»˜è®¤è´¦æˆ·å¯†ç </h3><p>åœ¨é»‘æ¡†é‡Œæ•²å…¥<code>mysqladmin -u root password 1234</code>ï¼Œè¿™é‡Œçš„<code>1234</code>å°±æ˜¯æŒ‡é»˜è®¤ç®¡ç†å‘˜(å³rootè´¦æˆ·)çš„å¯†ç ï¼Œå¯ä»¥è‡ªè¡Œä¿®æ”¹æˆä½ å–œæ¬¢çš„ã€‚</p><hr /><h3 id="ç™»å½•"><a class="markdownIt-Anchor" href="#ç™»å½•"></a> ç™»å½•</h3><p>å³é”®å¼€å§‹èœå•ï¼Œé€‰æ‹©<code>å‘½ä»¤æç¤ºç¬¦</code>ï¼Œæ‰“å¼€é»‘æ¡†ã€‚</p><p>åœ¨é»‘æ¡†ä¸­è¾“å…¥ï¼Œ<code>mysql -uroot -p1234</code>ï¼Œå›è½¦ï¼Œå‡ºç°ä¸‹å›¾ä¸”å·¦ä¸‹è§’ä¸º<code>mysql&gt;</code>ï¼Œåˆ™ç™»å½•æˆåŠŸã€‚</p><p>ç™»é™†å‚æ•°</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql [<span class="operator">-</span>hæ•°æ®åº“æœåŠ¡å™¨çš„IPåœ°å€ <span class="operator">-</span>Pç«¯å£å·] <span class="operator">-</span>uç”¨æˆ·å <span class="operator">-</span>på¯†ç </span><br></pre></td></tr></table></figure><h3 id="é€€å‡ºmysql"><a class="markdownIt-Anchor" href="#é€€å‡ºmysql"></a> é€€å‡ºmysqlï¼š</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">exit</span><br></pre></td></tr></table></figure><hr /><h3 id="ddl-å¯¹è¡¨å’Œåº“ä¿®æ”¹"><a class="markdownIt-Anchor" href="#ddl-å¯¹è¡¨å’Œåº“ä¿®æ”¹"></a> DDL-å¯¹è¡¨å’Œåº“ä¿®æ”¹</h3><h4 id="åˆ›å»ºæ•°æ®åº“"><a class="markdownIt-Anchor" href="#åˆ›å»ºæ•°æ®åº“"></a> åˆ›å»ºæ•°æ®åº“</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> database [ if <span class="keyword">not</span> <span class="keyword">exists</span> ] æ•°æ®åº“å  [<span class="keyword">default</span> charset utf8mb4];</span><br></pre></td></tr></table></figure><hr /><h4 id="ä½¿ç”¨æ•°æ®åº“"><a class="markdownIt-Anchor" href="#ä½¿ç”¨æ•°æ®åº“"></a> ä½¿ç”¨æ•°æ®åº“</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">use æ•°æ®åº“å ;</span><br></pre></td></tr></table></figure><hr /><h4 id="åˆ é™¤æ•°æ®åº“"><a class="markdownIt-Anchor" href="#åˆ é™¤æ•°æ®åº“"></a> åˆ é™¤æ•°æ®åº“</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> database [ if <span class="keyword">exists</span> ] æ•°æ®åº“å ;</span><br></pre></td></tr></table></figure><hr /><h4 id="æŸ¥è¯¢æ‰€æœ‰æ•°æ®åº“"><a class="markdownIt-Anchor" href="#æŸ¥è¯¢æ‰€æœ‰æ•°æ®åº“"></a> æŸ¥è¯¢æ‰€æœ‰æ•°æ®åº“</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> databases;</span><br></pre></td></tr></table></figure><hr /><h4 id="æŸ¥è¯¢å½“å‰æ•°æ®åº“"><a class="markdownIt-Anchor" href="#æŸ¥è¯¢å½“å‰æ•°æ®åº“"></a> æŸ¥è¯¢å½“å‰æ•°æ®åº“</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> database();</span><br></pre></td></tr></table></figure><hr /><h4 id="åˆ›å»ºè¡¨"><a class="markdownIt-Anchor" href="#åˆ›å»ºè¡¨"></a> åˆ›å»ºè¡¨</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create table</span>  è¡¨å(</span><br><span class="line">        å­—æ®µ<span class="number">1</span>  å­—æ®µ<span class="number">1</span>ç±»å‹ [çº¦æŸ]  [comment  å­—æ®µ<span class="number">1</span>æ³¨é‡Š ],</span><br><span class="line">        å­—æ®µ<span class="number">2</span>  å­—æ®µ<span class="number">2</span>ç±»å‹ [çº¦æŸ]  [comment  å­—æ®µ<span class="number">2</span>æ³¨é‡Š ],</span><br><span class="line">        ......</span><br><span class="line">        å­—æ®µn  å­—æ®µnç±»å‹ [çº¦æŸ]  [comment  å­—æ®µnæ³¨é‡Š ] </span><br><span class="line">) [ comment  è¡¨æ³¨é‡Š ] ;</span><br><span class="line"></span><br></pre></td></tr></table></figure><table><thead><tr><th>çº¦æŸ</th><th>æè¿°</th><th>å…³é”®å­—</th></tr></thead><tbody><tr><td>éç©ºçº¦æŸ</td><td>é™åˆ¶è¯¥å­—æ®µå€¼ä¸èƒ½ä¸ºnull</td><td>not null</td></tr><tr><td>å”¯ä¸€çº¦æŸ</td><td>ä¿è¯å­—æ®µçš„æ‰€æœ‰æ•°æ®éƒ½æ˜¯å”¯ä¸€ã€ä¸é‡å¤çš„</td><td>unique</td></tr><tr><td>ä¸»é”®çº¦æŸ</td><td>ä¸»é”®æ˜¯ä¸€è¡Œæ•°æ®çš„å”¯ä¸€æ ‡è¯†ï¼Œè¦æ±‚éç©ºä¸”å”¯ä¸€ï¼Œ<strong>æ¯å¼ è¡¨åªèƒ½æœ‰ä¸€ä¸ªä¸»é”®çº¦æŸ</strong></td><td>primary key</td></tr><tr><td>é»˜è®¤çº¦æŸ</td><td>ä¿å­˜æ•°æ®æ—¶ï¼Œå¦‚æœæœªæŒ‡å®šè¯¥å­—æ®µå€¼ï¼Œåˆ™é‡‡ç”¨é»˜è®¤å€¼</td><td>default</td></tr><tr><td>å¤–é”®çº¦æŸ</td><td>è®©ä¸¤å¼ è¡¨çš„æ•°æ®å»ºç«‹è¿æ¥ï¼Œä¿è¯æ•°æ®çš„ä¸€è‡´æ€§å’Œå®Œæ•´æ€§</td><td>foreign key</td></tr></tbody></table><p>ä¾‹å¦‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create table</span> tb_user (</span><br><span class="line">    id <span class="type">int</span> <span class="keyword">primary key</span> auto_increment comment <span class="string">&#x27;ID,å”¯ä¸€æ ‡è¯†&#x27;</span>,   # idæ˜¯ä¸€è¡Œæ•°æ®çš„å”¯ä¸€æ ‡è¯†ï¼ˆä¸èƒ½é‡å¤ï¼‰</span><br><span class="line">    <span class="comment">-- auto_incrementä¸»é”®è‡ªåŠ¨å¢é•¿ï¼Œé»˜è®¤ä»1å¼€å§‹ï¼Œå¦‚æœä¸­é€”æ·»åŠ äº†ä¸ªè‡ªå·±æ·»åŠ çš„ä¸»é”®ï¼Œåˆ™ä»è¯¥ä¸»é”®å¼€å§‹ç»§ç»­å¢é•¿</span></span><br><span class="line">    username <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">not null</span> <span class="keyword">unique</span> comment <span class="string">&#x27;ç”¨æˆ·å&#x27;</span>,<span class="comment">-- ç”¨æˆ·åéç©ºä¸”å”¯ä¸€</span></span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">10</span>) comment <span class="string">&#x27;å§“å&#x27;</span>,</span><br><span class="line">    age <span class="type">int</span> comment <span class="string">&#x27;å¹´é¾„&#x27;</span>,</span><br><span class="line">    gender <span class="type">char</span>(<span class="number">1</span>) <span class="keyword">default</span> <span class="string">&#x27;å¥³&#x27;</span> comment <span class="string">&#x27;æ€§åˆ«&#x27;</span></span><br><span class="line">) comment <span class="string">&#x27;ç”¨æˆ·è¡¨&#x27;</span>;</span><br></pre></td></tr></table></figure><hr /><h4 id="ä¿®æ”¹è¡¨"><a class="markdownIt-Anchor" href="#ä¿®æ”¹è¡¨"></a> ä¿®æ”¹è¡¨</h4><p>ä¸Šé¢è®²è§£äº†è¡¨ç»“æ„çš„åˆ›å»ºã€æ•°æ®ç±»å‹ã€è®¾è®¡è¡¨çš„æµç¨‹ï¼Œæ¥ä¸‹æ¥ï¼Œå†æ¥è®²è§£è¡¨ç»“æ„çš„æŸ¥è¯¢ã€ä¿®æ”¹ã€åˆ é™¤æ“ä½œ ã€‚</p><ul><li>æŸ¥è¯¢æ•°æ®åº“è¡¨çš„å…·ä½“çš„è¯­æ³•ï¼š</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- æŸ¥è¯¢å½“å‰æ•°æ®åº“çš„æ‰€æœ‰è¡¨</span></span><br><span class="line"><span class="keyword">show</span> tables;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥çœ‹æŒ‡å®šçš„è¡¨ç»“æ„</span></span><br><span class="line"><span class="keyword">desc</span> è¡¨å ;   <span class="comment">-- å¯ä»¥æŸ¥çœ‹æŒ‡å®šè¡¨çš„å­—æ®µã€å­—æ®µçš„ç±»å‹ã€æ˜¯å¦å¯ä»¥ä¸ºNULLã€æ˜¯å¦å­˜åœ¨é»˜è®¤å€¼ç­‰ä¿¡æ¯</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥è¯¢æŒ‡å®šè¡¨çš„å»ºè¡¨è¯­å¥</span></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">create table</span> è¡¨å ;</span><br></pre></td></tr></table></figure><ul><li>ä¿®æ”¹æ•°æ®åº“è¡¨ç»“æ„çš„å…·ä½“è¯­æ³•ï¼š</li></ul><h5 id="æ·»åŠ å­—æ®µ"><a class="markdownIt-Anchor" href="#æ·»åŠ å­—æ®µ"></a> æ·»åŠ å­—æ®µ</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- æ·»åŠ å­—æ®µ</span></span><br><span class="line"><span class="keyword">alter table</span> è¡¨å <span class="keyword">add</span>  å­—æ®µå  ç±»å‹(é•¿åº¦)  [comment æ³¨é‡Š]  [çº¦æŸ];</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æ¯”å¦‚ï¼š ä¸ºtb_empè¡¨æ·»åŠ å­—æ®µqqï¼Œå­—æ®µç±»å‹ä¸º varchar(11)</span></span><br><span class="line"><span class="keyword">alter table</span> tb_emp <span class="keyword">add</span>  qq  <span class="type">varchar</span>(<span class="number">11</span>) comment <span class="string">&#x27;QQå·ç &#x27;</span>;</span><br></pre></td></tr></table></figure><h5 id="ä¿®æ”¹å­—æ®µ"><a class="markdownIt-Anchor" href="#ä¿®æ”¹å­—æ®µ"></a> ä¿®æ”¹å­—æ®µ</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- ä¿®æ”¹å­—æ®µç±»å‹</span></span><br><span class="line"><span class="keyword">alter table</span> è¡¨å modify  å­—æ®µå  æ–°æ•°æ®ç±»å‹(é•¿åº¦);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æ¯”å¦‚ï¼š ä¿®æ”¹qqå­—æ®µçš„å­—æ®µç±»å‹ï¼Œå°†å…¶é•¿åº¦ç”±11ä¿®æ”¹ä¸º13</span></span><br><span class="line"><span class="keyword">alter table</span> tb_emp modify qq <span class="type">varchar</span>(<span class="number">13</span>) comment <span class="string">&#x27;QQå·ç &#x27;</span>;</span><br><span class="line"><span class="comment">-- ä¿®æ”¹å­—æ®µåï¼Œå­—æ®µç±»å‹</span></span><br><span class="line"><span class="keyword">alter table</span> è¡¨å change  æ—§å­—æ®µå  æ–°å­—æ®µå  ç±»å‹(é•¿åº¦)  [comment æ³¨é‡Š]  [çº¦æŸ];</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æ¯”å¦‚ï¼š ä¿®æ”¹qqå­—æ®µåä¸º qq_numï¼Œå­—æ®µç±»å‹varchar(13)</span></span><br><span class="line"><span class="keyword">alter table</span> tb_emp change qq qq_num <span class="type">varchar</span>(<span class="number">13</span>) comment <span class="string">&#x27;QQå·ç &#x27;</span>;</span><br></pre></td></tr></table></figure><h5 id="åˆ é™¤å­—æ®µ"><a class="markdownIt-Anchor" href="#åˆ é™¤å­—æ®µ"></a> åˆ é™¤å­—æ®µ</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- åˆ é™¤å­—æ®µ</span></span><br><span class="line"><span class="keyword">alter table</span> è¡¨å <span class="keyword">drop</span> å­—æ®µå;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æ¯”å¦‚ï¼š åˆ é™¤tb_empè¡¨ä¸­çš„qq_numå­—æ®µ</span></span><br><span class="line"><span class="keyword">alter table</span> tb_emp <span class="keyword">drop</span> qq_num;</span><br></pre></td></tr></table></figure><h5 id="ä¿®æ”¹è¡¨å"><a class="markdownIt-Anchor" href="#ä¿®æ”¹è¡¨å"></a> ä¿®æ”¹è¡¨å</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- ä¿®æ”¹è¡¨å</span></span><br><span class="line">rename <span class="keyword">table</span> è¡¨å <span class="keyword">to</span>  æ–°è¡¨å;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æ¯”å¦‚: å°†å½“å‰çš„empè¡¨çš„è¡¨åä¿®æ”¹ä¸ºtb_emp</span></span><br><span class="line">rename <span class="keyword">table</span> emp <span class="keyword">to</span> tb_emp;</span><br></pre></td></tr></table></figure><h5 id="åˆ é™¤è¡¨ç»“æ„"><a class="markdownIt-Anchor" href="#åˆ é™¤è¡¨ç»“æ„"></a> åˆ é™¤è¡¨ç»“æ„</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- åˆ é™¤è¡¨</span></span><br><span class="line"><span class="keyword">drop</span>  <span class="keyword">table</span> [ if <span class="keyword">exists</span> ]  è¡¨å;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æ¯”å¦‚ï¼šå¦‚æœtb_empè¡¨å­˜åœ¨ï¼Œåˆ™åˆ é™¤tb_empè¡¨</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> tb_emp;  <span class="comment">-- åœ¨åˆ é™¤è¡¨æ—¶ï¼Œè¡¨ä¸­çš„å…¨éƒ¨æ•°æ®ä¹Ÿä¼šè¢«åˆ é™¤ã€‚</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><hr /><h3 id="å¤–é”®çº¦æŸ"><a class="markdownIt-Anchor" href="#å¤–é”®çº¦æŸ"></a> å¤–é”®çº¦æŸ</h3><p>ç”¨äºè®©ä¸¤å¼ è¡¨çš„æ•°æ®å»ºç«‹è¿æ¥ï¼Œä¿è¯æ•°æ®çš„ä¸€è‡´æ€§å’Œå®Œæ•´æ€§</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- åˆ›å»ºè¡¨æ—¶æŒ‡å®š</span></span><br><span class="line"><span class="keyword">create table</span> è¡¨å(</span><br><span class="line">        å­—æ®µå    æ•°æ®ç±»å‹,</span><br><span class="line">        ...</span><br><span class="line">        [<span class="keyword">constraint</span>]   [å¤–é”®åç§°]  <span class="keyword">foreign  key</span> (å¤–é”®å­—æ®µå)   <span class="keyword">references</span>   ä¸»è¡¨ (ä¸»è¡¨åˆ—å)        </span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- å»ºå®Œè¡¨åï¼Œæ·»åŠ å¤–é”®</span></span><br><span class="line"><span class="keyword">alter table</span>  è¡¨å  <span class="keyword">add constraint</span>  å¤–é”®åç§°  <span class="keyword">foreign key</span>(å¤–é”®å­—æ®µå) <span class="keyword">references</span> ä¸»è¡¨(ä¸»è¡¨åˆ—å);</span><br></pre></td></tr></table></figure><p>åˆ é™¤å¤–é”®çº¦æŸ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table æ·»åŠ å¤–é”®çš„è¡¨å drop foreign key å¤–é”®å;</span><br></pre></td></tr></table></figure><hr /><h3 id="dml-å¯¹è¡¨çš„æ•°æ®å¢åˆ æ”¹"><a class="markdownIt-Anchor" href="#dml-å¯¹è¡¨çš„æ•°æ®å¢åˆ æ”¹"></a> DML-å¯¹è¡¨çš„æ•°æ®å¢åˆ æ”¹</h3><hr /><p>DMLè‹±æ–‡å…¨ç§°æ˜¯Data Manipulation Language(æ•°æ®æ“ä½œè¯­è¨€)ï¼Œç”¨æ¥å¯¹æ•°æ®åº“ä¸­è¡¨çš„æ•°æ®è®°å½•è¿›è¡Œå¢ã€åˆ ã€æ”¹æ“ä½œã€‚</p><ul><li>æ·»åŠ æ•°æ®ï¼ˆINSERTï¼‰</li><li>ä¿®æ”¹æ•°æ®ï¼ˆUPDATEï¼‰</li><li>åˆ é™¤æ•°æ®ï¼ˆDELETEï¼‰</li></ul><h4 id="å¢åŠ insert"><a class="markdownIt-Anchor" href="#å¢åŠ insert"></a> å¢åŠ (insert)</h4><ol><li><h5 id="è¯­æ³•"><a class="markdownIt-Anchor" href="#è¯­æ³•"></a> <strong>è¯­æ³•</strong></h5></li></ol><ul><li>å‘æŒ‡å®šå­—æ®µæ·»åŠ æ•°æ®</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert into</span> è¡¨å (å­—æ®µå<span class="number">1</span>, å­—æ®µå<span class="number">2</span>) <span class="keyword">values</span> (å€¼<span class="number">1</span>, å€¼<span class="number">2</span>);</span><br></pre></td></tr></table></figure><ul><li>å…¨éƒ¨å­—æ®µæ·»åŠ æ•°æ®</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert into</span> è¡¨å <span class="keyword">values</span> (å€¼<span class="number">1</span>, å€¼<span class="number">2</span>, ...);</span><br></pre></td></tr></table></figure><ul><li>æ‰¹é‡æ·»åŠ æ•°æ®ï¼ˆæŒ‡å®šå­—æ®µï¼‰</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert into</span> è¡¨å (å­—æ®µå<span class="number">1</span>, å­—æ®µå<span class="number">2</span>) <span class="keyword">values</span> (å€¼<span class="number">1</span>, å€¼<span class="number">2</span>), (å€¼<span class="number">1</span>, å€¼<span class="number">2</span>);</span><br></pre></td></tr></table></figure><ul><li>æ‰¹é‡æ·»åŠ æ•°æ®ï¼ˆå…¨éƒ¨å­—æ®µï¼‰</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert into</span> è¡¨å <span class="keyword">values</span> (å€¼<span class="number">1</span>, å€¼<span class="number">2</span>, ...), (å€¼<span class="number">1</span>, å€¼<span class="number">2</span>, ...);</span><br></pre></td></tr></table></figure><ol><li><h5 id="æ¡ˆä¾‹æ¼”ç¤º"><a class="markdownIt-Anchor" href="#æ¡ˆä¾‹æ¼”ç¤º"></a> æ¡ˆä¾‹æ¼”ç¤º</h5></li></ol><ul><li>æ¡ˆä¾‹1ï¼šå‘empè¡¨çš„username, name, gender, phone, create_time, update_timeå­—æ®µæ’å…¥æ•°æ®</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- å› ä¸ºè®¾è®¡è¡¨æ—¶create_time, update_timeä¸¤ä¸ªå­—æ®µä¸èƒ½ä¸ºNULLï¼Œæ‰€ä»¥ä¹Ÿåšä¸ºè¦æ’å…¥çš„å­—æ®µ</span></span><br><span class="line"><span class="keyword">insert into</span> emp(username, name, gender, phone, create_time, update_time)</span><br><span class="line"><span class="keyword">values</span> (<span class="string">&#x27;wuji&#x27;</span>, <span class="string">&#x27;å¼ æ— å¿Œ&#x27;</span>, <span class="number">1</span>, <span class="string">&#x27;13309091231&#x27;</span>, now(), now());</span><br></pre></td></tr></table></figure><ul><li>æ¡ˆä¾‹2ï¼šå‘tempè¡¨çš„æ‰€æœ‰å­—æ®µæ’å…¥æ•°æ®</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert into</span> emp2(id, username, password, name, gender, phone, job, salary, image, entry_date, create_time, update_time)</span><br><span class="line">                  <span class="keyword">values</span> (<span class="keyword">null</span>,<span class="string">&#x27;shinaian&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>,<span class="string">&#x27;æ–½è€åºµ&#x27;</span>,<span class="number">1</span>,<span class="string">&#x27;13309090001&#x27;</span>,<span class="number">4</span>,<span class="number">15000</span>,<span class="string">&#x27;1.jpg&#x27;</span>,<span class="string">&#x27;2000-01-01&#x27;</span>,now(),now()), <span class="comment">-- idå€¼ä¸ºnullæ—¶ï¼Œè‹¥æœ‰keyè‡ªå¢ï¼Œåˆ™è‡ªå¢       </span></span><br></pre></td></tr></table></figure><ul><li>æ¡ˆä¾‹3ï¼šæ‰¹é‡å‘empè¡¨çš„usernameã€nameã€genderå­—æ®µæ’å…¥æ•°æ®</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert into</span> emp(username, name, gender, phone, create_time, update_time)</span><br><span class="line"><span class="keyword">values</span> (<span class="string">&#x27;Tom1&#x27;</span>, <span class="string">&#x27;æ±¤å§†1&#x27;</span>, <span class="number">1</span>, <span class="string">&#x27;13309091231&#x27;</span>, now(), now()),</span><br><span class="line">       (<span class="string">&#x27;Tom2&#x27;</span>, <span class="string">&#x27;æ±¤å§†2&#x27;</span>, <span class="number">1</span>, <span class="string">&#x27;13309091232&#x27;</span>, now(), now());</span><br></pre></td></tr></table></figure><h4 id="ä¿®æ”¹update"><a class="markdownIt-Anchor" href="#ä¿®æ”¹update"></a> ä¿®æ”¹(update)</h4><ol><li><h5 id="è¯­æ³•-2"><a class="markdownIt-Anchor" href="#è¯­æ³•-2"></a> è¯­æ³•</h5></li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> è¡¨å <span class="keyword">set</span> å­—æ®µå<span class="number">1</span> <span class="operator">=</span> å€¼<span class="number">1</span> , å­—æ®µå<span class="number">2</span> <span class="operator">=</span> å€¼<span class="number">2</span> , .... [<span class="keyword">where</span> æ¡ä»¶] ;</span><br></pre></td></tr></table></figure><ol><li><h5 id="æ¡ˆä¾‹æ¼”ç¤º-2"><a class="markdownIt-Anchor" href="#æ¡ˆä¾‹æ¼”ç¤º-2"></a> æ¡ˆä¾‹æ¼”ç¤º</h5></li></ol><ul><li>æ¡ˆä¾‹1ï¼šå°†empè¡¨ä¸­idä¸º1çš„å‘˜å·¥ï¼Œå§“ånameå­—æ®µæ›´æ–°ä¸ºâ€™å¼ ä¸‰â€™</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> emp <span class="keyword">set</span> name<span class="operator">=</span><span class="string">&#x27;å¼ ä¸‰&#x27;</span>, update_time<span class="operator">=</span>now() <span class="keyword">where</span> id<span class="operator">=</span><span class="number">1</span>;</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹è¯­å¥çš„whereæ¡ä»¶å¯ä»¥æœ‰ï¼Œä¹Ÿå¯ä»¥æ²¡æœ‰ï¼Œå¦‚æœæ²¡æœ‰æ¡ä»¶ï¼Œ<strong>åˆ™ä¼šä¿®æ”¹æ•´å¼ è¡¨çš„æ‰€æœ‰æ•°æ®ã€‚</strong></p><ul><li>æ¡ˆä¾‹2ï¼šå°†empè¡¨çš„æ‰€æœ‰å‘˜å·¥å…¥èŒæ—¥æœŸæ›´æ–°ä¸ºâ€™2010-01-01â€™</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> emp <span class="keyword">set</span> entry_date<span class="operator">=</span><span class="string">&#x27;2010-01-01&#x27;</span>, update_time<span class="operator">=</span>now();</span><br></pre></td></tr></table></figure><h4 id="åˆ é™¤delete"><a class="markdownIt-Anchor" href="#åˆ é™¤delete"></a> åˆ é™¤(delete)</h4><ol><li><h5 id="è¯­æ³•-3"><a class="markdownIt-Anchor" href="#è¯­æ³•-3"></a> è¯­æ³•</h5></li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> è¡¨å  [<span class="keyword">where</span>  æ¡ä»¶] ;</span><br></pre></td></tr></table></figure><ul><li>DELETE è¯­å¥çš„whereæ¡ä»¶å¯ä»¥æœ‰ï¼Œä¹Ÿå¯ä»¥æ²¡æœ‰ï¼Œå¦‚æœæ²¡æœ‰æ¡ä»¶ï¼Œ<strong>åˆ™ä¼šåˆ é™¤æ•´å¼ è¡¨çš„æ‰€æœ‰æ•°æ®ã€‚</strong></li><li>DELETE è¯­å¥ä¸èƒ½åˆ é™¤æŸä¸€ä¸ªå­—æ®µçš„å€¼(å¯ä»¥ä½¿ç”¨UPDATEï¼Œå°†è¯¥å­—æ®µå€¼ç½®ä¸ºNULLå³å¯)ã€‚</li><li>å½“è¿›è¡Œåˆ é™¤å…¨éƒ¨æ•°æ®æ“ä½œæ—¶ï¼Œä¼šæç¤ºè¯¢é—®æ˜¯å¦ç¡®è®¤åˆ é™¤æ‰€æœ‰æ•°æ®ï¼Œç›´æ¥ç‚¹å‡»Executeå³å¯ã€‚</li></ul><ol><li><h5 id="æ¡ˆä¾‹æ¼”ç¤º-3"><a class="markdownIt-Anchor" href="#æ¡ˆä¾‹æ¼”ç¤º-3"></a> æ¡ˆä¾‹æ¼”ç¤º</h5></li></ol><ul><li>æ¡ˆä¾‹1ï¼šåˆ é™¤empè¡¨ä¸­idä¸º1çš„å‘˜å·¥</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> emp <span class="keyword">where</span> id <span class="operator">=</span> <span class="number">1</span>;</span><br></pre></td></tr></table></figure><ul><li>æ¡ˆä¾‹2ï¼šåˆ é™¤empè¡¨ä¸­æ‰€æœ‰å‘˜å·¥</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> tb_emp;</span><br></pre></td></tr></table></figure><hr /><h3 id="dql-æŸ¥è¯¢è¡¨ä¸­çš„è®°å½•"><a class="markdownIt-Anchor" href="#dql-æŸ¥è¯¢è¡¨ä¸­çš„è®°å½•"></a> DQL-æŸ¥è¯¢è¡¨ä¸­çš„è®°å½•</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">        å­—æ®µåˆ—è¡¨[]</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">        è¡¨ååˆ—è¡¨[]<span class="comment">-- select å’Œ from æ˜¯å¿…é¡»è¦æœ‰çš„ï¼Œå…¶ä»–çš„å¯é€‰</span></span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">        æ¡ä»¶åˆ—è¡¨[]</span><br><span class="line"><span class="keyword">GROUP</span>  <span class="keyword">BY</span></span><br><span class="line">        åˆ†ç»„å­—æ®µåˆ—è¡¨[]</span><br><span class="line"><span class="keyword">HAVING</span></span><br><span class="line">        åˆ†ç»„åæ¡ä»¶åˆ—è¡¨[]</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">        æ’åºå­—æ®µåˆ—è¡¨[]</span><br><span class="line">LIMIT</span><br><span class="line">        åˆ†é¡µå‚æ•°</span><br></pre></td></tr></table></figure><h4 id="åŸºæœ¬æŸ¥è¯¢"><a class="markdownIt-Anchor" href="#åŸºæœ¬æŸ¥è¯¢"></a> åŸºæœ¬æŸ¥è¯¢</h4><p>åœ¨åŸºæœ¬æŸ¥è¯¢çš„DQLè¯­å¥ä¸­ï¼Œä¸å¸¦ä»»ä½•çš„æŸ¥è¯¢æ¡ä»¶ã€‚</p><p><strong>è¯­æ³•å¦‚ä¸‹ï¼š</strong></p><ul><li>æŸ¥è¯¢å¤šä¸ªå­—æ®µ</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> å­—æ®µ<span class="number">1</span>, å­—æ®µ<span class="number">2</span>, å­—æ®µ<span class="number">3</span> <span class="keyword">from</span>  è¡¨å;</span><br></pre></td></tr></table></figure><ul><li>æŸ¥è¯¢æ‰€æœ‰å­—æ®µï¼ˆé€šé…ç¬¦ï¼‰</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span>  <span class="keyword">from</span>  è¡¨å;</span><br></pre></td></tr></table></figure><ul><li>è®¾ç½®åˆ«å</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> å­—æ®µ<span class="number">1</span> [ <span class="keyword">as</span> åˆ«å<span class="number">1</span> ] , å­—æ®µ<span class="number">2</span> [ <span class="keyword">as</span> åˆ«å<span class="number">2</span> ]  <span class="keyword">from</span>  è¡¨å;</span><br></pre></td></tr></table></figure><ul><li>å»é™¤é‡å¤è®°å½•</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> å­—æ®µåˆ—è¡¨ <span class="keyword">from</span>  è¡¨å;</span><br></pre></td></tr></table></figure><p><strong>æ¡ˆä¾‹æ¼”ç¤º:</strong></p><ul><li>æ¡ˆä¾‹1ï¼šæŸ¥è¯¢æŒ‡å®šå­—æ®µ nameï¼Œentry_dateå¹¶è¿”å›</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> name,entry_date <span class="keyword">from</span> emp;</span><br></pre></td></tr></table></figure><ul><li>æ¡ˆä¾‹2ï¼šæŸ¥è¯¢è¿”å›æ‰€æœ‰å­—æ®µ</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp;</span><br></pre></td></tr></table></figure><p><strong>* å·ä»£è¡¨æŸ¥è¯¢æ‰€æœ‰å­—æ®µï¼Œåœ¨å®é™…å¼€å‘ä¸­å°½é‡å°‘ç”¨ï¼ˆä¸ç›´è§‚ã€å½±å“æ•ˆç‡ï¼‰</strong></p><ul><li>æ¡ˆä¾‹3ï¼šæŸ¥è¯¢æ‰€æœ‰å‘˜å·¥çš„ name, entry_dateï¼Œå¹¶èµ·åˆ«å(å§“åã€å…¥èŒæ—¥æœŸ),ä¸ä¼šä¿®æ”¹åŸå…ˆè¡¨é¡¹ï¼Œåªæ˜¯ä¿®æ”¹è¿”å›æ—¶çš„æ•°æ®</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- æ–¹å¼1ï¼š</span></span><br><span class="line"><span class="keyword">select</span> name <span class="keyword">AS</span> å§“å, entry_date <span class="keyword">AS</span> å…¥èŒæ—¥æœŸ <span class="keyword">from</span> emp;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æ–¹å¼2ï¼š åˆ«åä¸­æœ‰ç‰¹æ®Šå­—ç¬¦æ—¶ï¼Œä½¿ç”¨&#x27;&#x27;æˆ–&quot;&quot;åŒ…å«</span></span><br><span class="line"><span class="keyword">select</span> name <span class="keyword">AS</span> <span class="string">&#x27;å§“ å&#x27;</span>, entry_date <span class="keyword">AS</span> <span class="string">&#x27;å…¥èŒæ—¥æœŸ&#x27;</span> <span class="keyword">from</span> emp;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æ–¹å¼3ï¼š</span></span><br><span class="line"><span class="keyword">select</span> name <span class="keyword">AS</span> å§“å, entry_date <span class="keyword">AS</span> å…¥èŒæ—¥æœŸ <span class="keyword">from</span> emp;</span><br></pre></td></tr></table></figure><ul><li>æ¡ˆä¾‹4ï¼šæŸ¥è¯¢å·²æœ‰çš„å‘˜å·¥å…±æœ‰å‡ ç§èŒä½(ä¸è¦é‡å¤)</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> job <span class="keyword">from</span> emp;</span><br></pre></td></tr></table></figure><hr /><h4 id="æ¡ä»¶æŸ¥è¯¢"><a class="markdownIt-Anchor" href="#æ¡ä»¶æŸ¥è¯¢"></a> æ¡ä»¶æŸ¥è¯¢</h4><p><strong>è¯­æ³•ï¼š</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span>  å­—æ®µåˆ—è¡¨  <span class="keyword">from</span>   è¡¨å   <span class="keyword">where</span>   æ¡ä»¶åˆ—è¡¨ ; <span class="comment">-- æ¡ä»¶åˆ—è¡¨ï¼šæ„å‘³ç€å¯ä»¥æœ‰å¤šä¸ªæ¡ä»¶</span></span><br></pre></td></tr></table></figure><p>å­¦ä¹ æ¡ä»¶æŸ¥è¯¢å°±æ˜¯å­¦ä¹ æ¡ä»¶çš„æ„å»ºæ–¹å¼ï¼Œè€Œåœ¨SQLè¯­å¥å½“ä¸­æ„é€ æ¡ä»¶çš„è¿ç®—ç¬¦åˆ†ä¸ºä¸¤ç±»ï¼š</p><ul><li>æ¯”è¾ƒè¿ç®—ç¬¦</li><li>é€»è¾‘è¿ç®—ç¬¦</li></ul><p>å¸¸ç”¨çš„æ¯”è¾ƒè¿ç®—ç¬¦å¦‚ä¸‹:</p><table><thead><tr><th>æ¯”è¾ƒè¿ç®—ç¬¦</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td>&gt;</td><td>å¤§äº</td></tr><tr><td>&gt;=</td><td>å¤§äºç­‰äº</td></tr><tr><td>&lt;</td><td>å°äº</td></tr><tr><td>&lt;=</td><td>å°äºç­‰äº</td></tr><tr><td>=</td><td>ç­‰äº</td></tr><tr><td>&lt;&gt; æˆ– !=</td><td>ä¸ç­‰äº</td></tr><tr><td>between â€¦ and â€¦</td><td>åœ¨æŸä¸ªèŒƒå›´ä¹‹å†…(å«æœ€å°ã€æœ€å¤§å€¼)</td></tr><tr><td>in(â€¦)</td><td>åœ¨inä¹‹åçš„åˆ—è¡¨ä¸­çš„å€¼ï¼Œå¤šé€‰ä¸€</td></tr><tr><td>like å ä½ç¬¦</td><td>æ¨¡ç³ŠåŒ¹é…(_åŒ¹é…å•ä¸ªå­—ç¬¦, %åŒ¹é…ä»»æ„ä¸ªå­—ç¬¦)</td></tr><tr><td>is null</td><td>æ˜¯null</td></tr></tbody></table><p>å¸¸ç”¨çš„é€»è¾‘è¿ç®—ç¬¦å¦‚ä¸‹:</p><table><thead><tr><th>é€»è¾‘è¿ç®—ç¬¦</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td>and æˆ– &amp;&amp;</td><td>å¹¶ä¸” (å¤šä¸ªæ¡ä»¶åŒæ—¶æˆç«‹)</td></tr><tr><td>or æˆ– ||</td><td>æˆ–è€… (å¤šä¸ªæ¡ä»¶ä»»æ„ä¸€ä¸ªæˆç«‹)</td></tr><tr><td>not æˆ– !</td><td>é , ä¸æ˜¯</td></tr></tbody></table><ul><li>æ¡ˆä¾‹1ï¼šæŸ¥è¯¢ å§“å ä¸º â€˜æ¨é€â€™ çš„å‘˜å·¥</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> id, username, password, name, gender, phone, salary, job, image, entry_date, create_time, update_time</span><br><span class="line"><span class="keyword">from</span> emp</span><br><span class="line"><span class="keyword">where</span> name <span class="operator">=</span> <span class="string">&#x27;æ¨é€&#x27;</span>; <span class="comment">-- å­—ç¬¦ä¸²ä½¿ç”¨&#x27;&#x27;æˆ–&quot;&quot;åŒ…å«</span></span><br></pre></td></tr></table></figure><ul><li>æ¡ˆä¾‹2ï¼šæŸ¥è¯¢ è–ªèµ„å°äºç­‰äº 5000 çš„å‘˜å·¥ä¿¡æ¯</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> id, username, password, name, gender, phone, salary, job, image, entry_date, create_time, update_time</span><br><span class="line"><span class="keyword">from</span> emp</span><br><span class="line"><span class="keyword">where</span> salary <span class="operator">&lt;=</span><span class="number">5000</span>;</span><br></pre></td></tr></table></figure><ul><li>æ¡ˆä¾‹3ï¼šæŸ¥è¯¢ æ²¡æœ‰åˆ†é…èŒä½ çš„å‘˜å·¥ä¿¡æ¯</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> id, username, password, name, gender, phone, salary, job, image, entry_date, create_time, update_time</span><br><span class="line"><span class="keyword">from</span> emp</span><br><span class="line"><span class="keyword">where</span> job <span class="keyword">is</span> <span class="keyword">null</span> ;</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šæŸ¥è¯¢ä¸ºNULLçš„æ•°æ®æ—¶ï¼Œä¸èƒ½ä½¿ç”¨ <code>= null</code> æˆ– <code>ï¼=null</code> ã€‚å¾—ä½¿ç”¨ <code>is null</code> æˆ– <code>is not null</code>ã€‚</p><ul><li>æ¡ˆä¾‹4ï¼šæŸ¥è¯¢ æœ‰èŒä½ çš„å‘˜å·¥ä¿¡æ¯</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> id, username, password, name, gender, phone, salary, job, image, entry_date, create_time, update_time</span><br><span class="line"><span class="keyword">from</span> emp</span><br><span class="line"><span class="keyword">where</span> job <span class="keyword">is</span> <span class="keyword">not null</span> ;</span><br></pre></td></tr></table></figure><ul><li>æ¡ˆä¾‹5ï¼šæŸ¥è¯¢ å¯†ç ä¸ç­‰äº â€˜123456â€™ çš„å‘˜å·¥ä¿¡æ¯</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- æ–¹å¼1ï¼š</span></span><br><span class="line"><span class="keyword">select</span> id, username, password, name, gender, phone, salary, job, image, entry_date, create_time, update_time</span><br><span class="line"><span class="keyword">from</span> emp</span><br><span class="line"><span class="keyword">where</span> password <span class="operator">&lt;&gt;</span> <span class="string">&#x27;123456&#x27;</span>;</span><br><span class="line"><span class="comment">-- æ–¹å¼2ï¼š</span></span><br><span class="line"><span class="keyword">select</span> id, username, password, name, gender, phone, salary, job, image, entry_date, create_time, update_time</span><br><span class="line"><span class="keyword">from</span> emp</span><br><span class="line"><span class="keyword">where</span> password <span class="operator">!=</span> <span class="string">&#x27;123456&#x27;</span>;</span><br></pre></td></tr></table></figure><ul><li>æ¡ˆä¾‹6ï¼šæŸ¥è¯¢ å…¥èŒæ—¥æœŸ åœ¨  â€˜2000-01-01â€™ (åŒ…å«)  åˆ°  â€˜2010-01-01â€™(åŒ…å«) ä¹‹é—´çš„å‘˜å·¥ä¿¡æ¯</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- æ–¹å¼1ï¼š</span></span><br><span class="line"><span class="keyword">select</span> id, username, password, name, gender, phone, salary, job, image, entry_date, create_time, update_time</span><br><span class="line"><span class="keyword">from</span> emp</span><br><span class="line"><span class="keyword">where</span> entry_date <span class="operator">&gt;=</span> <span class="string">&#x27;2000-01-01&#x27;</span> <span class="keyword">and</span> entry_date <span class="operator">&lt;=</span> <span class="string">&#x27;2010-01-01&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æ–¹å¼2ï¼š between...and</span></span><br><span class="line"><span class="keyword">select</span> id, username, password, name, gender, phone, salary, job, image, entry_date, create_time, update_time</span><br><span class="line"><span class="keyword">from</span> emp</span><br><span class="line"><span class="keyword">where</span> entry_date <span class="keyword">between</span> <span class="string">&#x27;2000-01-01&#x27;</span> <span class="keyword">and</span> <span class="string">&#x27;2010-01-01&#x27;</span>;</span><br></pre></td></tr></table></figure><ul><li>æ¡ˆä¾‹7ï¼šæŸ¥è¯¢ å…¥èŒæ—¶é—´ åœ¨ â€˜2000-01-01â€™ (åŒ…å«) åˆ° â€˜2010-01-01â€™(åŒ…å«) ä¹‹é—´ ä¸” æ€§åˆ«ä¸ºå¥³ çš„å‘˜å·¥ä¿¡æ¯</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> id, username, password, name, gender, phone, salary, job, image, entry_date, create_time, update_time</span><br><span class="line"><span class="keyword">from</span> emp</span><br><span class="line"><span class="keyword">where</span> entry_date <span class="keyword">between</span> <span class="string">&#x27;2000-01-01&#x27;</span> <span class="keyword">and</span> <span class="string">&#x27;2010-01-01&#x27;</span>;</span><br><span class="line">      <span class="keyword">and</span> gender <span class="operator">=</span> <span class="number">2</span>;</span><br></pre></td></tr></table></figure><ul><li>æ¡ˆä¾‹8ï¼šæŸ¥è¯¢ èŒä½æ˜¯ 2 (è®²å¸ˆ), 3 (å­¦å·¥ä¸»ç®¡), 4 (æ•™ç ”ä¸»ç®¡) çš„å‘˜å·¥ä¿¡æ¯</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- æ–¹å¼1ï¼šä½¿ç”¨orè¿æ¥å¤šä¸ªæ¡ä»¶</span></span><br><span class="line"><span class="keyword">select</span> id, username, password, name, gender, phone, salary, job, image, entry_date, create_time, update_time</span><br><span class="line"><span class="keyword">from</span> emp</span><br><span class="line"><span class="keyword">where</span> job<span class="operator">=</span><span class="number">2</span> <span class="keyword">or</span> job<span class="operator">=</span><span class="number">3</span> <span class="keyword">or</span> job<span class="operator">=</span><span class="number">4</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æ–¹å¼2ï¼šinå…³é”®å­—</span></span><br><span class="line"><span class="keyword">select</span> id, username, password, name, gender, phone, salary, job, image, entry_date, create_time, update_time</span><br><span class="line"><span class="keyword">from</span> emp</span><br><span class="line"><span class="keyword">where</span> job <span class="keyword">in</span> (<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>);</span><br></pre></td></tr></table></figure><ul><li>æ¡ˆä¾‹9ï¼šæŸ¥è¯¢ å§“å ä¸ºä¸¤ä¸ªå­—çš„å‘˜å·¥ä¿¡æ¯</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> id, username, password, name, gender, phone, salary, job, image, entry_date, create_time, update_time</span><br><span class="line"><span class="keyword">from</span> emp</span><br><span class="line"><span class="keyword">where</span> name <span class="keyword">like</span> <span class="string">&#x27;__&#x27;</span>;  # é€šé…ç¬¦ &quot;_&quot; ä»£è¡¨ä»»æ„<span class="number">1</span>ä¸ªå­—ç¬¦</span><br></pre></td></tr></table></figure><ul><li>æ¡ˆä¾‹10ï¼šæŸ¥è¯¢ å§“ â€˜å¼ â€™ çš„å‘˜å·¥ä¿¡æ¯</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> id, username, password, name, gender, phone, salary, job, image, entry_date, create_time, update_time</span><br><span class="line"><span class="keyword">from</span> emp</span><br><span class="line"><span class="keyword">where</span> name <span class="keyword">like</span> <span class="string">&#x27;å¼ %&#x27;</span>; # é€šé…ç¬¦ &quot;%&quot; ä»£è¡¨ä»»æ„ä¸ªå­—ç¬¦ï¼ˆ<span class="number">0</span>ä¸ª <span class="operator">~</span> å¤šä¸ªï¼‰</span><br></pre></td></tr></table></figure><ul><li>æ¡ˆä¾‹11ï¼šæŸ¥è¯¢ å§“åä¸­åŒ…å« â€˜äºŒâ€™  çš„å‘˜å·¥ä¿¡æ¯</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> id, username, password, name, gender, phone, salary, job, image, entry_date, create_time, update_time</span><br><span class="line"><span class="keyword">from</span> emp</span><br><span class="line"><span class="keyword">where</span> name <span class="keyword">like</span> <span class="string">&#x27;%äºŒ%&#x27;</span>; # é€šé…ç¬¦ &quot;%&quot; ä»£è¡¨ä»»æ„ä¸ªå­—ç¬¦ï¼ˆ<span class="number">0</span>ä¸ª <span class="operator">~</span> å¤šä¸ªï¼‰</span><br></pre></td></tr></table></figure><hr /><h4 id="èšåˆå‡½æ•°"><a class="markdownIt-Anchor" href="#èšåˆå‡½æ•°"></a> èšåˆå‡½æ•°</h4><p>ä¹‹å‰æˆ‘ä»¬åšçš„æŸ¥è¯¢éƒ½æ˜¯æ¨ªå‘æŸ¥è¯¢ï¼Œå°±æ˜¯æ ¹æ®æ¡ä»¶ä¸€è¡Œä¸€è¡Œçš„è¿›è¡Œåˆ¤æ–­ï¼Œè€Œä½¿ç”¨èšåˆå‡½æ•°æŸ¥è¯¢å°±æ˜¯çºµå‘æŸ¥è¯¢ï¼Œå®ƒæ˜¯å¯¹ä¸€åˆ—çš„å€¼è¿›è¡Œè®¡ç®—ï¼Œç„¶åè¿”å›ä¸€ä¸ªç»“æœå€¼ã€‚ï¼ˆå°†ä¸€åˆ—æ•°æ®ä½œä¸ºä¸€ä¸ªæ•´ä½“ï¼Œè¿›è¡Œçºµå‘è®¡ç®—ï¼‰</p><p>å¸¸ç”¨èšåˆå‡½æ•°ï¼š</p><table><thead><tr><th>å‡½æ•°</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td>count</td><td>ç»Ÿè®¡æ•°é‡</td></tr><tr><td>max</td><td>æœ€å¤§å€¼</td></tr><tr><td>min</td><td>æœ€å°å€¼</td></tr><tr><td>avg</td><td>å¹³å‡å€¼</td></tr><tr><td>sum</td><td>æ±‚å’Œ</td></tr></tbody></table><p>æ³¨æ„ : èšåˆå‡½æ•°ä¼šå¿½ç•¥ç©ºå€¼ï¼Œå¯¹NULLå€¼ä¸ä½œä¸ºç»Ÿè®¡ã€‚</p><ul><li>count ï¼šæŒ‰ç…§åˆ—å»ç»Ÿè®¡æœ‰å¤šå°‘è¡Œæ•°æ®ã€‚<ul><li>åœ¨æ ¹æ®æŒ‡å®šçš„åˆ—ç»Ÿè®¡çš„æ—¶å€™ï¼Œ<strong>å¦‚æœè¿™ä¸€åˆ—ä¸­æœ‰nullçš„è¡Œï¼Œè¯¥è¡Œä¸ä¼šè¢«ç»Ÿè®¡åœ¨å…¶ä¸­ã€‚</strong></li></ul></li><li>sum ï¼šè®¡ç®—æŒ‡å®šåˆ—çš„æ•°å€¼å’Œï¼Œå¦‚æœä¸æ˜¯æ•°å€¼ç±»å‹ï¼Œé‚£ä¹ˆè®¡ç®—ç»“æœä¸º0</li><li>max ï¼šè®¡ç®—æŒ‡å®šåˆ—çš„æœ€å¤§å€¼</li><li>min ï¼šè®¡ç®—æŒ‡å®šåˆ—çš„æœ€å°å€¼</li><li>avg ï¼šè®¡ç®—æŒ‡å®šåˆ—çš„å¹³å‡å€¼</li></ul><p><strong>æ¡ˆä¾‹æ¼”ç¤º:</strong></p><ul><li>æ¡ˆä¾‹1ï¼šç»Ÿè®¡è¯¥ä¼ä¸šå‘˜å·¥æ•°é‡</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- count(å­—æ®µ)</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(id) <span class="keyword">from</span> emp;<span class="comment">-- ç»“æœï¼š30</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(job) <span class="keyword">from</span> emp;<span class="comment">-- ç»“æœï¼š29 ï¼ˆèšåˆå‡½æ•°å¯¹NULLå€¼ä¸åšè®¡ç®—ï¼‰</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- count(å¸¸é‡)</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="number">0</span>) <span class="keyword">from</span> emp;</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="string">&#x27;A&#x27;</span>) <span class="keyword">from</span> emp;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- count(*)  æ¨èæ­¤å†™æ³•ï¼ˆMySQLåº•å±‚è¿›è¡Œäº†ä¼˜åŒ–ï¼‰</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> emp;</span><br><span class="line"><span class="comment">-- ä¼˜å…ˆæ¨ècount(*) å…¶æ¬¡æ˜¯count(å¸¸é‡) æœ€åæ˜¯ count(å­—æ®µ)</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>æ¡ˆä¾‹2ï¼šç»Ÿè®¡è¯¥ä¼ä¸šå‘˜å·¥çš„å¹³å‡è–ªèµ„</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">avg</span>(salary) <span class="keyword">from</span>  emp;</span><br></pre></td></tr></table></figure><ul><li>æ¡ˆä¾‹3ï¼šç»Ÿè®¡è¯¥ä¼ä¸šå‘˜å·¥çš„æœ€ä½è–ªèµ„</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">min</span>(salary) <span class="keyword">from</span> emp;</span><br></pre></td></tr></table></figure><ul><li>æ¡ˆä¾‹4ï¼šç»Ÿè®¡è¯¥ä¼ä¸šå‘˜å·¥çš„æœ€é«˜è–ªèµ„</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">max</span>(salary) <span class="keyword">from</span> emp;</span><br></pre></td></tr></table></figure><ul><li>æ¡ˆä¾‹5ï¼šç»Ÿè®¡è¯¥ä¼ä¸šæ¯æœˆè¦ç»™å‘˜å·¥å‘æ”¾çš„è–ªèµ„æ€»é¢(è–ªèµ„ä¹‹å’Œ)</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">sum</span>(salary) <span class="keyword">from</span> emp;</span><br></pre></td></tr></table></figure><hr /><h4 id="åˆ†ç»„æŸ¥è¯¢"><a class="markdownIt-Anchor" href="#åˆ†ç»„æŸ¥è¯¢"></a> åˆ†ç»„æŸ¥è¯¢</h4><ul><li>åˆ†ç»„ï¼š æŒ‰ç…§æŸä¸€åˆ—æˆ–è€…æŸå‡ åˆ—ï¼ŒæŠŠç›¸åŒçš„æ•°æ®è¿›è¡Œåˆå¹¶è¾“å‡ºã€‚<ul><li>åˆ†ç»„å…¶å®å°±æ˜¯æŒ‰åˆ—è¿›è¡Œåˆ†ç±»(æŒ‡å®šåˆ—ä¸‹ç›¸åŒçš„æ•°æ®å½’ä¸ºä¸€ç±»)ï¼Œç„¶åå¯ä»¥å¯¹åˆ†ç±»å®Œçš„æ•°æ®è¿›è¡Œåˆå¹¶è®¡ç®—ã€‚</li><li>åˆ†ç»„æŸ¥è¯¢é€šå¸¸ä¼šä½¿ç”¨èšåˆå‡½æ•°è¿›è¡Œè®¡ç®—ã€‚</li></ul></li></ul><p><strong>è¯­æ³•ï¼š</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span>  å­—æ®µåˆ—è¡¨  <span class="keyword">from</span>  è¡¨å  [<span class="keyword">where</span> æ¡ä»¶]  <span class="keyword">group</span> <span class="keyword">by</span> åˆ†ç»„å­—æ®µå  [<span class="keyword">having</span> åˆ†ç»„åè¿‡æ»¤æ¡ä»¶];</span><br><span class="line"><span class="comment">-- åˆ†ç»„ä¹‹åï¼Œselectåçš„å­—æ®µåˆ—è¡¨ä¸èƒ½éšæ„ä¹¦å†™ï¼Œèƒ½å†™çš„ä¸€èˆ¬æ˜¯åˆ†ç»„å­—æ®µ+èšåˆå‡½æ•°ã€‚</span></span><br></pre></td></tr></table></figure><p><strong>æ¡ˆä¾‹æ¼”ç¤ºï¼š</strong></p><ul><li>æ¡ˆä¾‹1ï¼šæ ¹æ®æ€§åˆ«åˆ†ç»„ , ç»Ÿè®¡ç”·æ€§å’Œå¥³æ€§å‘˜å·¥çš„æ•°é‡</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> gender, <span class="built_in">count</span>(<span class="operator">*</span>)</span><br><span class="line"><span class="keyword">from</span> emp</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> gender; <span class="comment">-- æŒ‰ç…§genderå­—æ®µè¿›è¡Œåˆ†ç»„ï¼ˆgenderå­—æ®µä¸‹ç›¸åŒçš„æ•°æ®å½’ä¸ºä¸€ç»„ï¼‰</span></span><br></pre></td></tr></table></figure><ul><li>æ¡ˆä¾‹2ï¼šæŸ¥è¯¢å…¥èŒæ—¶é—´åœ¨ â€˜2015-01-01â€™ (åŒ…å«) ä»¥å‰çš„å‘˜å·¥ , å¹¶å¯¹ç»“æœæ ¹æ®èŒä½åˆ†ç»„ , è·å–å‘˜å·¥æ•°é‡å¤§äºç­‰äº2çš„èŒä½</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> job, <span class="built_in">count</span>(<span class="operator">*</span>)</span><br><span class="line"><span class="keyword">from</span> emp</span><br><span class="line"><span class="keyword">where</span> entry_date <span class="operator">&lt;=</span> <span class="string">&#x27;2015-01-01&#x27;</span>   <span class="comment">-- åˆ†ç»„å‰æ¡ä»¶</span></span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> job                      <span class="comment">-- æŒ‰ç…§jobå­—æ®µåˆ†ç»„</span></span><br><span class="line"><span class="keyword">having</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="operator">&gt;=</span> <span class="number">2</span>;             <span class="comment">-- åˆ†ç»„åæ¡ä»¶</span></span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„äº‹é¡¹:</strong></p><ul><li>åˆ†ç»„ä¹‹åï¼ŒæŸ¥è¯¢çš„å­—æ®µä¸€èˆ¬ä¸ºèšåˆå‡½æ•°å’Œåˆ†ç»„å­—æ®µï¼ŒæŸ¥è¯¢å…¶ä»–å­—æ®µæ— ä»»ä½•æ„ä¹‰</li><li>æ‰§è¡Œé¡ºåºï¼šwhere &gt; èšåˆå‡½æ•° &gt; having</li><li>æ‰€ä»¥whereä¹‹åä¸èƒ½æ‰§è¡Œèšåˆå‡½æ•°</li></ul><p><strong>whereä¸havingåŒºåˆ«ï¼ˆé¢è¯•é¢˜ï¼‰</strong></p><ul><li>æ‰§è¡Œæ—¶æœºä¸åŒï¼šwhereæ˜¯åˆ†ç»„ä¹‹å‰è¿›è¡Œè¿‡æ»¤ï¼Œä¸æ»¡è¶³whereæ¡ä»¶ï¼Œä¸å‚ä¸åˆ†ç»„ï¼›è€Œhavingæ˜¯åˆ†ç»„ä¹‹åå¯¹ç»“æœè¿›è¡Œè¿‡æ»¤ã€‚</li><li>åˆ¤æ–­æ¡ä»¶ä¸åŒï¼šwhereä¸èƒ½å¯¹èšåˆå‡½æ•°è¿›è¡Œåˆ¤æ–­ï¼Œè€Œhavingå¯ä»¥ã€‚</li></ul><hr /><h4 id="æ’æŸ¥æŸ¥è¯¢"><a class="markdownIt-Anchor" href="#æ’æŸ¥æŸ¥è¯¢"></a> æ’æŸ¥æŸ¥è¯¢</h4><p>æ’åºåœ¨æ—¥å¸¸å¼€å‘ä¸­æ˜¯éå¸¸å¸¸è§çš„ä¸€ä¸ªæ“ä½œï¼Œæœ‰å‡åºæ’åºï¼Œä¹Ÿæœ‰é™åºæ’åºã€‚</p><p><strong>è¯­æ³•ï¼š</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span>  å­—æ®µåˆ—è¡¨  </span><br><span class="line"><span class="keyword">from</span>   è¡¨å   </span><br><span class="line">[<span class="keyword">where</span>  æ¡ä»¶åˆ—è¡¨] </span><br><span class="line">[<span class="keyword">group</span> <span class="keyword">by</span>  åˆ†ç»„å­—æ®µ ] </span><br><span class="line"><span class="keyword">order</span>  <span class="keyword">by</span>  å­—æ®µ<span class="number">1</span>  æ’åºæ–¹å¼<span class="number">1</span> , å­—æ®µ<span class="number">2</span>  æ’åºæ–¹å¼<span class="number">2</span> â€¦ ;</span><br></pre></td></tr></table></figure><ul><li>æ’åºæ–¹å¼ï¼š<ul><li>ASC ï¼šå‡åºï¼ˆé»˜è®¤å€¼ï¼‰</li><li>DESCï¼šé™åº</li></ul></li></ul><p><strong>æ¡ˆä¾‹æ¼”ç¤ºï¼š</strong></p><ul><li>æ¡ˆä¾‹1ï¼šæ ¹æ®å…¥èŒæ—¶é—´, å¯¹å‘˜å·¥è¿›è¡Œå‡åºæ’åº</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> id, username, password, name, gender, phone, salary, job, image, entry_date, create_time, update_time</span><br><span class="line"><span class="keyword">from</span> emp</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> entry_date <span class="keyword">ASC</span>; <span class="comment">-- æŒ‰ç…§entrydateå­—æ®µä¸‹çš„æ•°æ®è¿›è¡Œå‡åºæ’åº</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> id, username, password, name, gender, phone, salary, job, image, entry_date, create_time, update_time</span><br><span class="line"><span class="keyword">from</span> emp</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span>  entry_date; <span class="comment">-- é»˜è®¤å°±æ˜¯ASCï¼ˆå‡åºï¼‰</span></span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„äº‹é¡¹ï¼šå¦‚æœæ˜¯å‡åº, å¯ä»¥ä¸æŒ‡å®šæ’åºæ–¹å¼ASC</strong></p><ul><li>æ¡ˆä¾‹2ï¼šæ ¹æ®å…¥èŒæ—¶é—´ï¼Œå¯¹å‘˜å·¥è¿›è¡Œé™åºæ’åº</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> id, username, password, name, gender, phone, salary, job, image, entry_date, create_time, update_time</span><br><span class="line"><span class="keyword">from</span> emp</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> entry_date <span class="keyword">DESC</span>; <span class="comment">-- æŒ‰ç…§entrydateå­—æ®µä¸‹çš„æ•°æ®è¿›è¡Œé™åºæ’åº</span></span><br></pre></td></tr></table></figure><ul><li>æ¡ˆä¾‹3ï¼šæ ¹æ®å…¥èŒæ—¶é—´å¯¹å…¬å¸çš„å‘˜å·¥è¿›è¡Œå‡åºæ’åºï¼Œå…¥èŒæ—¶é—´ç›¸åŒï¼Œå†æŒ‰ç…§æ›´æ–°æ—¶é—´è¿›è¡Œé™åºæ’åº</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> id, username, password, name, gender, phone, salary, job, image, entry_date, create_time, update_time</span><br><span class="line"><span class="keyword">from</span> emp</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> entry_date <span class="keyword">ASC</span> , update_time <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„äº‹é¡¹ï¼šå¦‚æœæ˜¯å¤šå­—æ®µæ’åºï¼Œå½“ç¬¬ä¸€ä¸ªå­—æ®µå€¼ç›¸åŒæ—¶ï¼Œæ‰ä¼šæ ¹æ®ç¬¬äºŒä¸ªå­—æ®µè¿›è¡Œæ’åº</strong></p><hr /><h4 id="åˆ†é¡µæŸ¥è¯¢"><a class="markdownIt-Anchor" href="#åˆ†é¡µæŸ¥è¯¢"></a> åˆ†é¡µæŸ¥è¯¢</h4><p>åˆ†é¡µæ“ä½œåœ¨ä¸šåŠ¡ç³»ç»Ÿå¼€å‘æ—¶ï¼Œä¹Ÿæ˜¯éå¸¸å¸¸è§çš„ä¸€ä¸ªåŠŸèƒ½ï¼Œæ—¥å¸¸æˆ‘ä»¬åœ¨ç½‘ç«™ä¸­çœ‹åˆ°çš„å„ç§å„æ ·çš„åˆ†é¡µæ¡ï¼Œåå°ä¹Ÿéƒ½éœ€è¦å€ŸåŠ©äºæ•°æ®åº“çš„åˆ†é¡µæ“ä½œã€‚</p><p>åˆ†é¡µæŸ¥è¯¢è¯­æ³•ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span>  å­—æ®µåˆ—è¡¨  <span class="keyword">from</span>  è¡¨å  limit  èµ·å§‹ç´¢å¼•, æŸ¥è¯¢è®°å½•æ•° ;</span><br></pre></td></tr></table></figure><ul><li>æ¡ˆä¾‹1ï¼šä»èµ·å§‹ç´¢å¼•0å¼€å§‹æŸ¥è¯¢å‘˜å·¥æ•°æ®, æ¯é¡µå±•ç¤º5æ¡è®°å½•</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> id, username, password, name, gender, phone, salary, job, image, entry_date, create_time, update_time</span><br><span class="line"><span class="keyword">from</span> emp</span><br><span class="line">limit <span class="number">0</span> , <span class="number">5</span>; <span class="comment">-- ä»ç´¢å¼•0å¼€å§‹ï¼Œå‘åå–5æ¡è®°å½•</span></span><br></pre></td></tr></table></figure><ul><li>æ¡ˆä¾‹2ï¼šæŸ¥è¯¢ ç¬¬1é¡µ å‘˜å·¥æ•°æ®, æ¯é¡µå±•ç¤º5æ¡è®°å½•</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> id, username, password, name, gender, phone, salary, job, image, entry_date, create_time, update_time</span><br><span class="line"><span class="keyword">from</span> emp</span><br><span class="line">limit <span class="number">5</span>; <span class="comment">-- å¦‚æœæŸ¥è¯¢çš„æ˜¯ç¬¬1é¡µæ•°æ®ï¼Œèµ·å§‹ç´¢å¼•å¯ä»¥çœç•¥ï¼Œç›´æ¥ç®€å†™ä¸ºï¼šlimit æ¡æ•°</span></span><br></pre></td></tr></table></figure><ul><li>æ¡ˆä¾‹3ï¼šæŸ¥è¯¢ ç¬¬2é¡µ å‘˜å·¥æ•°æ®, æ¯é¡µå±•ç¤º5æ¡è®°å½•</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> id, username, password, name, gender, phone, salary, job, image, entry_date, create_time, update_time</span><br><span class="line"><span class="keyword">from</span> emp</span><br><span class="line">limit <span class="number">5</span> , <span class="number">5</span>; <span class="comment">-- ä»ç´¢å¼•5å¼€å§‹ï¼Œå‘åå–5æ¡è®°å½•</span></span><br></pre></td></tr></table></figure><ul><li>æ¡ˆä¾‹4ï¼šæŸ¥è¯¢ ç¬¬3é¡µ å‘˜å·¥æ•°æ®, æ¯é¡µå±•ç¤º5æ¡è®°å½•</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> id, username, password, name, gender, phone, salary, job, image, entry_date, create_time, update_time</span><br><span class="line"><span class="keyword">from</span> emp</span><br><span class="line">limit <span class="number">10</span> , <span class="number">5</span>; <span class="comment">-- ä»ç´¢å¼•10å¼€å§‹ï¼Œå‘åå–5æ¡è®°å½•</span></span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„äº‹é¡¹:</strong></p><ol><li>èµ·å§‹ç´¢å¼•ä»0å¼€å§‹ã€‚           è®¡ç®—å…¬å¼ ï¼šèµ·å§‹ç´¢å¼• = ï¼ˆæŸ¥è¯¢é¡µç  - 1ï¼‰* æ¯é¡µæ˜¾ç¤ºè®°å½•æ•°</li><li>åˆ†é¡µæŸ¥è¯¢æ˜¯æ•°æ®åº“çš„æ–¹è¨€ï¼Œä¸åŒçš„æ•°æ®åº“æœ‰ä¸åŒçš„å®ç°ï¼ŒMySQLä¸­æ˜¯LIMIT</li><li>å¦‚æœæŸ¥è¯¢çš„æ˜¯ç¬¬ä¸€é¡µæ•°æ®ï¼Œèµ·å§‹ç´¢å¼•å¯ä»¥çœç•¥ï¼Œç›´æ¥ç®€å†™ä¸º limit  æ¡æ•°</li></ol><hr /><h4 id="å¤šè¡¨æŸ¥è¯¢"><a class="markdownIt-Anchor" href="#å¤šè¡¨æŸ¥è¯¢"></a> å¤šè¡¨æŸ¥è¯¢</h4><p>å¤šè¡¨æŸ¥è¯¢ï¼šæŸ¥è¯¢æ—¶ä»å¤šå¼ è¡¨ä¸­è·å–æ‰€éœ€æ•°æ®</p><blockquote><p>å•è¡¨æŸ¥è¯¢çš„SQLè¯­å¥ï¼šselect  å­—æ®µåˆ—è¡¨  from  è¡¨å;</p><p>é‚£ä¹ˆè¦æ‰§è¡Œå¤šè¡¨æŸ¥è¯¢ï¼Œåªéœ€è¦ä½¿ç”¨é€—å·åˆ†éš”å¤šå¼ è¡¨å³å¯ï¼Œå¦‚ï¼š select   å­—æ®µåˆ—è¡¨  from  è¡¨1, è¡¨2;</p></blockquote><p>æŸ¥è¯¢ç”¨æˆ·è¡¨å’Œéƒ¨é—¨è¡¨ä¸­çš„æ•°æ®ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span>  emp , dept;</span><br></pre></td></tr></table></figure><p>åœ¨SQLè¯­å¥ä¸­ï¼Œå¦‚ä½•å»é™¤æ— æ•ˆçš„ç¬›å¡å°”ç§¯å‘¢ï¼Ÿåªéœ€è¦ç»™å¤šè¡¨æŸ¥è¯¢åŠ ä¸Šè¿æ¥æŸ¥è¯¢çš„æ¡ä»¶å³å¯ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp , dept <span class="keyword">where</span> emp.dept_id <span class="operator">=</span> dept.id ;</span><br></pre></td></tr></table></figure><h5 id="åˆ†ç±»"><a class="markdownIt-Anchor" href="#åˆ†ç±»"></a> åˆ†ç±»</h5><p>å¤šè¡¨æŸ¥è¯¢å¯ä»¥åˆ†ä¸ºï¼š</p><ol><li>è¿æ¥æŸ¥è¯¢<ol><li>å†…è¿æ¥ï¼šç›¸å½“äºæŸ¥è¯¢Aã€Bäº¤é›†éƒ¨åˆ†æ•°æ®</li><li>å¤–è¿æ¥<ul><li>å·¦å¤–è¿æ¥ï¼šæŸ¥è¯¢å·¦è¡¨æ‰€æœ‰æ•°æ®(åŒ…æ‹¬ä¸¤å¼ è¡¨äº¤é›†éƒ¨åˆ†æ•°æ®)</li><li>å³å¤–è¿æ¥ï¼šæŸ¥è¯¢å³è¡¨æ‰€æœ‰æ•°æ®(åŒ…æ‹¬ä¸¤å¼ è¡¨äº¤é›†éƒ¨åˆ†æ•°æ®)</li></ul></li></ol></li><li>å­æŸ¥è¯¢</li></ol><hr /><h5 id="å†…è¿æ¥"><a class="markdownIt-Anchor" href="#å†…è¿æ¥"></a> å†…è¿æ¥</h5><p>å†…è¿æ¥æŸ¥è¯¢ï¼šæŸ¥è¯¢ä¸¤è¡¨æˆ–å¤šè¡¨ä¸­äº¤é›†éƒ¨åˆ†æ•°æ®ã€‚</p><p>å†…è¿æ¥ä»è¯­æ³•ä¸Šå¯ä»¥åˆ†ä¸ºï¼š</p><ul><li>éšå¼å†…è¿æ¥</li><li>æ˜¾å¼å†…è¿æ¥</li></ul><p><strong>éšå¼å†…è¿æ¥è¯­æ³•ï¼š</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span>  å­—æ®µåˆ—è¡¨   <span class="keyword">from</span>   è¡¨<span class="number">1</span> , è¡¨<span class="number">2</span>   <span class="keyword">where</span>  æ¡ä»¶ ... ;</span><br></pre></td></tr></table></figure><p><strong>æ˜¾å¼å†…è¿æ¥è¯­æ³•ï¼š</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span>  å­—æ®µåˆ—è¡¨   <span class="keyword">from</span>   è¡¨<span class="number">1</span>  [ <span class="keyword">inner</span> ]  <span class="keyword">join</span> è¡¨<span class="number">2</span>  <span class="keyword">on</span>  è¿æ¥æ¡ä»¶ ... ;</span><br></pre></td></tr></table></figure><ul><li><p>æ¡ˆä¾‹1ï¼šæŸ¥è¯¢æ‰€æœ‰å‘˜å·¥çš„IDï¼Œå§“åï¼ŒåŠæ‰€å±çš„éƒ¨é—¨åç§°</p><ul><li><p>éšå¼å†…è¿æ¥å®ç°</p></li><li><pre class="highlight"><code class="SQL">  <span class="keyword">select</span> emp.id, emp.name, dept.name <span class="keyword">from</span> emp , dept <span class="keyword">where</span> emp.dept_id <span class="operator">=</span> dept.id;  <span class="operator">&lt;</span><span class="operator">!</span><span class="comment">--codeï¿¼72--&gt;</span></code></pre></li><li></li></ul></li><li><p>æ¡ˆä¾‹2ï¼šæŸ¥è¯¢ æ€§åˆ«ä¸ºç”·, ä¸”å·¥èµ„ é«˜äº8000 çš„å‘˜å·¥çš„ID, å§“å, åŠæ‰€å±çš„éƒ¨é—¨åç§°</p><ul><li><p>éšå¼å†…è¿æ¥å®ç°</p></li><li><pre class="highlight"><code class="SQL">  <span class="keyword">select</span> emp.id, emp.name, dept.name <span class="keyword">from</span> emp , dept <span class="keyword">where</span> emp.dept_id <span class="operator">=</span> dept.id <span class="keyword">and</span> emp.gender <span class="operator">=</span> <span class="number">1</span> <span class="keyword">and</span> emp.salary <span class="operator">&gt;</span> <span class="number">8000</span>;  <span class="operator">&lt;</span><span class="operator">!</span><span class="comment">--codeï¿¼73--&gt;</span></code></pre></li><li><p>åœ¨å¤šè¡¨è”æŸ¥æ—¶ï¼Œæˆ‘ä»¬æŒ‡å®šå­—æ®µæ—¶ï¼Œéœ€è¦åœ¨å­—æ®µåå‰é¢åŠ ä¸Šè¡¨åï¼Œæ¥æŒ‡å®šå…·ä½“æ˜¯å“ªä¸€å¼ çš„å­—æ®µã€‚ å¦‚ï¼šemp.dept_id</p></li><li></li></ul></li></ul><p><strong>ç»™è¡¨èµ·åˆ«åç®€åŒ–ä¹¦å†™ï¼š</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span>  å­—æ®µåˆ—è¡¨ <span class="keyword">from</span> è¡¨<span class="number">1</span> <span class="keyword">as</span> åˆ«å<span class="number">1</span> , è¡¨<span class="number">2</span> <span class="keyword">as</span>  åˆ«å<span class="number">2</span>  <span class="keyword">where</span>  æ¡ä»¶ ... ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span>  å­—æ®µåˆ—è¡¨ <span class="keyword">from</span> è¡¨<span class="number">1</span> åˆ«å<span class="number">1</span> , è¡¨<span class="number">2</span>  åˆ«å<span class="number">2</span>  <span class="keyword">where</span>  æ¡ä»¶ ... ;  <span class="comment">-- as å¯ä»¥çœç•¥</span></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨äº†åˆ«åçš„å¤šè¡¨æŸ¥è¯¢ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> e.id, e.name, d.name <span class="keyword">from</span> emp <span class="keyword">as</span> e , dept <span class="keyword">as</span> d <span class="keyword">where</span> e.dept_id <span class="operator">=</span> d.id <span class="keyword">and</span> e.gender <span class="operator">=</span> <span class="number">1</span> <span class="keyword">and</span> e.salary <span class="operator">&gt;</span> <span class="number">8000</span>;</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„äº‹é¡¹:</strong> ä¸€æ—¦ä¸ºè¡¨èµ·äº†åˆ«åï¼Œå°±ä¸èƒ½å†ä½¿ç”¨è¡¨åæ¥æŒ‡å®šå¯¹åº”çš„å­—æ®µäº†ï¼Œæ­¤æ—¶åªèƒ½å¤Ÿä½¿ç”¨åˆ«åæ¥æŒ‡å®šå­—æ®µã€‚<strong>åˆ«åä»…è¿™ä¸€æ¡sqlè¯­å¥æœ‰æ•ˆã€‚</strong></p><hr /><h5 id="å¤–è¿æ¥"><a class="markdownIt-Anchor" href="#å¤–è¿æ¥"></a> å¤–è¿æ¥</h5><p>å¤–è¿æ¥åˆ†ä¸ºä¸¤ç§ï¼šå·¦å¤–è¿æ¥ å’Œ å³å¤–è¿æ¥ã€‚</p><p><strong>å·¦å¤–è¿æ¥è¯­æ³•ï¼š</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span>  å­—æ®µåˆ—è¡¨   <span class="keyword">from</span>   è¡¨<span class="number">1</span>  <span class="keyword">left</span>  [ <span class="keyword">outer</span> ]  <span class="keyword">join</span> è¡¨<span class="number">2</span>  <span class="keyword">on</span>  è¿æ¥æ¡ä»¶ ... ;</span><br></pre></td></tr></table></figure><p>å·¦å¤–è¿æ¥ç›¸å½“äºæŸ¥è¯¢è¡¨1(å·¦è¡¨)çš„æ‰€æœ‰æ•°æ®ï¼Œå½“ç„¶ä¹ŸåŒ…å«è¡¨1å’Œè¡¨2äº¤é›†éƒ¨åˆ†çš„æ•°æ®ã€‚</p><p><strong>å³å¤–è¿æ¥è¯­æ³•ï¼š</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span>  å­—æ®µåˆ—è¡¨   <span class="keyword">from</span>   è¡¨<span class="number">1</span>  <span class="keyword">right</span>  [ <span class="keyword">outer</span> ]  <span class="keyword">join</span> è¡¨<span class="number">2</span>  <span class="keyword">on</span>  è¿æ¥æ¡ä»¶ ... ;</span><br></pre></td></tr></table></figure><p>å³å¤–è¿æ¥ç›¸å½“äºæŸ¥è¯¢è¡¨2(å³è¡¨)çš„æ‰€æœ‰æ•°æ®ï¼Œå½“ç„¶ä¹ŸåŒ…å«è¡¨1å’Œè¡¨2äº¤é›†éƒ¨åˆ†çš„æ•°æ®ã€‚</p><p>æ¡ˆä¾‹1ï¼šæŸ¥è¯¢å‘˜å·¥è¡¨ æ‰€æœ‰ å‘˜å·¥çš„å§“å, å’Œå¯¹åº”çš„éƒ¨é—¨åç§° (å·¦å¤–è¿æ¥)</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- å·¦å¤–è¿æ¥ï¼šä»¥left joinå…³é”®å­—å·¦è¾¹çš„è¡¨ä¸ºä¸»è¡¨ï¼ŒæŸ¥è¯¢ä¸»è¡¨ä¸­æ‰€æœ‰æ•°æ®ï¼Œä»¥åŠå’Œä¸»è¡¨åŒ¹é…çš„å³è¾¹è¡¨ä¸­çš„æ•°æ®</span></span><br><span class="line"><span class="keyword">select</span> e.name , d.name  <span class="keyword">from</span> emp <span class="keyword">as</span> e <span class="keyword">left</span> <span class="keyword">join</span> dept <span class="keyword">as</span> d <span class="keyword">on</span> e.dept_id <span class="operator">=</span> d.id ;</span><br></pre></td></tr></table></figure><p>æ¡ˆä¾‹2ï¼šæŸ¥è¯¢éƒ¨é—¨è¡¨ æ‰€æœ‰ éƒ¨é—¨çš„åç§°, å’Œå¯¹åº”çš„å‘˜å·¥åç§° (å³å¤–è¿æ¥)</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- å³å¤–è¿æ¥ï¼šä»¥right joinå…³é”®å­—å³è¾¹çš„è¡¨ä¸ºä¸»è¡¨ï¼ŒæŸ¥è¯¢ä¸»è¡¨ä¸­æ‰€æœ‰æ•°æ®ï¼Œä»¥åŠå’Œä¸»è¡¨åŒ¹é…çš„å·¦è¾¹è¡¨ä¸­çš„æ•°æ®</span></span><br><span class="line"><span class="keyword">select</span> e.name , d.name <span class="keyword">from</span> emp <span class="keyword">as</span> e <span class="keyword">right</span> <span class="keyword">join</span> dept <span class="keyword">as</span> d <span class="keyword">on</span> e.dept_id <span class="operator">=</span> d.id;</span><br></pre></td></tr></table></figure><p>æ¡ˆä¾‹3ï¼šæŸ¥è¯¢å·¥èµ„ é«˜äº8000 çš„ æ‰€æœ‰å‘˜å·¥çš„å§“å, å’Œå¯¹åº”çš„éƒ¨é—¨åç§° (å·¦å¤–è¿æ¥)</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> e.name , d.name  <span class="keyword">from</span> emp <span class="keyword">as</span> e <span class="keyword">left</span> <span class="keyword">join</span> dept <span class="keyword">as</span> d <span class="keyword">on</span> e.dept_id <span class="operator">=</span> d.id <span class="keyword">where</span> e.salary <span class="operator">&gt;</span> <span class="number">8000</span>;</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong></p><p>å·¦å¤–è¿æ¥å’Œå³å¤–è¿æ¥æ˜¯å¯ä»¥ç›¸äº’æ›¿æ¢çš„ï¼Œåªéœ€è¦è°ƒæ•´è¿æ¥æŸ¥è¯¢æ—¶SQLè¯­å¥ä¸­è¡¨çš„å…ˆåé¡ºåºå°±å¯ä»¥äº†ã€‚è€Œæˆ‘ä»¬åœ¨æ—¥å¸¸å¼€å‘ä½¿ç”¨æ—¶ï¼Œæ›´åå‘äºå·¦å¤–è¿æ¥ã€‚</p><hr /><h5 id="å­æŸ¥è¯¢"><a class="markdownIt-Anchor" href="#å­æŸ¥è¯¢"></a> å­æŸ¥è¯¢</h5><ol><li><h4 id="ä»‹ç»"><a class="markdownIt-Anchor" href="#ä»‹ç»"></a> ä»‹ç»</h4></li></ol><p>SQLè¯­å¥ä¸­åµŒå¥—selectè¯­å¥ï¼Œç§°ä¸ºåµŒå¥—æŸ¥è¯¢ï¼Œåˆç§°å­æŸ¥è¯¢ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span>  <span class="operator">*</span>  <span class="keyword">FROM</span>   t1   <span class="keyword">WHERE</span>  column1 <span class="operator">=</span>  ( <span class="keyword">SELECT</span>  column1  <span class="keyword">FROM</span>  t2 ... );</span><br></pre></td></tr></table></figure><p>å­æŸ¥è¯¢å¤–éƒ¨çš„è¯­å¥å¯ä»¥æ˜¯insert / update / delete / select çš„ä»»ä½•ä¸€ä¸ªï¼Œæœ€å¸¸è§çš„æ˜¯ selectã€‚</p><p>æ ¹æ®å­æŸ¥è¯¢ç»“æœçš„ä¸åŒåˆ†ä¸ºï¼š</p><ol><li>æ ‡é‡å­æŸ¥è¯¢ï¼ˆå­æŸ¥è¯¢ç»“æœä¸ºå•ä¸ªå€¼ [ä¸€è¡Œä¸€åˆ—]ï¼‰</li><li>åˆ—å­æŸ¥è¯¢ï¼ˆå­æŸ¥è¯¢ç»“æœä¸ºä¸€åˆ—ï¼Œä½†å¯ä»¥æ˜¯å¤šè¡Œï¼‰</li><li>è¡Œå­æŸ¥è¯¢ï¼ˆå­æŸ¥è¯¢ç»“æœä¸ºä¸€è¡Œï¼Œä½†å¯ä»¥æ˜¯å¤šåˆ—ï¼‰</li><li>è¡¨å­æŸ¥è¯¢ï¼ˆå­æŸ¥è¯¢ç»“æœä¸ºå¤šè¡Œå¤šåˆ—[ç›¸å½“äºå­æŸ¥è¯¢ç»“æœæ˜¯ä¸€å¼ è¡¨]ï¼‰</li></ol><p>å­æŸ¥è¯¢å¯ä»¥ä¹¦å†™çš„ä½ç½®ï¼š</p><ol><li>whereä¹‹å</li><li>fromä¹‹å</li><li>selectä¹‹å</li></ol><p>å­æŸ¥è¯¢çš„è¦ç‚¹æ˜¯ï¼Œå…ˆå¯¹éœ€æ±‚åšæ‹†åˆ†ï¼Œæ˜ç¡®å…·ä½“çš„æ­¥éª¤ï¼Œç„¶åå†é€æ¡ç¼–å†™SQLè¯­å¥ã€‚ æœ€ç»ˆå°†å¤šæ¡SQLè¯­å¥åˆå¹¶ä¸ºä¸€æ¡ã€‚</p><h6 id="æ ‡é‡å­æŸ¥è¯¢"><a class="markdownIt-Anchor" href="#æ ‡é‡å­æŸ¥è¯¢"></a> æ ‡é‡å­æŸ¥è¯¢</h6><p>å­æŸ¥è¯¢è¿”å›çš„ç»“æœæ˜¯å•ä¸ªå€¼(æ•°å­—ã€å­—ç¬¦ä¸²ã€æ—¥æœŸç­‰)ï¼Œæœ€ç®€å•çš„å½¢å¼ï¼Œè¿™ç§å­æŸ¥è¯¢ç§°ä¸º<strong>æ ‡é‡å­æŸ¥è¯¢</strong>ã€‚</p><p>å¸¸ç”¨çš„æ“ä½œç¬¦ï¼š =   &lt;&gt;   &gt;    &gt;=    &lt;   &lt;=</p><ul><li>æ¡ˆä¾‹1ï¼šæŸ¥è¯¢ æœ€æ—©å…¥èŒ çš„å‘˜å·¥ä¿¡æ¯</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1. æŸ¥è¯¢æœ€æ—©çš„å…¥èŒæ—¶é—´</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">min</span>(entry_date) <span class="keyword">from</span> emp;  <span class="comment">-- ç»“æœ: 2000-01-01</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2. æŸ¥è¯¢å…¥èŒæ—¶é—´ = æœ€æ—©å…¥èŒæ—¶é—´çš„å‘˜å·¥ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> entry_date <span class="operator">=</span> <span class="string">&#x27;2000-01-01&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 3. åˆå¹¶ä¸ºä¸€æ¡SQL</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> entry_date <span class="operator">=</span> (<span class="keyword">select</span> <span class="built_in">min</span>(entry_date) <span class="keyword">from</span> emp);</span><br></pre></td></tr></table></figure><ul><li>æ¡ˆä¾‹2ï¼šæŸ¥è¯¢åœ¨ é˜®å°äº” å…¥èŒä¹‹åå…¥èŒçš„å‘˜å·¥ä¿¡æ¯</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1. æŸ¥è¯¢ &quot;é˜®å°äº”&quot; çš„å…¥èŒæ—¥æœŸ</span></span><br><span class="line"><span class="keyword">select</span> entry_date <span class="keyword">from</span> emp <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">&#x27;é˜®å°äº”&#x27;</span>; <span class="comment">-- ç»“æœ: 2015-01-01</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2. æ ¹æ®ä¸Šè¿°æŸ¥è¯¢åˆ°çš„è¿™ä¸ªå…¥èŒæ—¥æœŸ, æŸ¥è¯¢åœ¨è¯¥æ—¥æœŸä¹‹åå…¥èŒçš„å‘˜å·¥ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> entry_date <span class="operator">&gt;</span> <span class="string">&#x27;2015-01-01&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 3. åˆå¹¶SQLä¸ºä¸€æ¡SQL</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> entry_date <span class="operator">&gt;</span> (<span class="keyword">select</span> entry_date <span class="keyword">from</span> emp <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">&#x27;é˜®å°äº”&#x27;</span>);</span><br></pre></td></tr></table></figure><h6 id="åˆ—å­æŸ¥è¯¢"><a class="markdownIt-Anchor" href="#åˆ—å­æŸ¥è¯¢"></a> åˆ—å­æŸ¥è¯¢</h6><p>å­æŸ¥è¯¢è¿”å›çš„ç»“æœæ˜¯ä¸€åˆ—(å¯ä»¥æ˜¯å¤šè¡Œ)ï¼Œè¿™ç§å­æŸ¥è¯¢ç§°ä¸ºåˆ—å­æŸ¥è¯¢ã€‚</p><p>å¸¸ç”¨çš„æ“ä½œç¬¦ï¼š</p><table><thead><tr><th>æ“ä½œç¬¦</th><th>æè¿°</th></tr></thead><tbody><tr><td>in</td><td>åœ¨æŒ‡å®šçš„é›†åˆèŒƒå›´ä¹‹å†…ï¼Œå¤šé€‰ä¸€</td></tr><tr><td>not in</td><td>ä¸åœ¨æŒ‡å®šçš„é›†åˆèŒƒå›´ä¹‹å†…</td></tr></tbody></table><ul><li>æ¡ˆä¾‹1ï¼šæŸ¥è¯¢ â€œæ•™ç ”éƒ¨â€ å’Œ â€œå’¨è¯¢éƒ¨â€ çš„æ‰€æœ‰å‘˜å·¥ä¿¡æ¯</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1. æŸ¥è¯¢ &quot;æ•™ç ”éƒ¨&quot; å’Œ &quot;å’¨è¯¢éƒ¨&quot; çš„éƒ¨é—¨ID</span></span><br><span class="line"><span class="keyword">select</span> id <span class="keyword">from</span> dept <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">&#x27;æ•™ç ”éƒ¨&#x27;</span> <span class="keyword">or</span> name <span class="operator">=</span> <span class="string">&#x27;å’¨è¯¢éƒ¨&#x27;</span>; <span class="comment">-- ç»“æœ: 3,2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2. æ ¹æ®ä¸Šé¢æŸ¥è¯¢å‡ºæ¥çš„éƒ¨é—¨ID, æŸ¥è¯¢å‘˜å·¥ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> dept_id <span class="keyword">in</span>(<span class="number">3</span>,<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 3. åˆå¹¶SQLä¸ºä¸€æ¡SQLè¯­å¥</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> dept_id <span class="keyword">in</span> (<span class="keyword">select</span> id <span class="keyword">from</span> dept <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">&#x27;æ•™ç ”éƒ¨&#x27;</span> <span class="keyword">or</span> name <span class="operator">=</span> <span class="string">&#x27;å’¨è¯¢éƒ¨&#x27;</span>);</span><br></pre></td></tr></table></figure><h6 id="è¡Œå­æŸ¥è¯¢"><a class="markdownIt-Anchor" href="#è¡Œå­æŸ¥è¯¢"></a> è¡Œå­æŸ¥è¯¢</h6><p>å­æŸ¥è¯¢è¿”å›çš„ç»“æœæ˜¯ä¸€è¡Œ(å¯ä»¥æ˜¯å¤šåˆ—)ï¼Œè¿™ç§å­æŸ¥è¯¢ç§°ä¸ºè¡Œå­æŸ¥è¯¢ã€‚</p><p>å¸¸ç”¨çš„æ“ä½œç¬¦ï¼š= ã€&lt;&gt; ã€IN ã€NOT IN</p><ul><li>æ¡ˆä¾‹1ï¼šæŸ¥è¯¢ä¸ â€œæå¿ â€ çš„è–ªèµ„ åŠ èŒä½éƒ½ç›¸åŒçš„å‘˜å·¥ä¿¡æ¯</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1. æŸ¥è¯¢ &quot;æå¿ &quot; çš„è–ªèµ„å’ŒèŒä½</span></span><br><span class="line"><span class="keyword">select</span> salary , job <span class="keyword">from</span> emp <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">&#x27;æå¿ &#x27;</span>; <span class="comment">-- ç»“æœ: 5000, 5</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2. æ ¹æ®ä¸Šè¿°æŸ¥è¯¢åˆ°çš„è–ªèµ„å’ŒèŒä½ , æŸ¥è¯¢å¯¹åº”å‘˜å·¥çš„ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> (salary, job) <span class="operator">=</span> (<span class="number">5000</span>,<span class="number">5</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 3. å°†ä¸¤æ¡SQLåˆå¹¶ä¸ºä¸€æ¡SQL</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> (salary, job) <span class="operator">=</span> (<span class="keyword">select</span> salary , job <span class="keyword">from</span> emp <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">&#x27;æå¿ &#x27;</span>);</span><br></pre></td></tr></table></figure><h6 id="è¡¨å­æŸ¥è¯¢"><a class="markdownIt-Anchor" href="#è¡¨å­æŸ¥è¯¢"></a> è¡¨å­æŸ¥è¯¢</h6><p>å­æŸ¥è¯¢è¿”å›çš„ç»“æœæ˜¯å¤šè¡Œå¤šåˆ—ï¼Œå¸¸ä½œä¸ºä¸´æ—¶è¡¨ï¼Œè¿™ç§å­æŸ¥è¯¢ç§°ä¸º<strong>è¡¨å­æŸ¥è¯¢</strong>ã€‚</p><ul><li>æ¡ˆä¾‹ï¼š<em>è·å–æ¯ä¸ªéƒ¨é—¨ä¸­è–ªèµ„æœ€é«˜çš„å‘˜å·¥ä¿¡æ¯</em></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- a. è·å–æ¯ä¸ªéƒ¨é—¨çš„æœ€é«˜è–ªèµ„</span></span><br><span class="line"><span class="keyword">select</span> dept_id, <span class="built_in">max</span>(salary) <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> dept_id;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- b. æŸ¥è¯¢æ¯ä¸ªéƒ¨é—¨ä¸­è–ªèµ„æœ€é«˜çš„å‘˜å·¥ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp e , (<span class="keyword">select</span> dept_id, <span class="built_in">max</span>(salary) max_sal <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> dept_id) a</span><br><span class="line">    <span class="keyword">where</span> e.dept_id <span class="operator">=</span> a.dept_id <span class="keyword">and</span> e.salary <span class="operator">=</span> a.max_sal;</span><br></pre></td></tr></table></figure><ol><li><h4 id="æ¡ˆä¾‹"><a class="markdownIt-Anchor" href="#æ¡ˆä¾‹"></a> æ¡ˆä¾‹</h4></li></ol><p>æ ¹æ®éœ€æ±‚ï¼Œå®Œæˆå¤šè¡¨æŸ¥è¯¢çš„SQLè¯­å¥çš„ç¼–å†™ã€‚</p><ul><li>\1. æŸ¥è¯¢ â€œæ•™ç ”éƒ¨â€ æ€§åˆ«ä¸º ç”·ï¼Œä¸”åœ¨ â€œ2011-05-01â€ ä¹‹åå…¥èŒçš„å‘˜å·¥ä¿¡æ¯ ã€‚</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> e.<span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">as</span> e , dept <span class="keyword">as</span> d <span class="keyword">where</span> e.dept_id <span class="operator">=</span> d.id <span class="keyword">and</span> d.name <span class="operator">=</span> <span class="string">&#x27;æ•™ç ”éƒ¨&#x27;</span> <span class="keyword">and</span> e.gender <span class="operator">=</span> <span class="number">1</span> <span class="keyword">and</span> e.entry_date <span class="operator">&gt;</span> <span class="string">&#x27;2011-05-01&#x27;</span>;</span><br></pre></td></tr></table></figure><ul><li>\2. æŸ¥è¯¢å·¥èµ„ ä½äºå…¬å¸å¹³å‡å·¥èµ„çš„ ä¸” æ€§åˆ«ä¸ºç”· çš„å‘˜å·¥ä¿¡æ¯ ã€‚</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> e.<span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">as</span> e , dept <span class="keyword">as</span> d <span class="keyword">where</span> e.dept_id <span class="operator">=</span> d.id <span class="keyword">and</span> e.salary <span class="operator">&lt;</span> (<span class="keyword">select</span> <span class="built_in">avg</span>(salary) <span class="keyword">from</span> emp) <span class="keyword">and</span> e.gender <span class="operator">=</span> <span class="number">1</span>;</span><br></pre></td></tr></table></figure><ul><li>\3. æŸ¥è¯¢éƒ¨é—¨äººæ•°è¶…è¿‡ 10 äººçš„éƒ¨é—¨åç§° ã€‚</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> d.name , <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> emp <span class="keyword">as</span> e , dept <span class="keyword">as</span> d <span class="keyword">where</span> e.dept_id <span class="operator">=</span> d.id <span class="keyword">group</span> <span class="keyword">by</span> d.name <span class="keyword">having</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="operator">&gt;</span> <span class="number">10</span>;</span><br></pre></td></tr></table></figure><ul><li>\4. æŸ¥è¯¢åœ¨ â€œ2010-05-01â€ åå…¥èŒï¼Œä¸”è–ªèµ„é«˜äº 10000 çš„ â€œæ•™ç ”éƒ¨â€ å‘˜å·¥ä¿¡æ¯ï¼Œå¹¶æ ¹æ®è–ªèµ„å€’åºæ’åºã€‚</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp e , dept d <span class="keyword">where</span> e.dept_id <span class="operator">=</span> d.id <span class="keyword">and</span> e.entry_date <span class="operator">&gt;</span> <span class="string">&#x27;2010-05-01&#x27;</span> <span class="keyword">and</span> e.salary <span class="operator">&gt;</span> <span class="number">10000</span> <span class="keyword">and</span> d.name <span class="operator">=</span> <span class="string">&#x27;æ•™ç ”éƒ¨&#x27;</span> <span class="keyword">order</span> <span class="keyword">by</span> e.salary <span class="keyword">desc</span>;</span><br></pre></td></tr></table></figure><ul><li>\5. æŸ¥è¯¢å·¥èµ„ ä½äºæœ¬éƒ¨é—¨å¹³å‡å·¥èµ„çš„å‘˜å·¥ä¿¡æ¯ ã€‚ã€éš¾ã€‘</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 5.1 æŸ¥è¯¢æ¯ä¸ªéƒ¨é—¨çš„å¹³å‡å·¥èµ„</span></span><br><span class="line"><span class="keyword">select</span> dept_id, <span class="built_in">avg</span>(salary) avg_sal <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> dept_id;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 5.2 æŸ¥è¯¢å·¥èµ„ ä½äºæœ¬éƒ¨é—¨å¹³å‡å·¥èµ„ çš„å‘˜å·¥ä¿¡æ¯ ã€‚</span></span><br><span class="line"><span class="keyword">select</span> e.<span class="operator">*</span> <span class="keyword">from</span> emp e , (<span class="keyword">select</span> dept_id, <span class="built_in">avg</span>(salary) avg_sal <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> dept_id) <span class="keyword">as</span> a</span><br><span class="line">          <span class="keyword">where</span> e.dept_id <span class="operator">=</span> a.dept_id <span class="keyword">and</span> e.salary <span class="operator">&lt;</span> a.avg_sal;</span><br></pre></td></tr></table></figure><hr />]]>
    </content>
    <id>https://imouyo.github.io/2026/02/11/MySQL%E5%AD%A6%E4%B9%A0/</id>
    <link href="https://imouyo.github.io/2026/02/11/MySQL%E5%AD%A6%E4%B9%A0/"/>
    <published>2026-02-11T14:27:37.000Z</published>
    <summary>
      <![CDATA[<h2 id="mysql"><a class="markdownIt-Anchor" href="#mysql"></a> MySQL</h2>
<h2 id="å¯åŠ¨mysqlæœåŠ¡"><a class="markdownIt-Anchor" href="#å¯åŠ¨mysqlæœåŠ¡">]]>
    </summary>
    <title>MySQLå­¦ä¹ </title>
    <updated>2026-02-11T15:28:12.947Z</updated>
  </entry>
  <entry>
    <author>
      <name>John Doe</name>
    </author>
    <category term="æŠ€æœ¯" scheme="https://imouyo.github.io/categories/%E6%8A%80%E6%9C%AF/"/>
    <category term="å‰ç«¯" scheme="https://imouyo.github.io/categories/%E6%8A%80%E6%9C%AF/%E5%89%8D%E7%AB%AF/"/>
    <category term="java" scheme="https://imouyo.github.io/tags/java/"/>
    <id>https://imouyo.github.io/2026/02/11/demo/</id>
    <link href="https://imouyo.github.io/2026/02/11/demo/"/>
    <published>2026-02-11T10:06:19.000Z</published>
    <title>demo</title>
    <updated>2026-02-11T14:53:59.271Z</updated>
  </entry>
  <entry>
    <author>
      <name>John Doe</name>
    </author>
    <category term="æŠ€æœ¯" scheme="https://imouyo.github.io/categories/%E6%8A%80%E6%9C%AF/"/>
    <category term="å‰ç«¯" scheme="https://imouyo.github.io/categories/%E6%8A%80%E6%9C%AF/%E5%89%8D%E7%AB%AF/"/>
    <content>
      <![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="quick-start"><a class="markdownIt-Anchor" href="#quick-start"></a> Quick Start</h2><h3 id="create-a-new-post"><a class="markdownIt-Anchor" href="#create-a-new-post"></a> Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="run-server"><a class="markdownIt-Anchor" href="#run-server"></a> Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="generate-static-files"><a class="markdownIt-Anchor" href="#generate-static-files"></a> Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="deploy-to-remote-sites"><a class="markdownIt-Anchor" href="#deploy-to-remote-sites"></a> Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]>
    </content>
    <id>https://imouyo.github.io/2026/02/11/hello-world/</id>
    <link href="https://imouyo.github.io/2026/02/11/hello-world/"/>
    <published>2026-02-11T03:03:04.465Z</published>
    <summary>
      <![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for]]>
    </summary>
    <title>Hello World</title>
    <updated>2026-02-11T10:14:26.403Z</updated>
  </entry>
</feed>
